import{f as hs,c as ps,a as ha,e as gs,j as n,B as ee,b as fs,C as bt,u as yn,d as bs,i as ys,g as Bt,h as vs,k as ws,s as Cs,l as Ss,m as _s,n as xs,o as oe,r as u,p as ks,q as At,t as nn,v as an,S as Ts,T as Es,w as Ps,x as pa,y as g,z as H,M as As,A as pe,D as Is,E as Me,F as E,G as ue,L as Ds,H as k,I as Ns,J as vn,Y as Rs,K as Ms,N as Ls,O as qs,P as ye,Q as Bs,R as Os,U as zs,V as we,W as Fs,X as ga,Z as Fe,_ as tt,$ as Hs,a0 as O,a1 as fa,a2 as ln,a3 as ba,a4 as dn,a5 as ya,a6 as va,a7 as wa,a8 as fe,a9 as js,aa as it,ab as un,ac as be,ad as ct,ae as $s,af as Ws,ag as Us,ah as Vs,ai as Gs,aj as Ca,ak as Sa,al as Ys,am as Ks,an as Ue,ao as V,ap as _a,aq as Qs,ar as Js,as as Zs,at as Xs,au as St,av as eo,aw as xa,ax as to,ay as no,az as rn,aA as pt,aB as ka,aC as Ta,aD as ao,aE as Ea,aF as ro,aG as so,aH as Wn,aI as oo,aJ as io,aK as co,aL as wn,aM as lo,aN as uo,aO as mo,aP as ho,aQ as Un,aR as po,aS as go,aT as fo,aU as bo,aV as yo,aW as vo,aX as sn,aY as wo,aZ as Co,a_ as So,a$ as _o,b0 as Pa,b1 as Aa,b2 as Ia,b3 as Da,b4 as Na,b5 as Ra,b6 as xo,b7 as ko,b8 as To,b9 as Eo,ba as Po,bb as Je,bc as Ma,bd as La,be as Ao,bf as Io,bg as Do,bh as It,bi as Dt,bj as No,bk as Ro,bl as Mo,bm as Vn,bn as Gn,bo as qa,bp as Ba,bq as Ot,br as Oa,bs as za,bt as Lo,bu as qo,bv as Bo,bw as Oo,bx as zo,by as Fo,bz as Ho,bA as jo,bB as $o,bC as Wo,bD as Uo,bE as Fa,bF as Ha,bG as Vo,bH as Go,bI as Yo,bJ as Ko,bK as Qo,bL as Jo,bM as Zo,bN as Xo,bO as ei,bP as ti,bQ as ni,bR as ai,bS as ri,bT as si,bU as oi,bV as ii,bW as ci,bX as li,bY as di,bZ as ui,b_ as mi}from"./vendor-9396aa6c.js";import{_ as ve,b as hi,l as pi}from"./lodash-63a25aa2.js";import{r as ja,u as gi,a as fi,d as bi,f as Yn,g as yi,b as vi,c as wi,e as Ci,h as Si,i as _i,j as xi,k as Cn}from"./tanstack-d9d7d041.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=a(s);fetch(s.href,o)}})();function _t(){function e(a){const r=localStorage.getItem("settings");if(r)try{return JSON.parse(r)[a]}catch{return localStorage.removeItem("settings"),null}else return null}function t(a,r){const s=localStorage.getItem("settings");let o={};if(s)try{o=JSON.parse(s)}catch{localStorage.removeItem("settings")}o[a]=r,localStorage.setItem("settings",JSON.stringify(o))}return{getValue:e,setValue:t}}const ki=["UNAUTHORIZED","UNKNOWN_ERROR"];function Ti(e,t){return t&&"status"in t&&t.status===401?[...e,"UNAUTHORIZED"]:[...e,"UNKNOWN_ERROR"]}const Sn=e=>(t,a)=>t!=null&&t.data?[{type:e,id:"LIST"},...t.data.map(({id:r})=>({type:e,id:r}))]:Ti([{type:e,id:"LIST"}],a),$a=e=>()=>[{type:e,id:"LIST"}],ft=(e,t)=>[{type:e,id:t}],Oe=(e,t)=>(a,r,s)=>t?[{type:e,id:s.id},{type:e,id:t}]:[{type:e,id:s.id}],Ei="https://api-develop.bonuts.ru/api/v1/",Pi="http://localhost:3000/api/v1/",Ai={}.VITE_USE_LOCAL_HOST==="true",{getValue:Ii}=_t(),Di=hs({baseUrl:Ai?Pi:Ei,prepareHeaders:e=>{const t=Ii("auth_token");return t&&e.set("Authorization",`Bearer ${t}`),e},mode:"cors",credentials:"include"}),zt=ps({baseQuery:Di,tagTypes:ki,endpoints:()=>({})}),ie=zt.injectEndpoints({endpoints:e=>({postAccountOperations:e.mutation({query:t=>({url:"/account_operations",method:"POST",body:t.body})}),getAccountOperations:e.query({query:t=>({url:"/account_operations",params:{tenant:t.tenant,account_id:t.accountId,page:t.page}})}),getAccountsById:e.query({query:t=>({url:`/accounts/${t.id}`,params:{tenant:t.tenant}})}),postAdminDeposit:e.mutation({query:t=>({url:"/admin_deposit",method:"POST",body:t.body})}),postAvatars:e.mutation({query:t=>({url:"/avatars",method:"POST",body:t.body})}),getCircles:e.query({query:t=>({url:"/circles",params:{tenant:t.tenant}})}),postCircles:e.mutation({query:t=>({url:"/circles",method:"POST",body:t.body})}),getCirclesById:e.query({query:t=>({url:`/circles/${t.id}`,params:{tenant:t.tenant}})}),patchCirclesById:e.mutation({query:t=>({url:`/circles/${t.id}`,method:"PATCH",body:t.body})}),deleteCirclesById:e.mutation({query:t=>({url:`/circles/${t.id}`,method:"DELETE",params:{tenant:t.tenant}})}),getDonutsSchedulers:e.query({query:t=>({url:"/donuts_schedulers",params:{tenant:t.tenant}})}),postDonutsSchedulers:e.mutation({query:t=>({url:"/donuts_schedulers",method:"POST",body:t.body})}),getDonutsSchedulersById:e.query({query:t=>({url:`/donuts_schedulers/${t.id}`,params:{tenant:t.tenant}})}),patchDonutsSchedulersById:e.mutation({query:t=>({url:`/donuts_schedulers/${t.id}`,method:"PATCH",body:t.body})}),deleteDonutsSchedulersById:e.mutation({query:t=>({url:`/donuts_schedulers/${t.id}`,method:"DELETE",params:{tenant:t.tenant}})}),getDonuts:e.query({query:t=>({url:"/donuts",params:{tenant:t.tenant,all:t.all}})}),postDonuts:e.mutation({query:t=>({url:"/donuts",method:"POST",body:t.body})}),getDonutsById:e.query({query:t=>({url:`/donuts/${t.id}`,params:{tenant:t.tenant}})}),putDonutsById:e.mutation({query:t=>({url:`/donuts/${t.id}`,method:"PUT",body:t.body})}),getEvents:e.query({query:t=>({url:"/events",params:{tenant:t.tenant,showMine:t.showMine,searchText:t.searchText,page:t.page}})}),getEventsById:e.query({query:t=>({url:`/events/${t.id}`,params:{tenant:t.tenant}})}),putEventsById:e.mutation({query:t=>({url:`/events/${t.id}`,method:"PUT",body:t.body})}),postEventsByIdComments:e.mutation({query:t=>({url:`/events/${t.id}/comments`,method:"POST",body:t.body})}),postInvitationsByIdAccept:e.mutation({query:t=>({url:`/invitations/${t.id}/accept`,method:"POST"})}),postInvitationsByIdDecline:e.mutation({query:t=>({url:`/invitations/${t.id}/decline`,method:"POST"})}),postInvitations:e.mutation({query:t=>({url:"/invitations",method:"POST",body:t.body})}),getInvitationsMy:e.query({query:()=>({url:"/invitations/my"})}),getProfile:e.query({query:t=>({url:"/profile",params:{tenant:t.tenant}})}),getProfilesById:e.query({query:t=>({url:`/profiles/${t.id}`,params:{tenant:t.tenant}})}),putProfilesById:e.mutation({query:t=>({url:`/profiles/${t.id}`,method:"PUT",body:t.body})}),postProfilesByIdSetActivity:e.mutation({query:t=>({url:`/profiles/${t.id}/set_activity`,method:"POST",body:t.body})}),getProfiles:e.query({query:t=>({url:"/profiles",params:{tenant:t.tenant}})}),getRequests:e.query({query:t=>({url:"/requests",params:{active:t.active,archive:t.archive,incoming:t.incoming,my:t.my,tenant:t.tenant}})}),postRequests:e.mutation({query:t=>({url:"/requests",method:"POST",body:t.body})}),postRequestsActivate:e.mutation({query:t=>({url:"/requests/activate",method:"POST",body:t.body})}),postRequestsRefund:e.mutation({query:t=>({url:"/requests/refund",method:"POST",body:t.body})}),postRequestsRollback:e.mutation({query:t=>({url:"/requests/rollback",method:"POST",body:t.body})}),postRequestsClose:e.mutation({query:t=>({url:"/requests/close",method:"POST",body:t.body})}),postTenantsByTenantNameJoin:e.mutation({query:t=>({url:`/tenants/${t.tenantName}/join`,method:"POST"})}),getTenantCurrent:e.query({query:t=>({url:"/tenant/current",params:{tenant:t.tenant}})}),putTenantCurrent:e.mutation({query:t=>({url:"/tenant/current",method:"PUT",body:t.body})}),getTenantsAccessible:e.query({query:()=>({url:"/tenants/accessible"})}),getTenants:e.query({query:()=>({url:"/tenants"})}),postRegister:e.mutation({query:t=>({url:"/register",method:"POST",body:t.body})}),postConfirmEmail:e.mutation({query:t=>({url:"/confirm_email",method:"POST",body:t.body})}),getConfirmEmail:e.query({query:t=>({url:"/confirm_email",params:{token:t.token}})}),postDemoAuthenticate:e.mutation({query:()=>({url:"/demo_authenticate",method:"POST"})}),postAuthenticate:e.mutation({query:t=>({url:"/authenticate",method:"POST",body:t.body})}),postLogout:e.mutation({query:()=>({url:"/logout",method:"POST"})}),postSendConfirmEmail:e.mutation({query:t=>({url:"/send_confirm_email",method:"POST",body:t.body})}),postRefreshToken:e.mutation({query:()=>({url:"/refresh_token",method:"POST"})}),getUsersRecover:e.query({query:t=>({url:"/users/recover",params:{recover_token:t.recoverToken}})}),putUsersPassword:e.mutation({query:t=>({url:"/users/password",method:"PUT",body:t.body})}),postUsersPassword:e.mutation({query:t=>({url:"/users/password",method:"POST",body:t.body})})}),overrideExisting:!1}),{usePostAccountOperationsMutation:Ni,useGetAccountOperationsQuery:Oh,useGetAccountsByIdQuery:zh,usePostAdminDepositMutation:Ri,usePostAvatarsMutation:Fh,useGetCirclesQuery:Hh,usePostCirclesMutation:jh,useGetCirclesByIdQuery:$h,usePatchCirclesByIdMutation:Mi,useDeleteCirclesByIdMutation:Li,useGetDonutsSchedulersQuery:Wh,usePostDonutsSchedulersMutation:Uh,useGetDonutsSchedulersByIdQuery:Vh,usePatchDonutsSchedulersByIdMutation:Gh,useDeleteDonutsSchedulersByIdMutation:Yh,useGetDonutsQuery:Kh,usePostDonutsMutation:Qh,useGetDonutsByIdQuery:qi,usePutDonutsByIdMutation:Jh,useGetEventsQuery:Zh,useGetEventsByIdQuery:Xh,usePutEventsByIdMutation:Bi,usePostEventsByIdCommentsMutation:Oi,usePostInvitationsByIdAcceptMutation:ep,usePostInvitationsByIdDeclineMutation:tp,usePostInvitationsMutation:zi,useGetInvitationsMyQuery:np,useGetProfileQuery:Wa,useGetProfilesByIdQuery:Fi,usePutProfilesByIdMutation:Hi,usePostProfilesByIdSetActivityMutation:ap,useGetProfilesQuery:rp,useGetRequestsQuery:sp,usePostRequestsMutation:ji,usePostRequestsActivateMutation:$i,usePostRequestsRefundMutation:Wi,usePostRequestsRollbackMutation:Ui,usePostRequestsCloseMutation:Vi,usePostTenantsByTenantNameJoinMutation:Gi,useGetTenantCurrentQuery:Yi,usePutTenantCurrentMutation:op,useGetTenantsAccessibleQuery:ip,useGetTenantsQuery:cp,usePostRegisterMutation:Ki,usePostConfirmEmailMutation:Qi,useGetConfirmEmailQuery:Ji,usePostDemoAuthenticateMutation:Zi,usePostAuthenticateMutation:Xi,usePostLogoutMutation:ec,usePostSendConfirmEmailMutation:tc,usePostRefreshTokenMutation:Ua,useGetUsersRecoverQuery:nc,usePutUsersPasswordMutation:ac,usePostUsersPasswordMutation:rc}=ie,on={token:void 0,tenant:void 0,isAuthenticated:!1,isAuthenticating:!1,profile:void 0},Va=ha({name:"auth",initialState:on,reducers:{logout:()=>on,authenticate:(e,t)=>{e.isAuthenticated=!0,e.isAuthenticating=!1,e.token=t.payload.token,e.tenant=t.payload.tenant},setProfile:(e,t)=>{ve.isEqual(e.profile,t.payload)||(e.profile=t.payload)}},extraReducers:e=>{e.addMatcher(ie.endpoints.postDemoAuthenticate.matchPending,t=>{t.isAuthenticating=!0}).addMatcher(ie.endpoints.postDemoAuthenticate.matchFulfilled,(t,a)=>{var r;t.token=a.payload.auth_token,a.payload.tenants.length===1&&(t.tenant=((r=a.payload.tenants[0])==null?void 0:r.name)||""),t.isAuthenticated=!0,t.isAuthenticating=!1}).addMatcher(ie.endpoints.postRefreshToken.matchFulfilled,(t,a)=>{var r;t.token=a.payload.auth_token,a.payload.tenants.length===1&&(t.tenant=((r=a.payload.tenants[0])==null?void 0:r.name)||""),t.isAuthenticated=!0,t.isAuthenticating=!1}).addMatcher(ie.endpoints.postDemoAuthenticate.matchRejected,t=>{t.isAuthenticated=!1,t.isAuthenticating=!1,t.token=void 0,t.tenant=void 0,t.profile=void 0}).addMatcher(ie.endpoints.postAuthenticate.matchPending,t=>{t.isAuthenticating=!0}).addMatcher(ie.endpoints.postAuthenticate.matchFulfilled,(t,a)=>{var r;t.token=a.payload.auth_token,a.payload.tenants.length===1&&(t.tenant=((r=a.payload.tenants[0])==null?void 0:r.name)||""),t.isAuthenticated=!0,t.isAuthenticating=!1}).addMatcher(ie.endpoints.postAuthenticate.matchRejected,t=>{t.isAuthenticated=!1,t.isAuthenticating=!1,t.token=void 0,t.tenant=void 0,t.profile=void 0}).addMatcher(ie.endpoints.postLogout.matchPending,()=>on)}}),_n=Va.actions,sc=Va.reducer;var rt=(e=>(e.Success="success",e.Error="error",e.Warning="warning",e.Info="info",e))(rt||{});const oc={isOpen:!1,severity:rt.Success,message:""},ic=ha({name:"notification",initialState:oc,reducers:{setNotification:(e,t)=>{e.isOpen=!0,e.severity=t.payload.severity,e.message=t.payload.message},clearNotification:e=>{e.isOpen=!1,e.severity=rt.Success,e.message=""}}}),cc=ic.reducer,lc={[zt.reducerPath]:zt.reducer,auth:sc,notification:cc},dc=e=>{gs(e,{preventDuplicate:!0,variant:rt.Error,action:t=>n(ee,{sx:{textTransform:"none",color:"black"},onClick:()=>fs(t),children:n(bt,{})})})},w=()=>{const{t:e}=yn(),t=(a,r)=>{let s="";return a&&(s=e(a,{...r!=null&&r.count||(r==null?void 0:r.count)===0?{count:r==null?void 0:r.count}:{}}),r!=null&&r.capitalize&&(s=ve.capitalize(s))),s};return{translate:t,t}};var B=(e=>(e.edit="edit",e.error="error",e.employees="employees",e.employment_date="Employment date",e.empty_events_placeholder="you dont have any events yet",e.expiration_date="expiration date",e.email_notification="email notification",e.email_confirmation="email confirmation",e.email_address="email address",e.email_address_must_be_valid="email address must be valid",e.every_week="every week",e.every_month="every month",e))(B||{});const De=()=>{const{enqueueSnackbar:e,closeSnackbar:t}=bs(),{t:a}=w();return{showNotification:(o,i)=>{const c=e(a(o),{variant:i||rt.Success,action:l=>n(ee,{sx:{textTransform:"none",color:"black"},onClick:()=>t(l),children:n(bt,{})})});return{closeNotify:()=>t(c)}},showGeneralError:()=>{e(a(B.error),{variant:rt.Error,action:o=>n(ee,{sx:{textTransform:"none",color:"black"},onClick:()=>t(o),children:n(bt,{})})})}}};var se=(e=>(e.Buy="Buy",e.EDIT="Edit",e.Description="Description",e.Delivery_days="delivery days",e.DONUTS="Donuts",e.PROFILE="Profile",e.ONLY_YOU_CAN_SEE_IT="Only you can see it",e.REFRESH="Refresh",e.SIGN_OUT="Sign_Out",e.SUBMIT="Submit",e.DISCARD="Discard",e.NEXT="Next",e.MORE="More",e.NO_OPTIONS="No options",e.On_stock="on stock",e.PTS="PTS",e.SEARCH_STRING="Search string",e))(se||{}),Qe=(e=>(e.PRICE_ASC="price asc",e.PRICE_DESC="price desc",e.DATE_ASC="date asc",e.NEWEST="newest",e.SORT_BY_ALPHABET="sort by alphabet",e.NAME_DESC="name desc",e))(Qe||{}),Ga=(e=>(e.DATA_FETCHING_ERROR="Data fetching error",e))(Ga||{}),Q=(e=>(e.EMPTY_STRING="",e.DOT=".",e.COMMA=",",e.SPACE=" ",e.SEMICOLON=":",e.DASH="-",e))(Q||{});const uc=e=>t=>a=>{var o,i,c,l,d,m;const{dispatch:r}=e,{setValue:s}=_t();return ys(a)&&(console.warn("We got a rejected action!"),console.log(a),(i=(o=a==null?void 0:a.payload)==null?void 0:o.data)!=null&&i.error&&dc(Bt.t((l=(c=a==null?void 0:a.payload)==null?void 0:c.data)==null?void 0:l.message)||Bt.t((m=(d=a.payload)==null?void 0:d.data)==null?void 0:m.errorText)||Ga.DATA_FETCHING_ERROR),a.payload.status===401&&(s("auth_token",null),s("tenant",null),r(_n.logout()),r(ie.util.resetApiState()))),t(a)},{createReduxHistory:mc,routerMiddleware:hc,routerReducer:pc}=vs({history:ws()}),gc=e=>Ss({reducer:{router:pc,...lc},devTools:!1,middleware:t=>t().concat(hc,zt.middleware,uc),...e}),Yt=gc(),Ae=()=>_s(),me=xs,fc=mc(Yt);Cs(Yt.dispatch);const bc=e=>{const t=oe("(prefers-color-scheme: light)",{noSsr:!0})?"light":"dark",a=localStorage.getItem("theme"),r=a&&a in e?a:t,[s,o]=u.useState(r),i=m=>{localStorage.setItem("theme",m),o(m)},c=()=>{i(s==="dark"?"light":"dark")},l=e[s];return[u.useMemo(()=>ks(l),[l]),{setTheme:i,toggleTheme:c}]},Ya={typography:{caption2:{fontWeight:400,fontSize:"0.85rem",lineHeight:1.66,letterSpacing:"0.03333em"}},palette:{background:{default:At.A100,palette:"#FFF"},primary:{main:"#5a985f",light:"#97cf9e",veryLight:"#ebffed",dark:"#426644"},secondary:{main:"#d4741a",dark:"#c44e0d",light:"#e6ad57",veryLight:"#FFCF86"},error:{veryLight:nn.A100,light:nn.A200,main:nn.A700},neutral:{main:At.A400,dark:At[800],light:At.A100},info:{main:an.A200,dark:an.A400,light:an.A100}}},yc=Ya,vc={dark:yc,light:Ya},wc=u.createContext({setTheme:()=>{},toggleTheme:()=>{}}),Cc=({children:e})=>{const[t,a]=bc(vc);return n(Ts,{injectFirst:!0,children:n(wc.Provider,{value:a,children:n(Es,{theme:t,children:e})})})},Ve=u.createContext({isDrawerOpen:!1,toggleDrawer:()=>{},menuRoutes:[],routes:{}}),Ka=({loading:e=!1})=>n(Ps,{sx:{color:"#fff",zIndex:t=>t.zIndex.drawer+1},open:e,onClick:()=>{},children:n(pa,{color:"inherit"})}),Qa=u.createContext(()=>{}),Sc=({children:e})=>{const[t,a]=u.useState({}),r=u.useCallback((o,i)=>{a(c=>({...c,[o]:i}))},[]),s=u.useMemo(()=>Object.values(t).some(o=>o),[t]);return g(Qa.Provider,{value:r,children:[n(Ka,{loading:s}),e]})},Ja=H("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(0,1),...e.mixins.toolbar})),Ft=240,Kn=60,Qn=e=>({width:Ft,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}),Jn=e=>({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:`calc(${e.spacing(7)} + 1px)`,[e.breakpoints.up("sm")]:{width:`calc(${e.spacing(8)} + 1px)`}}),_c=H(As,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:t})=>({width:Ft,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...t&&{...Qn(e),"& .MuiDrawer-paper":Qn(e)},...!t&&{...Jn(e),"& .MuiDrawer-paper":Jn(e)}}));function je(){var $;const e=Ae(),{authenticate:t}=_n,a=me(F=>F.auth),[r,s]=u.useState(!0),[o,{isLoading:i,error:c}]=Xi(),[l,{isLoading:d,error:m}]=Zi(),[h]=ec(),{data:p}=Wa({tenant:a.tenant||""},{skip:r||!a.tenant}),{getValue:f,setValue:b}=_t(),[y,v]=u.useState(!0);u.useEffect(()=>{a.token?s(!1):s(!0)},[a.token]);const C=()=>({token:f("auth_token")||"",tenant:f("tenant")||""}),x=async F=>!!F.token,P=async F=>{var Y;try{const Z={body:{email:F.body.email.trim(),password:F.body.password}},A=await o(Z).unwrap();let K="";A.currentTenant?K=A.currentTenant:A.tenants.length===1&&(K=((Y=A.tenants[0])==null?void 0:Y.name)||""),b("auth_token",A.auth_token),b("tenant",K)}catch(Z){console.log(Z)}},z=async()=>{var F;try{const Y=await l().unwrap();let Z="";Y.currentTenant?Z=Y.currentTenant:Y.tenants.length===1&&(Z=((F=Y.tenants[0])==null?void 0:F.name)||""),b("auth_token",Y.auth_token),b("tenant",Z)}catch(Y){console.log(Y)}},J=async()=>{b("auth_token",null),b("tenant",null),h().finally(()=>{e(pe("/login")),e(ie.util.resetApiState())})},G=async()=>{v(!0);try{const F=C();return F.token?await x(F)?(e(t(F)),!0):(b("auth_token",""),e(pe("/login")),!1):!1}finally{v(!1)}};return{isLogging:i||d,isAuthLoading:y,authError:c||m,signIn:P,demoSignIn:z,signOut:J,getAuth:C,checkAuth:G,auth:a,setTenant:F=>{b("tenant",F),G()},profile:p,currentRoles:($=a.profile)==null?void 0:$.roles}}const xn=e=>{var a,r,s,o,i,c,l,d,m,h,p,f,b,y,v,C,x,P,z;return e?{id:Number(e.id),...e.attributes,user_id:(a=e.attributes)!=null&&a.user_id?Number((r=e.attributes)==null?void 0:r.user_id):void 0,position:(s=e.attributes)==null?void 0:s.position,user_name:(o=e.attributes)==null?void 0:o.name,admin:(i=e.attributes)==null?void 0:i.admin,user_avatar:(c=e.attributes)==null?void 0:c.user_avatar,email:(l=e.attributes)==null?void 0:l.email,first_name:(d=e.attributes)==null?void 0:d.first_name,last_name:(m=e.attributes)==null?void 0:m.last_name,roles:(h=e.attributes)==null?void 0:h.roles,tenant:(p=e.attributes)==null?void 0:p.tenant,circles:(f=e.attributes)==null?void 0:f.circles,birthdate:((b=e.attributes)==null?void 0:b.birthdate)||void 0,in_date:((y=e.attributes)==null?void 0:y.in_date)||void 0,bio:((v=e.attributes)==null?void 0:v.bio)||void 0,contact:((C=e.attributes)==null?void 0:C.contact)||void 0,self_account:(x=e.attributes)==null?void 0:x.self_account,distrib_account:(P=e.attributes)==null?void 0:P.distrib_account,created_at:(z=e.attributes)==null?void 0:z.created_at}:void 0},Za=e=>{var a;return!(e!=null&&e.data)||!((a=e==null?void 0:e.data)!=null&&a.id)?void 0:xn(e.data)},xc=e=>{const{data:t}=e;return t?t.map(a=>{const{attributes:r,id:s}=a;return{...r,email:(r==null?void 0:r.email)||"",birthdate:(r==null?void 0:r.birthdate)||void 0,in_date:(r==null?void 0:r.in_date)||void 0,bio:(r==null?void 0:r.bio)||void 0,contact:(r==null?void 0:r.contact)||void 0,id:Number(s)}}):[]},Te=e=>e.auth.tenant,Xa=e=>e.auth.profile,er=e=>{var t,a;return{perPage:Number((t=e==null?void 0:e.response)==null?void 0:t.headers.get("Per-Page")),total:Number((a=e==null?void 0:e.response)==null?void 0:a.headers.get("Total"))}},Ht=ie.enhanceEndpoints({addTagTypes:["Accounts","History"],endpoints:{getAccountsById:{providesTags:Oe("Accounts","Balance")},getAccountOperations(e){e.providesTags=(t,a,r)=>[{type:"Accounts",id:r.accountId}],e.transformResponse=(t,a)=>(t.paginator=er(a),t)}}}),{useGetAccountsByIdQuery:kc}=Ht,tr=()=>{const[e]=Hi(),t=me(Te);return{updateProfile:async(r,s,o)=>{const i=await e({id:r==null?void 0:r.id.toString(),body:{...s,tenant:t}});return o==null||o(),i}}},X=(e,t=!1)=>{const a=u.useContext(Qa);u.useEffect(()=>(a(e,t),()=>a(e,!1)),[t]);const r=u.useCallback(()=>{a(e,!0)},[]),s=u.useCallback(()=>{a(e,!1)},[]);return{openLoader:r,closeLoader:s}},Tc="profileLogic",Ne=()=>{const e=me(Xa),t=me(Te),{updateProfile:a}=tr(),{openLoader:r,closeLoader:s}=X(Tc),o=Ae(),{data:i,error:c,isLoading:l,refetch:d}=Wa({tenant:t||void 0},{skip:!t});return u.useEffect(()=>{if(i){const f=Za(i);f&&o(_n.setProfile(f))}},[i]),{profile:e,isLoading:l,error:c,updateProfile:async(f,b)=>(r(),a(f,b,d).finally(()=>{s()})),authTenant:t,invalidateSelfBalance:()=>{var f;o(Ht.util.invalidateTags(ft("Accounts",(f=e==null?void 0:e.self_account)==null?void 0:f.id)))},invalidateDistribBalance:()=>{var f;o(Ht.util.invalidateTags(ft("Accounts",(f=e==null?void 0:e.distrib_account)==null?void 0:f.id)))}}};var ne=(e=>(e.Default="default",e.Circles="circles",e.Profile="profile",e.Events="events",e.DetailedEvent="detailedEvent",e.Donuts="donuts",e.DonutPreview="donut_preview",e.Employees="employees",e.EmployeePreview="employee_preview",e.Requests="requests",e.StoreManager="store_manager",e.ShareAll="share_all",e.ConfirmEmail="confirm_email",e.Schedulers="schedulers",e.AccessibleTenants="accessible_tenants",e.MyTenants="my_tenants",e.MyInvitations="my_invitations",e))(ne||{});const nr=(e,t)=>Object.values(e).reduce((a,r)=>{const s=t==null?void 0:t.find(c=>c.authenticated&&c.from===r.path),o={...r,...s&&{authenticatedRedirect:s==null?void 0:s.to}},i=r.children?nr(r.children,t):[];return[...a,o,...i]},[]);function ar(){return Is()}const T={Home:"/home",AccountOperations:"/account/:id",ActiveRequests:"active_requests",ClosedRequests:"closed_request",Dashboard:"/",DonutPreview:"/d/:id",DonutEdit:"/donut_edit/:id",Donuts:"/donuts",MyRequests:"/my_requests",IncomingRequests:"/incoming_requests",Login:"/login",Logout:"/logout",Employees:"/employees",EmployeePreview:"/e/:id",Event:"/event/:id",Plugins:"/plugins",Profile:"/my",RequestRecover:"/recover_password",Recover:"/recover_password/:token",Registration:"/registration",Requests:"/requests",Schedulers:"/schedulers",Settings:"/settings",Share:"/share",Statistics:"/statistic",Store:"/store-manager",Tenant:"/tenant",TenantList:"/tenants_list",Circles:"/circles",ConfirmEmail:"/confirm_email/:token",Invitations:"/invitations"};var S=(e=>(e.Login="Login",e.Logout="Logout",e.Registration="Registration",e.RequestRecover="RequestRecover",e.Recover="Recover",e.Dashboard="Dashboard",e.Donuts="Donuts",e.DonutPreview="DonutPreview",e.DonutEdit="DonutEdit",e.Profile="Profile",e.Requests="Requests",e.IncomingRequests="IncomingRequests",e.ActiveRequests="ActiveRequests",e.ClosedRequests="ClosedRequests",e.Employees="Employees",e.EmployeePreview="EmployeePreview",e.Settings="Settings",e.Store="Store",e.Schedulers="Schedulers",e.Plugins="Plugins",e.Share="Share",e.Tenant="Tenant",e.TenantList="TenantList",e.Statistics="Statistics",e.AccountOperations="AccountOperations",e.MyRequests="MyRequests",e.Home="Home",e.Circles="Circles",e.ConfirmEmail="ConfirmEmail",e.Event="Event",e.Invitations="Invitations",e))(S||{});const R=H(Me,{shouldForwardProp:e=>e!=="isPreformatted"})(({isPreformatted:e})=>({...e?{whiteSpace:"pre-wrap"}:null}));var U=(e=>(e.author="author",e.accept="accept",e.amount="amount",e.approximate_action_time="approximate action time",e.add_new_scheduler="add new scheduler",e.admin_deposit="admin deposit",e.add_comment="add some comment",e.available_employees="available employees",e.are_you_sure="are you sure?",e.are_you_sure_to_delete="are you sure to delete?",e.active="active",e.active_request="active requests",e.activated="activated",e.activate="activate",e.access_denied="access denied",e.admin="admin",e.about_myself="About myself",e))(U||{}),Pe=(e=>(e.birthday="дата рождения",e.blocked="blocked",e.birthday_donuts="birthday donuts",e.birthday_points="birthday points",e.birthday_message="birthday_message",e.burn_unused_donuts="brun unused donuts",e.back="back",e.by_name="by name",e))(Pe||{}),M=(e=>(e.close="close",e.closed="closed",e.coins="coins",e.cancel="cancel",e.create="create",e.created="created",e.contact="Contact",e.comment="comment",e.comment_is_required="comment is required",e.confirmation="confirmation",e.confirm="confirm",e.confirmed="confirmed",e.confirm_email="confirm email",e.closed_requests="closed requests",e.choose_employees="choose employees",e.choose_type="choose type",e.choose_day="choose day",e.choose_time="choose time",e.choose_timezone="choose timezone",e.confirmation_email_was_sent_to="confirmation email was sent to",e))(M||{}),Ce=(e=>(e.day="day",e.delivery_days="delivery days",e.decline="decline",e.description="description",e.disable_account="disable account",e.disabled="disabled",e.domain="domain",e.demo="demo",e.donuts="donuts",e))(Ce||{}),st=(e=>(e.filtered="filtered",e.first_name="first name",e))(st||{}),kn=(e=>(e.go_to="go to",e))(kn||{}),Tn=(e=>(e.history="history",e))(Tn||{}),ze=(e=>(e.in_date="in date",e.invitations="invitations",e.incoming="incoming",e.i_can_spend="i can spend",e.i_can_share="i can share",e))(ze||{}),En=(e=>(e.join="join",e))(En||{}),ot=(e=>(e.last_name="last name",e))(ot||{}),Re=(e=>(e.more="more",e.my_teams="my teams",e.max_amount_is="max amount is",e.min_amount_is="min amount is",e))(Re||{}),te=(e=>(e.not_active="not active",e.name="name",e.no_name="no name",e.name_is_required="name is required",e.next="next",e.new_donut="new donut",e.not_found="not found",e.new_circle="new circle",e.new_invitation="new invitation",e.new_scheduler="new scheduler",e.new_invitation_was_created="new invitation was created",e.new_invitation_email_was_sent="new invitation email was sent",e))(te||{}),xt=(e=>(e.on_stock="on stock",e.ok="ok",e))(xt||{}),W=(e=>(e.profile="profile",e.profiles="profiles",e.price="price",e.previous="previous",e.preview="preview",e.purchase="purchase",e.password="password",e.password_repeat="password_repeat",e.page_not_found="page not found",e.password_changed="password changed",e.password_is_required="password is required",e.password_confirm_is_required="password confirm is required",e.passwords_do_not_math="password do not match",e))(W||{}),ce=(e=>(e.request_added="request added",e.rows_per_page="rows per page",e.records="records",e.requests="requests",e.remove_all="remove all",e.refunded="refunded",e.refund="refund",e.request_been_set_incoming="request has been set as incoming",e.request_been_set_closed="request has been set as close",e.request_been_set_active="request has been set as active",e.request_has_been_refunded="request has been refunded",e.restore_password="restore password",e.recover_email_has_been_sent="recover email has been sent",e))(ce||{}),j=(e=>(e.save="save",e.search="search",e.selected="selected",e.show_only_mine="show only mine",e.select_all="select all",e.share="share",e.selected_employees="selected employees",e.set_password="set password",e.send_confirmation_email="send confirmation email",e.store_admin="store admin",e.supply_days="supply days",e.settings_updated=" settings updated",e.sign_in="sign in",e.send="send",e.sign_up="sign_up",e.soon_will_be_back="soon_will_be_back",e.scheduler_created="scheduler created",e.scheduler_updated="scheduler updated",e.scheduler_deleted="scheduler deleted",e.scheduler_delete="scheduler delete",e))(j||{}),ae=(e=>(e.teams_you_can_join="teams you can join",e.to="to",e.to_profile="to profile",e.to_store="to store",e.transfer_type="transfer type",e.transfer_points="transfer points",e.transfer_donuts="transfer donuts",e.transferred="transferred",e.transfer="transfer",e.time_is_required="time is required",e.tooltip_scheduler_time="tooltip_scheduler_time",e))(ae||{}),yt=(e=>(e.under_construct="under construct",e.updated="updated",e))(yt||{});const Ec=()=>{const{t:e}=w();return n(E,{sx:{alignItems:"center",width:"100%",height:"60vh",display:"flex",justifyContent:"center"},children:g(ue,{direction:"column",children:[n(Ds,{sx:{height:"150px",width:"150px"}}),n(R,{variant:"h5",children:e(U.access_denied)})]})})},rr={modalImage:"modal-image"},Pc=({url:e,className:t})=>n("div",{className:t,children:n("img",{className:rr.modalImage,src:e,alt:"..."})}),L=e=>`& .${e}`,Ac="&:hover",Ic=H(Pc,{})(({theme:e})=>({fontSize:"0",verticalAlign:"top",maxHeight:"600px",[e.breakpoints.down("sm")]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},[L(rr.modalImage)]:{display:"block",maxWidth:"100%",maxHeight:"600px",verticalAlign:"top",padding:"5px"}})),sr=(e,t,a)=>(t&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof File)?Object.keys(t).length?Object.keys(t).forEach(r=>{sr(e,t[r],a?`${a}[${r}]`:r)}):e.append(a,JSON.stringify([])):t instanceof Date?e.append(a,t.toISOString()):e.append(a,t===null?"":t),e),Dc=e=>sr(new FormData,e),Pn=(e,t,a)=>({url:e,method:t,credentials:"include",body:Dc(a==null?void 0:a.body)}),lt=ie.injectEndpoints({endpoints:e=>({createDonut:e.mutation({query(t){return{url:"/donuts",method:"POST",credentials:"include",body:t}}}),updateDonut:e.mutation({query(t){return Pn(`/donuts/${t.id}`,"PUT",t)}})})}),{useCreateDonutMutation:Nc,useUpdateDonutMutation:Rc}=lt,An=lt.enhanceEndpoints({addTagTypes:["Donuts"],endpoints:{getDonuts:{providesTags:["Donuts"]},postDonuts:{invalidatesTags:["Donuts"]}}}),Mc=()=>{const[e]=Nc(),t=Ae(),{profile:a}=Ne();return{postDonut:async(s,o)=>{const{logo:i,price:c,name:l}=s;if(a!=null&&a.tenant){const d=new FormData;i&&d.append("logo",i),d.append("tenant",a.tenant),d.append("price",c.toString()),d.append("name",l),e(d).unwrap().then(m=>{var h;m.data&&(t(An.util.invalidateTags(["Donuts"])),(h=o==null?void 0:o.onSuccess)==null||h.call(o,m))})}}}};u.createContext(()=>{});const or=u.createContext({}),ir=u.createContext({}),Lc=({children:e,values:t,initialValues:a={}})=>n(or.Provider,{value:t,children:n(ir.Provider,{value:a,children:e})}),jt=({offset:e,key:t})=>e?n(k,{item:!0,style:{padding:0},...e,zeroMinWidth:!0},t):null,cr=e=>{const{translate:t}=w(),{stringLabel:a,placeholder:r,onAnimationStart:s,onBlur:o,onFocus:i,name:c,...l}=e;return n(Ns,{...l,placeholder:t(r),label:t(a),name:c,parseError:d=>t(d.message)})},kt=()=>{const e=vn(),t=(s,o)=>{e.setValue(s,o,{shouldDirty:!0})},a=u.useContext(or),r=u.useContext(ir);return{onChange:t,values:a,initialValues:r}},qc=e=>{const{name:t,id:a,placeholder:r,label:s,maxRows:o,minRows:i,value:c,required:l,disabled:d,rows:m}=e,{onChange:h}=kt(),p=f=>{h(t,f.target.value)};return n(cr,{name:t,id:a,placeholder:r,stringLabel:s,value:c==null?void 0:c.toString(),onChange:p,required:l,minRows:i,maxRows:o,disabled:d,rows:m||10})},Bc=e=>{const{translate:t}=w(),{stringLabel:a,...r}=e;return n(Rs,{...r,inputProps:{placeholder:t(a),label:t(a),variant:"standard"}})},Oc=e=>{const{name:t,label:a,required:r,disabled:s}=e,{onChange:o}=kt();return n(Bc,{name:t,stringLabel:a,onChange:c=>{o(t,(c==null?void 0:c.toDateString())||Q.EMPTY_STRING)},required:r,disabled:s})},lr=u.forwardRef(({stringLabel:e,...t},a)=>{const{t:r}=w();return n(Ms,{...t,ref:a,label:r(e)})}),zc=e=>{const{name:t,id:a,label:r,disabled:s,disabledLabel:o}=e,{getValues:i}=vn(),{t:c}=w(),l=i(t),d=u.useMemo(()=>l?r:o||r,[l]);return n(lr,{stringLabel:c(d),name:t,disabled:s,id:a})},Fc=({field:e})=>{const{translate:t}=w(),{name:a,disabled:r,label:s,required:o}=e;return e.source?n(Ls,{required:o,label:s,valueKey:"key",name:a==null?void 0:a.toString(),disabled:r,options:e.source,parseError:i=>t(i.message)}):null};var N=(e=>(e.xs="xs",e.sm="sm",e.md="md",e.lg="lg",e))(N||{}),q=(e=>(e.password="password",e.tags="tags",e.imageUpload="imageUpload",e.text="text",e.number="number",e.textarea="textarea",e.date="date",e.switch="switch",e.radio="radio",e))(q||{});const nt=()=>{},dr=e=>{const{props:t,onClear:a,value:r,clearable:s}=e;return{...t,...s&&{endAdornment:n(qs,{position:"end",children:!!r&&n(ye,{onClick:o=>{o.preventDefault(),a()},children:n(Bs,{})})})}}},mn=u.forwardRef((e,t)=>{const{translate:a}=w(),{stringLabel:r,onClear:s=nt,name:o,clearable:i=!1,...c}=e,{InputProps:l={},value:d,placeholder:m,label:h}=c,p=dr({clearable:i,onClear:s,value:d,props:l});return n(Os,{...c,ref:t,name:o,placeholder:a(m),label:a(r)||h,InputProps:p,value:d,parseError:f=>a(f.message),variant:"standard"})}),Hc=e=>{const{name:t,id:a,minValue:r,maxValue:s,placeholder:o,label:i,type:c,value:l,rows:d,required:m,disabled:h}=e,{onChange:p}=kt(),f=b=>{const y=ve.isNumber(b.target.value)?Number(b.target.value):b.target.value;p(t,y)};return n(mn,{name:t,id:a,placeholder:o,stringLabel:i,type:c,value:l,multiline:c===q.text,rows:d,required:m,sx:{width:"100%"},disabled:h,onChange:f,InputProps:{inputProps:{min:r,max:s}}})},jc=({field:e,value:t,id:a})=>{const{source:r=[],label:s,placeholder:o,name:i,disabled:c,loading:l}=e,{onChange:d}=kt(),{translate:m}=w(),h=r.filter(f=>!t.find(b=>b.key===f.key));return n(zs,{multiple:!0,id:a,options:h,getOptionLabel:f=>{var b;return f.label||((b=f.key)==null?void 0:b.toString())||(f==null?void 0:f.toString())},value:t,loading:l,renderInput:f=>n(we,{...f,variant:"standard",label:m(s),placeholder:t?Q.EMPTY_STRING:m(o)}),onChange:(f,b)=>{d(i.toString(),b)},noOptionsText:m(se.NO_OPTIONS),disabled:c})},ur=u.createContext(()=>{}),In=u.createContext(()=>{}),mr=u.createContext([]),Se=()=>{const e=u.useContext(ur),t=u.useContext(In),a=u.useCallback(()=>{Object.keys(Lt.items).forEach(s=>{t(s,s)})},[Lt.items]),r=Object.keys(Lt.items).reduce((s,o)=>{const i=o;return s[i]={name:i,show:c=>{e(i,c)},hide:()=>t(i,i)},s},{});return{showModal:e,closeAll:a,...r}},$c="0.2",Wc="0.14",Uc="0.12",Vc={big:{boxShadow:` 0 9px 46px 8px rgba(0, 0, 0, ${Wc}),    0 11px 15px -7px rgba(0, 0, 0,${Uc}),    0 24px 38px 3px rgba(0, 0, 0,${$c})`}},Gc=H("div")(e=>({display:"inline-block",margin:"10px",overflow:"hidden",textAlign:"center",verticalAlign:"middle",maxWidth:"100%",height:"fit-content",...Vc.big,...e.round&&{borderRadius:"50%",maxWidth:"100px"},"& img":{display:"block",objectFit:"contain",maxWidth:"100%",maxHeight:"100%"},"&:hover":{cursor:"zoom-in"}})),Kt=({image:e,avatar:t,defaultImage:a,className:r,onClick:s})=>{const{ImageModal:o}=Se(),i=e||t||a;return n(Gc,{round:!!t,className:r,onClick:s||(()=>{o.show({url:i})}),children:n("img",{src:i,alt:"..."})})},Zn=H(Fs)(({theme:e})=>({"& .MuiBadge-badge":{right:-3,top:5,fontSize:"8pt",border:`2px solid ${e.palette.background.paper}`,padding:"0"}})),qe=e=>{const{tooltip:t,customIcon:a,children:r,badgeContent:s,badgeColor:o,...i}=e,{t:c}=w(),l=a?n(ye,{...i,children:n(Zn,{badgeContent:s,color:o,invisible:!s,children:n(ga,{children:r})})}):n(ye,{...i,children:n(Zn,{badgeContent:s,color:o,invisible:!s,children:r})});return t?n(Fe,{placement:"bottom-start",title:c(t),children:l}):l},Xn=({handleFileInputChange:e})=>{const t=tt.useRef(null);return g(ue,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[n("input",{accept:"image/*",style:{display:"none"},id:"raised-button-file",name:"uploaded_file",multiple:!0,type:"file",ref:t,onChange:e}),n(E,{sx:{textAlign:"center",width:"100%"},className:"pr-8",children:n(qe,{onClick:()=>{t.current&&t.current.click()},tooltip:se.EDIT,children:n(Hs,{})})})]})},Yc=e=>{const{field:t,value:a}=e,{name:r}=t,{onChange:s}=kt(),{translate:o}=w(),[i,c]=u.useState("");u.useEffect(()=>{if(a){const p=a==null?void 0:a.url;c(p||"")}},[a]);const l=p=>{const f=new FileReader,b=p[0];f.onloadend=()=>{c(f.result)},f.readAsDataURL(b),s(r.toString(),b)},d=p=>{p.preventDefault(),p.target.files&&p.target.files.length>0&&l(p.target.files)};return n("div",{children:i?g(O,{children:[n(Kt,{defaultImage:i,onClick:()=>{var p;ve.isEmpty(i)||(p=t.onClick)==null||p.call(t,i)}}),n(Xn,{handleFileInputChange:d})]}):g(E,{sx:{border:"dashed 2px #aaa",borderRadius:5,cursor:"pointer",padding:"1em",textAlign:"center"},onDragOver:p=>{p.preventDefault()},onDrop:p=>{p.preventDefault(),p.dataTransfer.files&&p.dataTransfer.files.length>0&&l(p.dataTransfer.files)},children:[n("p",{children:o("Drag and drop an image here or click to select a file")}),n(Xn,{handleFileInputChange:d})]})})},Kc=({field:e,id:t})=>{const a=fa({name:e.name.toString()});return e.type===q.tags?n(jc,{id:t,field:e,value:a}):e.type===q.imageUpload?n(Yc,{field:e,value:a}):e.type===q.textarea?n(qc,{name:e.name.toString(),id:t,placeholder:e.placeholder,label:e.label,value:a,maxRows:e.maxRows,minRows:e.minRows,rows:e.rows,disabled:e.disabled,required:e.required}):e.type===q.date?n(Oc,{name:e.name.toString(),disabled:e.disabled,required:e.required,label:e.label}):e.type===q.switch?n(zc,{name:e.name.toString(),disabled:e.disabled,label:e.label,disabledLabel:e.disabledLabel}):e.type===q.radio?n(Fc,{field:e}):n(O,{children:n(Hc,{name:e.name.toString(),id:t,placeholder:e.placeholder,label:e.label,type:e.type,value:a,rows:e.rows,disabled:e.disabled,required:e.required,maxValue:e.maxValue,minValue:e.minValue})})},Qc=({field:e,id:t})=>{var i,c;const a=e.xs?e.xs:12,r=e.sm?e.sm:a,s=e.md?e.md:r,o=e.lg?e.lg:s;return g(O,{children:[n(jt,{offset:(i=e.offset)==null?void 0:i.offsetBeforeElement}),n(k,{item:!0,xs:a,sm:r,md:s,lg:o,children:n(ln,{required:e.required,style:{width:"100%"},children:n(Kc,{id:t,field:e})})}),n(jt,{offset:(c=e.offset)==null?void 0:c.offsetAfterElement})]})},hr=({fields:e,formId:t})=>n(O,{children:e&&e.map(a=>{const r=`${t}|${String(a.name)}`;return n(Qc,{id:r,field:a},r)})}),pr=({fields:e,formId:t,hasInitial:a,groups:r,groupGap:s})=>n(k,{container:!0,gap:s,children:r.map(o=>{var v,C,x;const{xs:i,sm:c,lg:l,md:d,gap:m,id:h,padding:p,sx:f,...b}=o,y=(e==null?void 0:e.filter(P=>P.group===h||P.group===void 0&&h===0))||[];return g(u.Fragment,{children:[n(jt,{offset:(v=o.offset)==null?void 0:v.offsetBeforeElement}),u.createElement(k,{item:!0,xs:i,sm:c,lg:l,md:d,gap:m,...b,key:h,sx:P=>{var z;return{p:2,...p,...(z=o.sx)==null?void 0:z.call(o,P)}}},((C=o==null?void 0:o.groups)==null?void 0:C.length)&&n(pr,{formId:t,groups:o.groups,fields:e,hasInitial:a,groupGap:o.gap}),y.length>0&&n(k,{container:!0,spacing:2,children:n(hr,{formId:t,hasInitial:a,fields:y})})),n(jt,{offset:(x=o.offset)==null?void 0:x.offsetAfterElement})]},o.id)})}),He=H(ee,{shouldForwardProp:()=>!0})(()=>({boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px"})),gr=({onCancelClick:e,visible:t=!1,submitCaption:a})=>{const{translate:r}=w();return n(ue,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:t&&g(O,{children:[n(He,{color:"secondary",onClick:e,children:r(M.cancel)}),n(He,{type:"submit",children:a||r(j.save)})]})})},Jc=({fields:e,groups:t,groupGap:a,hasInitial:r,initialValues:s,formId:o,submitCaption:i,children:c,values:l,onDiscard:d,error:m,keepValuesOnSubmit:h=!0})=>{const{reset:p}=vn(),{isDirty:f,isSubmitSuccessful:b}=ba();u.useEffect(()=>{b&&p({},{keepValues:h})},[b,p]);const y=()=>{d(),p(s)};return g(E,{className:"position-relative",children:[n(k,{container:!0,spacing:2,className:"mb-3",children:n(Lc,{values:l,initialValues:s,children:g(O,{children:[c,t!=null&&t.length?n(pr,{groupGap:a,formId:o,groups:t,hasInitial:r,fields:e}):n(hr,{formId:o,hasInitial:r,fields:e})]})})}),n(gr,{visible:!!(f||m),onCancelClick:y,submitCaption:i})]})},fr=u.createContext(dn),br=()=>u.useContext(fr),Le=({fields:e,groups:t,groupGap:a,hasInitial:r,initialValues:s,formId:o,submitCaption:i,onSubmit:c,children:l,keepValuesOnSubmit:d,resolver:m})=>{const[h,p]=u.useState({}),[f,b]=u.useState(),[y,v]=u.useState(void 0),C=br();u.useEffect(()=>{if(s){const J=ve.mapValues(s,(G,re)=>{var F;const $=e==null?void 0:e.find(Y=>Y.name===re);return $!=null&&$.valueToOption?(F=$==null?void 0:$.valueToOption)==null?void 0:F.call($,G):G});Object.keys(h).length||p(J||{}),v(J)}},[s,e]);const x=J=>{b(J)},P=J=>{var re;const G=Object.entries(J).reduce(($,[F,Y])=>{const Z=e==null?void 0:e.find(A=>A.name===F);if(Z!=null&&Z.optionToValue){const A=ve.isArray(Y)?Y.map(K=>{var D;return(D=Z==null?void 0:Z.optionToValue)==null?void 0:D.call(Z,K)}):Z.optionToValue(Y);return{...$,[F]:A}}return{...$,[F]:Y}},J);f&&b(void 0),(re=c==null?void 0:c(G,x))==null||re.then($=>{$&&!$.error&&v(J)})},z=()=>{b(void 0),p(y||{})};return!y&&r?null:n("div",{children:n(ya.DateFnsProvider,{adapterLocale:C,children:n(va,{defaultValues:y,onSuccess:P,resolver:m,children:n(Jc,{fields:e,groups:t,groupGap:a,values:h,formId:o,hasInitial:r,keepValuesOnSubmit:d,initialValues:y,submitCaption:i,onDiscard:z,error:f,children:l})})})})},Zc=()=>{const e=[{id:1,md:6,xs:12},{id:2,md:6,xs:12}];return{fields:[{image:!0,size:N.xs,name:"logo",label:"Logo",type:q.imageUpload,xs:12,md:12,group:1},{image:!1,size:N.xs,name:"name",label:"name",xs:12,required:!0,group:2},{disabled:!1,type:q.number,image:!1,size:N.xs,name:"price",label:"price",required:!0,xs:12,group:2}],groups:e}},Xc=({onSubmit:e})=>{const{fields:t,groups:a}=Zc();return n(Le,{...{fields:t,formId:"create-donut",groups:a,groupGap:0},onSubmit:o=>{e(o)}})},el=({onSubmit:e})=>n(E,{sx:{m:3,minHeight:"220px"},children:n(Xc,{onSubmit:e})}),I=()=>{},tl=({close:e=I})=>{const{postDonut:t}=Mc();return n(el,{onSubmit:r=>t(r,{onSuccess:e})})},Dn=e=>{const{authTenant:t}=Ne(),{data:a,error:r,isLoading:s}=Fi({id:(e==null?void 0:e.toString())||"",tenant:t||void 0});return{employee:Za(a),isLoading:s,error:r}},Ze=e=>{const t=Ae(),{ViewEmployee:a}=Se(),{t:r}=w();return{showEmployee:d=>{(d||e)&&t(pe(`/e/${d||(e==null?void 0:e.id)}`))},showEmployeeModal:(d,m)=>{d&&a.show({id:d,title:m||r(W.profile,{capitalize:!0})||Q.EMPTY_STRING})},toEmployeeList:()=>{t(pe(T[S.Employees]))},toDistribBalanceHistory:()=>{var m;const d=(m=e==null?void 0:e.distrib_account)==null?void 0:m.id;d?t(pe(T[S.AccountOperations].replace(":id",d.toString()))):console.warn("Account id was not found in employee",e)},toSelfBalanceHistory:()=>{var m;const d=(m=e==null?void 0:e.self_account)==null?void 0:m.id;d?t(pe(T[S.AccountOperations].replace(":id",d.toString()))):console.warn("Account id was not found in employee",e)}}},_=e=>n(ue,{...e}),nl="/assets/default_profile-1f029c84.png",al="/assets/bonuts_sm-7fe392ac.png",Nn=nl,$t=al,Ge=H(ee,{shouldForwardProp:()=>!0})(()=>({borderRadius:"30px",fontSize:10})),Mt=e=>n(wa,{...e}),yr=({title:e,onClick:t=I})=>n(Mt,{color:"info",title:e,label:e,sx:{maxWidth:150},onClick:t}),cn=3,rl=({employee:e,onGoToEmployeeClick:t,isLoading:a,className:r})=>{var c,l,d,m;const{t:s}=w(),o=fe(),i=oe(o.breakpoints.down("sm"));return n(_,{flexDirection:"row",className:r,children:a?n(pa,{color:"inherit"}):g(O,{children:[n(Kt,{defaultImage:((c=e==null?void 0:e.user_avatar)==null?void 0:c.url)||Nn}),n(_,{flexDirection:"column",justifyContent:"space-between",sx:{width:"100%"},children:g(_,{flexDirection:"column",gap:2,children:[n(R,{variant:"h4",children:e==null?void 0:e.name}),g(_,{flexDirection:"row",alignItems:"baseline",children:[n(R,{children:e==null?void 0:e.position}),g(Ge,{variant:"outlined",onClick:t,className:"ml-2",children:[s(Re.more),"..."]})]}),g(_,{direction:"row",justifyContent:"center",alignItems:{sm:"center",xs:"center"},flexWrap:"wrap",spacing:1,gap:1,className:"ml-2 mt-2",children:[(l=e==null?void 0:e.circles)==null?void 0:l.filter((h,p)=>p<cn||!i).map(h=>n(yr,{title:h.name})),i&&((d=e==null?void 0:e.circles)==null?void 0:d.length)&&((m=e==null?void 0:e.circles)==null?void 0:m.length)>cn&&n(Fe,{title:e.circles.filter((h,p)=>p>=cn).map(h=>h.name).join(", "),children:n(js,{className:"pointer",onClick:t})})]})]})})]})})},sl=H(rl,{})(()=>({padding:"2px"})),ol=({id:e,close:t=I,setModalLoading:a=I})=>{const{isLoading:r,employee:s}=Dn(e),{showEmployee:o}=Ze(s);return u.useEffect(()=>{a(r)},[r]),n(sl,{employee:s,onGoToEmployeeClick:()=>{s!=null&&s.id&&(o(s==null?void 0:s.id),t())},isLoading:r})},Rn=ie.enhanceEndpoints({addTagTypes:["Circles"],endpoints:{postCircles:{invalidatesTags:$a("Circles")},getCircles:{providesTags:Sn("Circles")},getCirclesById:{providesTags:Oe("Circles")},patchCirclesById:{invalidatesTags:Oe("Circles")},deleteCirclesById:{invalidatesTags:["Circles"]}}}),{useGetCirclesByIdQuery:il}=Rn,Mn=()=>me(Te),cl=()=>{const{usePostCirclesMutation:e}=Rn,[t]=e(),a=Mn(),{showNotification:r}=De();return{createCircle:(o,i)=>{const{name:c}=o;if(a&&c)t({body:{tenant:a,name:c.toString()}}).unwrap().then(l=>{var d;(d=i==null?void 0:i.onSuccess)==null||d.call(i,l),r(M.created)});else throw new Error("empty tenant or name")}}},ll=()=>({fields:[{image:!1,size:N.xs,name:"name",label:"name",required:!0,type:q.text}]}),vr=({onSubmit:e,hasInitial:t=!1,circle:a})=>{const{fields:r}=ll();return n(Le,{...{fields:r,formId:"create-circle",groupGap:0},onSubmit:i=>{e(i)},initialValues:a,hasInitial:t})},dl=({onSubmit:e})=>n(E,{sx:{m:3,minHeight:"80px",minWidth:"300px"},children:n(vr,{onSubmit:e})}),ul=({close:e=I})=>{const{createCircle:t}=cl();return n(dl,{onSubmit:r=>t(r,{onSuccess:e})})};var wr=(e=>(e.yes="yes",e))(wr||{});const ml=({text:e,onSubmit:t,close:a=I})=>{const{t:r}=w(),s=()=>{t(),a()};return n(E,{sx:{m:1},children:g(_,{children:[n("div",{className:"flex-grow pl-2",children:e}),g(_,{alignItems:"center",justifyContent:"center",flexDirection:"row",gap:4,className:"mt-2",children:[n(He,{color:"error",onClick:()=>a(),children:r(M.cancel)}),n(He,{color:"success",onClick:s,children:r(wr.yes)})]})]})})},hl=({onSubmit:e,circle:t})=>n(E,{sx:{m:3,minHeight:"80px",minWidth:"300px"},children:n(vr,{onSubmit:e,circle:t,hasInitial:!0})}),Cr=()=>{const[e]=Mi(),[t]=Li(),{profile:a}=Ne();return{patchCircle:async(o,i,c)=>{var d;const{name:l}=i;if(a!=null&&a.tenant&&l){const m=await e({id:o.toString(),body:{name:l,tenant:a==null?void 0:a.tenant}});return Object.getOwnPropertyDescriptor(m,"data")&&((d=c==null?void 0:c.onSuccess)==null||d.call(c,m.data)),m}},deleteCircle:async(o,i)=>{var c;if(a!=null&&a.tenant&&o){const l=await t({id:o.toString(),tenant:a==null?void 0:a.tenant});return Object.getOwnPropertyDescriptor(l,"data")&&((c=i==null?void 0:i.onSuccess)==null||c.call(i,l.data)),l}}}},pl=e=>{const{data:t}=e;return t?t.map(a=>{const{attributes:r,id:s}=a;return{...r,id:Number(s)}}):[]},gl=e=>{if(!e)return;const{data:t}=e;if(!t)return;const{attributes:a,id:r}=t;return{...a,id:Number(r)}},fl=e=>{const t=me(Te),{data:a,error:r,isLoading:s,refetch:o}=il({id:e,tenant:t||void 0},{skip:!e});return{circle:gl(a),isLoading:s,error:r,refetch:o}},bl=({close:e=I,circleId:t})=>{const{circle:a}=fl(t),{patchCircle:r}=Cr();return n(hl,{onSubmit:o=>r(t,o,{onSuccess:e}),circle:a})},yl="transferDonuts",Ln=()=>{const[e]=Ni(),[t]=Ri(),a=Mn(),{profile:r,invalidateDistribBalance:s}=Ne(),{showNotification:o}=De(),{openLoader:i,closeLoader:c}=X(yl,!1);return{transferMyDonuts:(m,h)=>{const{amount:p,comment:f,ids:b}=m;a&&(i(),e({body:{tenant:a,amount:p,from_profile_id:r==null?void 0:r.id,comment:f,burn_old:!1,to_self_account:!0,to_profile_ids:b||[],share_for_all:!1}}).unwrap().then(y=>{var v;(v=h==null?void 0:h.onSuccess)==null||v.call(h,y),s(),o(ae.transferred)}).catch(y=>{var v;return(v=h==null?void 0:h.onError)==null?void 0:v.call(h,y.data.message)}).finally(()=>{c()}))},adminDeposit:(m,h)=>{const{amount:p,comment:f=Q.EMPTY_STRING,ids:b,toSelfAccount:y}=m;a&&(i(),t({body:{tenant:a,amount:p,comment:f,to_profile_ids:b||[],account_type:y?"self":"distrib"}}).unwrap().then(v=>{var C;(C=h==null?void 0:h.onSuccess)==null||C.call(h,v),o(ae.transferred)}).finally(()=>{c()}))}}},vl=()=>({fields:[{image:!1,size:N.xs,type:q.number,name:"amount",label:"amount",xs:12,required:!0},{disabled:!1,image:!1,size:N.xs,name:"comment",label:"comment",xs:12},{image:!1,size:N.md,name:"toSelfAccount",label:"user can spend in store",disabledLabel:"to can transfer to others",placeholder:"type",type:q.switch,xs:12}]}),wl=({profileIds:e,onSuccess:t})=>{const{adminDeposit:a}=Ln(),{fields:r}=vl();return n(Le,{formId:"admin-deposit",onSubmit:o=>{const{amount:i,toSelfAccount:c,comment:l}=o;a({amount:i,toSelfAccount:c,comment:l,ids:e},{onSuccess:t})},fields:r})},Cl=({close:e=I,id:t})=>n(E,{sx:{m:3,minHeight:"250px"},children:n(wl,{profileIds:[t],onSuccess:e})}),Sl=e=>{const{translate:t}=w();return{formSchema:it().shape({amount:e?un().transform((r,s)=>s===""?void 0:r).required(t("Required")).nullable().min(1,`${t(Re.min_amount_is,{capitalize:!0})} 1`).max(e,`${t(Re.max_amount_is,{capitalize:!0})} ${e}`):un().min(1),comment:be().required(t("Required"))})}},_l=e=>{const{maxAmount:t}=e,{formSchema:a}=Sl(t),r=ct(a);return{fields:[{image:!1,size:N.xs,type:q.number,name:"amount",label:"amount",maxValue:t,minValue:1,xs:12,required:!0},{disabled:!1,image:!1,size:N.xs,name:"comment",label:"comment",placeholder:"comment",type:q.textarea,required:!0,xs:12}],resolver:r}},xl=e=>{if(!e)return;const{data:t}=e;if(!t)return;const{attributes:a,id:r}=t;return{...a,id:Number(r)}},vt=e=>{const t=me(Te),{data:a,error:r,isLoading:s,refetch:o}=kc({id:e,tenant:t},{skip:!e||!t});return{account:xl(a),isLoading:s,error:r,refetch:o}},kl=({id:e,onSuccess:t})=>{var d,m;const{auth:a}=je(),{account:r}=vt((m=(d=a.profile)==null?void 0:d.distrib_account)==null?void 0:m.id),{transferMyDonuts:s}=Ln(),{t:o}=w(),{fields:i,resolver:c}=_l({maxAmount:r==null?void 0:r.balance});return n(Le,{formId:"transfer-donuts",onSubmit:(h,p)=>{const{amount:f,comment:b}=h;s({amount:f,comment:b,ids:[e]},{onSuccess:t,onError:p})},fields:i,resolver:c,submitCaption:o(ae.transfer_donuts)})},Tl=({close:e=I,id:t})=>{const a=fe(),r=oe(a.breakpoints.down("sm"));return n(E,{sx:{m:3,minHeight:"400px",minWidth:r?void 0:"450px"},children:n(kl,{id:t,onSuccess:e})})},le={cardPrivate:"card-private",cardContent:"card-content",liked:"liked",cardActions:"card-actions",cardDateCaption:"card-date-caption",expand:"expand",expandOpened:"expand-opened",iconCaption:"icon-caption"};function El(e,t,a){return ie.util.updateQueryData(e,t,r=>{var i;const s=(i=a==null?void 0:a.data)==null?void 0:i.data,o=Array.isArray(s)?s:[s];Array.isArray(o)&&o.forEach(c=>{if(r.data){const l=r.data.find(d=>d.id===c.id);l&&Object.assign(l,c)}})})}const at=lt.enhanceEndpoints({addTagTypes:["Event"],endpoints:{getEvents(e){e.providesTags=["Event"],e.transformResponse=(t,a)=>(t.paginator=er(a),t)},putEventsById:{async onQueryStarted(e,{dispatch:t,queryFulfilled:a,getState:r}){const s=await a;at.util.selectInvalidatedBy(r(),["Event"]).forEach(i=>{const{endpointName:c,originalArgs:l}=i;c==="getEvents"&&t(El(c,l,s))})}},getEventsById:{providesTags:Oe("Event")}}}),{useGetEventsByIdQuery:Pl}=at,Sr=()=>{const[e]=Bi(),[t]=Oi(),a=Ae(),r=me(Te);return{toggleLike:async c=>{r&&(await e({id:c.id.toString(),body:{like:!0,tenant:r}}),a(at.util.invalidateTags(ft("Event",c.id))))},updateEvent:async(c,l)=>{if(r){if("error"in await e({id:c.id.toString(),body:{...l,like:!1,tenant:r}}))throw Error();a(at.util.invalidateTags(ft("Event",c.id)))}},createComment:async(c,l)=>{if(r){if("error"in await t({id:c.id.toString(),body:{text:l,tenant:r}}))throw Error();a(at.util.invalidateTags(ft("Event",c.id)))}}}},Al=e=>{if(e){e.focus();const t=e.value;e.value="",e.value=t}},ge=e=>n($s,{...e}),_r=e=>n(Ws,{...e}),xr=e=>n(Us,{...e}),Il=e=>{const{DetailedEvent:t}=Se();return{showDetailedPost:()=>{t.show({post:e})}}},wt=(e,t,a,r,s,o)=>{if(!e)return Q.EMPTY_STRING;try{const i=new Date(e),c=r?{locale:r}:{locale:Vs};let l=t?"dd MMMM":"dd.MM.yyyy";if((a||s)&&(l=s?"HH:mm":`${l} HH:mm`),s&&o){const d=new Date;return d.setHours(i.getUTCHours()),d.setMinutes(i.getUTCMinutes()),Gs(d,l)}return Ca(i,l,c)}catch{return Q.EMPTY_STRING}},Dl=H(Sa,{})(({theme:e})=>({backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.default),position:"relative",paddingBottom:"15px",marginBottom:"5px","&::after":{content:'""',position:"absolute",bottom:"0",height:"1px",right:"15px",width:"calc(100% - 30px)",backgroundColor:e.palette.neutral.main}})),xe={operationText:"operation-text",amountText:"amount-text",plusText:"plus-text",minusText:"minus-text",expand:"expand",expandOpened:"expand-opened",iconCaption:"icon-caption",operationContainer:"operation-container"},Nl=()=>Intl.DateTimeFormat().resolvedOptions().timeZone,kr=()=>{const e=br();return{formatDate:a=>a?Ys(Ks(a,Nl()),"Pp",{locale:e}):""}},Ct=({profile:e,onClick:t})=>{var a,r;return n(He,{onClick:t,disableRipple:!0,startIcon:n(Ue,{src:((r=(a=e.user_avatar)==null?void 0:a.thumb)==null?void 0:r.url)||void 0,alt:`${e.name} ${e.name}`}),children:n(Me,{variant:"body2",children:e.name&&n("span",{children:e.name})})})};var Xe=(e=>(e.RefundRequest="refund_request",e.Buy="buy",e.Share="share",e.Transfer="transfer",e.Purchase="purchase",e.Refund="refund",e))(Xe||{});const Rl=({operation:e,onToProfileClick:t=nt,onFromProfileClick:a=nt,onPurchaseClick:r=nt,className:s,showDateTime:o})=>{const{to_profile:i,direction:c,deal_type:l,from_profile:d,created_at:m,created_at_utc:h}=e,{translate:p}=w(),{formatDate:f}=kr(),b=V({[xe.operationText]:!0,[xe.amountText]:!0,[xe.plusText]:e&&c&&c>0,[xe.minusText]:e&&c&&c<0}),y=()=>{t(e)},v=()=>{a(e)},C=()=>{r(e)};return n("div",{className:s,children:e!=null&&g(k,{container:!0,className:xe.operationContainer,children:[g("span",{className:b,children:[e.direction===1?"+":"",e.amount," "]}),i&&g(O,{children:[n("span",{className:xe.operationText,children:n(Me,{variant:"body2",children:p("for")})}),n(Ct,{profile:i,onClick:y})]}),d&&g(O,{children:[n("span",{className:xe.operationText,children:p("from")}),n(Ct,{profile:d,onClick:v})]}),o&&m!==void 0&&m!==null&&n("span",{className:xe.operationText,children:n(Me,{variant:"body2",children:f(h)})}),(e.deal_type===Xe.Buy||e.deal_type===Xe.RefundRequest)&&n(ee,{onClick:C,children:p(l===Xe.RefundRequest?Xe.Refund:Xe.Purchase)})]})})},Tr=H(Rl,{})(({theme:e})=>({[L(xe.operationText)]:{display:"inline-flex",margin:"auto 2px",padding:2,whiteSpace:"pre-wrap",wordBreak:"break-word"},[L(xe.amountText)]:{fontSize:20,fontWeight:"bold"},[L(xe.plusText)]:{color:e.palette.primary.light},[L(xe.minusText)]:{color:e.palette.error.light},[L(xe.operationContainer)]:{padding:0,margin:0}})),Ml=({post:e,className:t,preventNewModal:a})=>{var K;const{profile:r,public:s,title:o,content:i,commentable:c,likeable:l,comments_count:d,likes:m,liked:h,editable:p,date_string_utc:f}=e,{user_name:b,user_avatar:y,position:v}=r,{t:C}=yn(),x=u.useRef(null),[P,z]=u.useState(!1),{toggleLike:J,updateEvent:G}=Sr(),{showEmployeeModal:re}=Ze(),{showDetailedPost:$}=Il(e),F=D=>{G(e,{content:D.target.content.value}),z(!1),D.preventDefault()},Y=()=>J(e),Z=a?I:$,A=D=>{D.preventDefault(),z(()=>!P)};return u.useEffect(()=>{if(P&&(x!=null&&x.current)){const D=setTimeout(()=>{Al(x.current)},100);return()=>{clearTimeout(D)}}},[P]),g(ge,{className:t,children:[n(Dl,{avatar:g(O,{children:[s&&n(Ue,{src:((K=y==null?void 0:y.thumb)==null?void 0:K.url)||void 0,alt:b||void 0}),!s&&n(Ue,{children:n(_a,{})})]}),action:n(Fe,{title:C(s?se.ONLY_YOU_CAN_SEE_IT:se.PROFILE),children:n(ye,{"aria-label":C(s?se.PROFILE:se.ONLY_YOU_CAN_SEE_IT)||se.PROFILE,children:!s&&n(Qs,{})})}),title:s?o:"Сервис бот",subheader:s&&v}),g(_r,{className:le.cardContent,children:[e.operation&&n(Tr,{operation:e.operation,onFromProfileClick:()=>{var D,he;return re((he=(D=e.operation)==null?void 0:D.from_profile)==null?void 0:he.id)},onToProfileClick:()=>{var D,he;return re((he=(D=e.operation)==null?void 0:D.to_profile)==null?void 0:he.id)}}),!P&&n(R,{variant:"body2",isPreformatted:!0,children:i}),P&&g(E,{component:"form",onSubmit:F,sx:{"& .MuiTextField-root":{m:1,width:"90%"}},noValidate:!0,autoComplete:"off",children:[n(we,{autoFocus:!0,margin:"dense",id:"content_value",name:"content",defaultValue:i,fullWidth:!0,multiline:!0,inputRef:x}),n(ee,{type:"submit",color:"primary",children:C("Submit")})]})]}),g(xr,{disableSpacing:!0,className:le.cardActions,children:[l&&g(O,{children:[n(ye,{"aria-label":"Add to favorites",onClick:Y,className:V({[le.liked]:h}),children:n(Js,{})}),n(E,{className:V(le.iconCaption,{[le.liked]:h}),children:m.length>0&&m.length})]}),c&&g(O,{children:[n(ye,{"aria-label":"Comment",onClick:Z,children:n(Zs,{})}),n(E,{className:V(le.iconCaption),children:d!==void 0&&d!==0&&d})]}),p&&n(ye,{onClick:A,"aria-label":"edit",children:n(Xs,{})}),n(Me,{variant:"caption",component:"div",className:le.cardDateCaption,children:wt(f,!1,!0)})]})]})},Ll="16px",Er=H(Ml,{})(({theme:e,bodyMaxHeight:t=300,maxWidth:a=700})=>({width:"100%",backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.default),maxWidth:a,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),[L(le.cardContent)]:{maxHeight:t,overflow:"auto"},[L(le.cardPrivate)]:{backgroundColor:e.palette.info.light},[L(le.liked)]:{color:e.palette.info.light},[L(le.iconCaption)]:{width:"10px",paddingTop:"4px",fontSize:Ll,color:e.palette.grey.A700},[L(le.cardActions)]:{display:"flex",marginRight:"5px"},[L(le.cardDateCaption)]:{marginLeft:"auto"},[L(le.expand)]:{transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},[L(le.expandOpened)]:{transform:"rotate(180deg)"}})),Pr=e=>{const{data:t}=e;return t?t.map(a=>{const{attributes:r,id:s}=a;return{...r,id:Number(s),commentable:!0,likeable:!0}}):[]},Ar=e=>{if(!e||!e.data)return null;const{attributes:t,id:a}=e.data;return{...t,logo:t.logo,id:Number(a),commentable:!0,likeable:!0}},ql=e=>{const{data:t}=e;return t?t.map(a=>{const{attributes:r,id:s}=a;return{...r,enabled:!!(r!=null&&r.enabled),profile:xn({attributes:r==null?void 0:r.profile,id:r==null?void 0:r.profile.id.toString()}),id:Number(s)}}):[]},Bl=e=>{const{data:t}=e||{};return t?t.map(a=>{const{attributes:r,id:s}=a;return{...r,created_at_utc:(r==null?void 0:r.created_at_utc)||r.created_at,id:Number(s)}}):[]},Ir=e=>{const{attributes:t,id:a}=e;return{...t,caption:t.caption||void 0,id:Number(a)}},Dr=e=>{if(!e)return;const{data:t}=e;if(t)return Ir(t)},qn=e=>{if(!e)return[];const{data:t}=e;return(t==null?void 0:t.filter(a=>a).map(a=>Ir(a)))||[]},Nr=e=>{const{data:t}=e;return t?t.map(a=>{const{attributes:r,id:s}=a;return{...r,id:Number(s)}}):[]},Rr=e=>{var r;const{attributes:t,id:a}=e||{};return{...t,id:Number(a),name:(t==null?void 0:t.name)||void 0,comment:(t==null?void 0:t.comment)||void 0,day:(t==null?void 0:t.day)||void 0,weekday:(t==null?void 0:t.weekday)||void 0,every:(t==null?void 0:t.every)||void 0,execute_time:(t==null?void 0:t.execute_time)||void 0,timezone:(t==null?void 0:t.timezone)||void 0,time_in_seconds:(t==null?void 0:t.time_in_seconds)||void 0,burn_old:(t==null?void 0:t.burn_old)||!1,profile:t!=null&&t.profile?xn({attributes:{...t==null?void 0:t.profile},id:(r=t==null?void 0:t.profile)==null?void 0:r.id.toString()}):void 0}},Mr=e=>{const{data:t}=e;return t?t.map(a=>Rr(a)):[]},Ol=e=>{if(!e)return;const{data:t}=e;if(t)return Rr(t)},Lr=e=>{var r,s,o,i,c;const{attributes:t,id:a}=e;return{...t,id:Number(a),commentable:!0,likeable:!0,profile:{id:t.profile_id,first_name:"",last_name:"",user_name:t.user_name,position:t.position,admin:!1,user_avatar:t.user_avatar},title:t.user_name,extra_content:t.extra_content||"",operation:{...t.operation,id:(r=t.operation)==null?void 0:r.id,deal_type:(s=t.operation)==null?void 0:s.deal_type,created_at:((o=t.operation)==null?void 0:o.created_at)||e.attributes.date_string,created_at_utc:((i=t.operation)==null?void 0:i.created_at_utc)||((c=t.operation)==null?void 0:c.created_at)||e.attributes.date_string}}},zl=e=>{if(e!=null&&e.data)return Lr(e.data)},Fl=e=>{if(!e)return[];const{data:t}=e;return t?t.map(a=>Lr(a)):[]},Qt=(()=>({toPosts:Fl,toPost:zl,toDonuts:Pr,toDonut:Ar,toRequests:ql,toOperations:Bl,toTenant:Dr,toTenants:qn,toInvitations:Nr,toSchedulers:Mr,toScheduler:Ol}))(),Hl=e=>{const t=me(Te),{data:a,error:r,isLoading:s}=Pl({id:(e==null?void 0:e.toString())||"",tenant:t||void 0},{skip:!e,refetchOnMountOrArgChange:!0});return{post:a?Qt.toPost(a):void 0,isLoading:s,error:r}},jl=H(Sa,{})(({theme:e})=>({backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.default),position:"relative",paddingBottom:"15px",marginBottom:"5px","&::after":{content:'""',position:"absolute",bottom:"0",height:"1px",right:"15px",width:"calc(100% - 30px)",backgroundColor:e.palette.neutral.main}})),$l=({comment:e,className:t})=>{var c,l;const{profile:a,content:r,date_string_utc:s}=e,{employee:o}=Dn(a==null?void 0:a.id),{t:i}=w();return g(ge,{className:V(t),children:[n(jl,{avatar:g(O,{children:[(a==null?void 0:a.user_avatar)&&n(Ue,{src:((l=(c=a==null?void 0:a.user_avatar)==null?void 0:c.thumb)==null?void 0:l.url)||void 0,alt:a.user_name||void 0}),!(a!=null&&a.user_avatar)&&n(Ue,{children:n(_a,{})})]}),action:n(Fe,{title:i(se.PROFILE),children:n(ye,{"aria-label":i(se.PROFILE)||se.PROFILE})}),title:o==null?void 0:o.user_name,subheader:o==null?void 0:o.position}),n(_r,{children:n(R,{variant:"body2",isPreformatted:!0,children:r})}),n(xr,{disableSpacing:!0,className:le.cardActions,children:n(_,{direction:"row",justifyContent:"flex-end",className:"width-100",children:n(Me,{variant:"caption",component:"div",className:le.cardDateCaption,children:wt(s,!1,!0)})})})]})},Wl=H($l,{})(({theme:e})=>({width:"100%",backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.default),maxWidth:700,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})})),Ul=({comments:e,className:t})=>n(_,{direction:"column",className:t,alignItems:"center",gap:1,children:e.map(a=>n(Wl,{comment:a},a.id))}),Vl=({onSubmit:e,className:t})=>{const{translate:a}=w(),{register:r,reset:s,handleSubmit:o}=St({shouldUseNativeValidation:!1});return g(E,{component:"form",className:t,onSubmit:o(async c=>{const{comment:l}=c;try{await e(l)}catch{return}s()}),noValidate:!0,sx:{mt:1},children:[n(we,{multiline:!0,minRows:4,maxRows:8,className:"width-100",placeholder:a(M.comment,{capitalize:!0}),...r("comment",{required:a(M.comment)})}),n(_,{flexDirection:"row",justifyContent:"flex-end",children:n(ee,{type:"submit",variant:"contained",sx:{minWidth:150,mt:2},children:a(j.send)})})]})},qr=({postId:e})=>{const{post:t,isLoading:a}=Hl(e),{createComment:r}=Sr(),s=fe(),o=oe(s.breakpoints.down("sm"));return X(ne.DetailedEvent,a),t?g(_,{direction:"column",className:"width-100 p-2",alignItems:"center",maxWidth:600,width:o?void 0:500,children:[n(Er,{post:t,preventNewModal:!0,bodyMaxHeight:700,maxWidth:o?void 0:600}),n(Vl,{onSubmit:i=>r(t,i),className:"width-100"}),n(Ul,{comments:t.comments,className:"width-100 m-1 mt-3"})]}):null},Gl=({post:e})=>{const t=fe(),a=oe(t.breakpoints.down("sm"));return n(E,{sx:{width:a?"100%":600,minHeight:400},children:n(qr,{postId:e.id})})},Lt={items:{SimpleTextModal:{renderItem:e=>n("div",{children:e.data})},ConfirmationModal:{renderItem:(e,t)=>n(ml,{onSubmit:e.data.onSubmit,text:e.data.text,...t}),title:e=>e.title||M.confirmation,hasTopMenu:!0},ImageModal:{renderItem:e=>n(Ic,{url:e.data.url}),title:e=>e.title||Q.EMPTY_STRING,hasTopMenu:!0},CreateDonut:{renderItem:(e,t)=>n(tl,{...t}),hasTopMenu:!0,title:e=>e.title||Q.EMPTY_STRING,preventCloseOnBackDropClick:!0},ViewEmployee:{renderItem:(e,t)=>{var a;return n(ol,{id:(a=e.data)==null?void 0:a.id,...t})},title:e=>e.title||Q.EMPTY_STRING,hasTopMenu:!0},CreateCircle:{renderItem:(e,t)=>n(ul,{...t}),hasTopMenu:!0,title:e=>e.title||Q.EMPTY_STRING,preventCloseOnBackDropClick:!0},EditCircle:{renderItem:(e,t)=>n(bl,{...t,circleId:e.data.circleId}),hasTopMenu:!0,title:e=>e.title||Q.EMPTY_STRING,preventCloseOnBackDropClick:!0},AdminDepositModal:{renderItem:(e,t)=>n(Cl,{id:e.data.id,...t}),hasTopMenu:!0,title:e=>e.title||"admin deposit",preventCloseOnBackDropClick:!0},TransferModal:{renderItem:(e,t)=>n(Tl,{id:e.data.id,...t}),hasTopMenu:!0,title:e=>e.title||"Transfer",preventCloseOnBackDropClick:!0},DetailedEvent:{renderItem:(e,t)=>n(Gl,{post:e.data.post,...t}),hasTopMenu:!0,title:e=>e.post.title,getPath:e=>`event/${e.post.id}`,isTop:!0}}},Yl=H(eo,{shouldForwardProp:e=>e!=="isLoading"&&e!=="isTop"})(({theme:e,isLoading:t,isTop:a})=>t?{background:"transparent",[L("MuiPaper-root")]:{overflow:"hidden",background:e.palette.background,borderRadius:"50%",opacity:.5}}:a?{[L("MuiDialog-scrollPaper")]:{alignItems:"start !important"}}:{}),Kl=e=>{const{handleClose:t,modal:a,preventCloseOnBackDropClick:r,isLoading:s,isTop:o,...i}=e,c=fe(),l=oe(c.breakpoints.down("sm"));return n(Yl,{...i,onClose:(m,h)=>{(h!=="backdropClick"||!r)&&t(a)},fullScreen:l&&!s&&a.allowFullscreen,isLoading:s,isTop:o})},Jt=e=>n(xa,{...e}),Ql=()=>{const e=u.useContext(mr),{t}=w(),a=u.useContext(In),[r,s]=u.useState({}),o=fe(),i=oe(o.breakpoints.down("sm")),c=(l,d)=>{s(m=>({...m,[l]:d}))};return n(O,{children:[...e].map(l=>{const d=l.title?ve.isFunction(l.title)?l.title(l):l.title:"",m=r[l.modalKey];return g(Kl,{handleClose:()=>a(l.modalKey,l.name),modal:l,open:!!l.modalKey,preventCloseOnBackDropClick:l.preventCloseOnBackDropClick,isLoading:m,isTop:l.isTop,children:[n(Ka,{loading:m}),g(E,{className:"bnt-dialog-box",sx:m?{display:"none"}:{overflowX:"hidden"},children:[l.hasTopMenu&&!i?g(O,{children:[g(_,{className:"p-3",direction:"row",justifyContent:"space-between",alignItems:"center",sx:{color:"success.dark"},children:[n(R,{variant:"h5",children:d}),n(qe,{onClick:()=>a(l.modalKey,l.name),children:n(bt,{})})]}),n(Jt,{})]}):null,l.renderItem(l,{close:()=>a(l.modalKey,l.name),setModalLoading:h=>c(l.modalKey,h)}),i&&n(_,{justifyContent:"center",children:n(Ge,{onClick:()=>a(l.modalKey,l.name),children:t(M.close)})})]})]},l.modalKey)})})},Jl=({children:e,config:t,path:a,addressPath:r,defaultModal:s,defaultModalData:o})=>{const i=to(),c=ar(),[l,d]=u.useState(null);u.useEffect(()=>{d(null)},[a]);const m=u.useCallback((f,b,y)=>{const v=y||hi(`modal-${a}-`),{title:C,getPath:x}=t.items[f],P=pi.isFunction(C)?C(b):C;if(x){let z=x(b);z=z[0]==="/"?z:`/${z}`,r!==z&&i(x(b),{state:{background:c,name:f,data:b,modal:!0}})}d(z=>{var J,G,re,$;return{...z,[v]:{name:f,data:b,modalKey:v,title:P||Q.EMPTY_STRING,renderItem:((J=t.items[f])==null?void 0:J.renderItem)||(F=>n("div",{children:F})),hasTopMenu:((G=t.items[f])==null?void 0:G.hasTopMenu)||!1,isTop:((re=t.items[f])==null?void 0:re.isTop)||!1,preventCloseOnBackDropClick:(($=t.items[f])==null?void 0:$.preventCloseOnBackDropClick)||!1}}})},[a]),h=u.useCallback((f,b)=>{const{items:y}=t;if(b){const{getPath:v}=y[b];v&&i(-1)}d(v=>v?Object.keys(v).reduce((C,x)=>(x!==f&&(C[x]=v[x]),C),{}):null)},[t,i]);u.useEffect(()=>{s&&o&&m(s,o)},[]);const p=u.useMemo(()=>l?Object.values(l):[],[l]);return n(ur.Provider,{value:m,children:n(In.Provider,{value:h,children:g(mr.Provider,{value:p,children:[e,n(Ql,{})]})})})},Zl=({children:e,addressPath:t,path:a,modalName:r,modalData:s})=>n(Jl,{path:a,addressPath:t,config:Lt,defaultModalData:s,defaultModal:r,children:e}),ea=(e,t,a,r,s)=>t.isAuthenticated&&!t.tenant&&(!e.tenantNotRequired||e.path==="/")?n(pt,{to:T[S.TenantList]}):t.isAuthenticated&&e.authenticatedRedirect?n(pt,{to:e.authenticatedRedirect}):t.isAuthenticated&&!e.authenticated?n(pt,{to:"/"}):t.isAuthenticated||e.anonymous?n(Zl,{children:e.component,path:e.path,addressPath:a,modalData:s,modalName:r}):n(pt,{to:e.redirect||T[S.Login]}),Xl=({routes:e})=>{const t=ar(),{checkAuth:a,isAuthLoading:r,auth:s,currentRoles:o}=je(),{background:i,name:c,data:l}=t.state||{};u.useEffect(()=>{a()},[]);const d=u.useMemo(()=>e.filter(p=>p.authenticated),[e,s]),m=u.useMemo(()=>e.filter(p=>!p.authenticated),[e,s]);if(r)return n("div",{children:"Checking auth..."});const h=p=>p.roles?!!ve.intersection(p.roles,o).length:!0;return g(no,{location:i||t,children:[n(rn,{path:"*",element:n(pt,{to:s.isAuthenticated?s.tenant?"/":T[S.TenantList]:T[S.Login]})}),d&&d.filter(p=>p.tenantNotRequired||s.tenant).map(p=>{const f=s.isAuthenticated&&!r&&!h(p)?n(Ec,{}):ea(p,s,t.pathname,c,l);return n(rn,{path:p.path,element:f},p.path)}),m&&m.map(p=>n(rn,{path:p.path,element:ea(p,s,t.pathname)},p.path))]})},Zt=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"60 10 110 80",...e},u.createElement("g",{id:"layer101",fill:"#474f55",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"M 242,556 C 139,522 77,433 76,320 75,54 429,-23 539,220 c 70,153 -35,332 -203,346 -28,2 -70,-2 -94,-10 z M 348,364 c 41,-29 19,-94 -33,-94 -21,0 -55,32 -55,51 0,13 42,59 54,59 6,0 22,-7 34,-16 z",id:"path2"})),u.createElement("g",{id:"layer102",fill:"#8b7849",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"m 219,507 c -29,-16 -54,-40 -74,-72 -26,-42 -30,-58 -30,-121 0,-64 3,-77 30,-115 113,-160 349,-99 381,98 13,82 -46,187 -123,220 -51,21 -133,17 -184,-10 z M 374,388 c 40,-35 43,-78 11,-116 -22,-26 -34,-32 -66,-32 -80,0 -115,77 -63,139 32,39 80,42 118,9 z",id:"path5"})),u.createElement("g",{id:"layer103",fill:"#45b980",stroke:"none",style:{fill:"#226e13",fillOpacity:1},transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"M 219,507 C 136,463 90,346 120,255 157,143 290,81 398,125 c 168,71 168,319 0,390 -55,22 -127,19 -179,-8 z M 373,390 c 50,-39 42,-117 -15,-146 -60,-31 -128,13 -128,83 0,71 85,109 143,63 z",id:"path8",style:{fill:"#226e13",fillOpacity:1}})),u.createElement("g",{id:"layer104",fill:"#b2b24f",stroke:"none",style:{fill:"#e5b54f",fillOpacity:1},transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"m 418,489 c 37,-37 72,-98 72,-127 0,-24 -41,-62 -67,-62 -13,0 -24,-8 -28,-20 -4,-11 -20,-27 -37,-36 -40,-21 -97,-6 -127,33 -21,26 -29,73 -12,73 5,0 16,11 25,25 12,18 -2,11 -46,-25 -34,-27 -68,-50 -75,-50 -18,0 -16,-17 6,-65 49,-105 183,-157 269,-105 42,26 89,100 97,153 3,23 11,52 17,64 20,40 -33,128 -96,160 l -31,15 z",id:"path11",style:{fill:"#e5b54f",fillOpacity:1}}),u.createElement("path",{d:"m 382,459 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path13",style:{fill:"#e5b54f",fillOpacity:1}}),u.createElement("path",{d:"m 210,430 c 0,-5 11,-10 25,-10 14,0 25,5 25,10 0,6 -11,10 -25,10 -14,0 -25,-4 -25,-10 z",id:"path15",style:{fill:"#e5b54f",fillOpacity:1}}),u.createElement("path",{d:"m 436,391 c -7,-11 22,-23 36,-15 6,4 5,10 -3,15 -18,11 -26,11 -33,0 z",id:"path17",style:{fill:"#e5b54f",fillOpacity:1}})),u.createElement("g",{id:"layer105",fill:"#f8bf37",stroke:"none",style:{fill:"#f88b12",fillOpacity:1},transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"m 448,463 c 16,-21 35,-55 42,-75 13,-44 36,-53 25,-10 -8,35 -48,93 -76,110 -17,11 -15,6 9,-25 z",id:"path20",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 382,459 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path22",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 210,430 c 0,-5 11,-10 25,-10 14,0 25,5 25,10 0,6 -11,10 -25,10 -14,0 -25,-4 -25,-10 z",id:"path24",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 436,391 c -7,-11 22,-23 36,-15 6,4 5,10 -3,15 -18,11 -26,11 -33,0 z",id:"path26",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 174,327 c -18,-15 -39,-27 -47,-27 -13,0 -13,-7 -4,-42 20,-79 112,-148 200,-148 77,0 167,100 167,185 v 36 l -26,-20 c -15,-12 -32,-21 -40,-21 -7,0 -27,-14 -44,-31 -27,-28 -36,-31 -72,-26 -59,8 -92,36 -98,82 l -5,38 z",id:"path28",style:{fill:"#f88b12",fillOpacity:1}})),u.createElement("g",{id:"layer106",fill:"#a3ddc1",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"m 382,459 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path31"}),u.createElement("path",{d:"m 210,430 c 0,-5 11,-10 25,-10 14,0 25,5 25,10 0,6 -11,10 -25,10 -14,0 -25,-4 -25,-10 z",id:"path33"}),u.createElement("path",{d:"m 436,391 c -7,-11 22,-23 36,-15 6,4 5,10 -3,15 -18,11 -26,11 -33,0 z",id:"path35"}),u.createElement("path",{d:"m 455,256 c -11,-8 -14,-15 -8,-19 6,-4 16,0 23,8 17,21 8,28 -15,11 z",id:"path37"}),u.createElement("path",{d:"m 160,250 c 0,-5 9,-10 20,-10 11,0 20,5 20,10 0,6 -9,10 -20,10 -11,0 -20,-4 -20,-10 z",id:"path39"}),u.createElement("path",{d:"m 332,179 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path41"})),u.createElement("g",{id:"layer107",fill:"#fde7b1",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"m 220,430 c 0,-5 7,-10 15,-10 8,0 15,5 15,10 0,6 -7,10 -15,10 -8,0 -15,-4 -15,-10 z",id:"path44"}),u.createElement("path",{d:"m 455,256 c -11,-8 -14,-15 -8,-19 6,-4 16,0 23,8 17,21 8,28 -15,11 z",id:"path46"}),u.createElement("path",{d:"m 160,250 c 0,-5 9,-10 20,-10 11,0 20,5 20,10 0,6 -9,10 -20,10 -11,0 -20,-4 -20,-10 z",id:"path48"}),u.createElement("path",{d:"m 332,179 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path50"})),u.createElement("g",{id:"layer108",fill:"#f6f9f1",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"m 220,430 c 0,-5 7,-10 15,-10 8,0 15,5 15,10 0,6 -7,10 -15,10 -8,0 -15,-4 -15,-10 z",id:"path53"}),u.createElement("path",{d:"m 165,250 c 3,-5 13,-10 21,-10 8,0 14,5 14,10 0,6 -9,10 -21,10 -11,0 -17,-4 -14,-10 z",id:"path55"})),u.createElement("text",{style:{fontStyle:"normal",fontWeight:"normal",fontSize:"60.1239px",lineHeight:1.25,fontFamily:"sans-serif",fill:"#333333",fillOpacity:1,stroke:"none",strokeWidth:.313145},x:24.391485,y:66.192505,id:"text4629",transform:"scale(0.94388028,1.0594564)"},u.createElement("tspan",{id:"tspan4627",style:{fontSize:"60.1239px",fill:"#333333",strokeWidth:.313145},x:24.391485,y:66.192505},"b")),u.createElement("text",{style:{fontStyle:"normal",fontWeight:"normal",fontSize:"50.8px",lineHeight:1.25,fontFamily:"sans-serif",fill:"#333333",fillOpacity:1,stroke:"none",strokeWidth:.264583},x:101.37981,y:69.966354,id:"text9151"},u.createElement("tspan",{id:"tspan9149",style:{fontSize:"50.8px",fill:"#333333",strokeWidth:.264583},x:101.37981,y:69.966354},"nuts"))),ed=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"10 0 50 49",...e},u.createElement("g",{id:"layer101",fill:"#474f55",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"M 242,556 C 139,522 77,433 76,320 75,54 429,-23 539,220 c 70,153 -35,332 -203,346 -28,2 -70,-2 -94,-10 z M 348,364 c 41,-29 19,-94 -33,-94 -21,0 -55,32 -55,51 0,13 42,59 54,59 6,0 22,-7 34,-16 z",id:"path2"})),u.createElement("g",{id:"layer102",fill:"#8b7849",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"m 219,507 c -29,-16 -54,-40 -74,-72 -26,-42 -30,-58 -30,-121 0,-64 3,-77 30,-115 113,-160 349,-99 381,98 13,82 -46,187 -123,220 -51,21 -133,17 -184,-10 z M 374,388 c 40,-35 43,-78 11,-116 -22,-26 -34,-32 -66,-32 -80,0 -115,77 -63,139 32,39 80,42 118,9 z",id:"path5"})),u.createElement("g",{id:"layer103",fill:"#45b980",stroke:"none",style:{fill:"#226e13",fillOpacity:1},transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"M 219,507 C 136,463 90,346 120,255 157,143 290,81 398,125 c 168,71 168,319 0,390 -55,22 -127,19 -179,-8 z M 373,390 c 50,-39 42,-117 -15,-146 -60,-31 -128,13 -128,83 0,71 85,109 143,63 z",id:"path8",style:{fill:"#226e13",fillOpacity:1}})),u.createElement("g",{id:"layer104",fill:"#b2b24f",stroke:"none",style:{fill:"#e5b54f",fillOpacity:1},transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"m 418,489 c 37,-37 72,-98 72,-127 0,-24 -41,-62 -67,-62 -13,0 -24,-8 -28,-20 -4,-11 -20,-27 -37,-36 -40,-21 -97,-6 -127,33 -21,26 -29,73 -12,73 5,0 16,11 25,25 12,18 -2,11 -46,-25 -34,-27 -68,-50 -75,-50 -18,0 -16,-17 6,-65 49,-105 183,-157 269,-105 42,26 89,100 97,153 3,23 11,52 17,64 20,40 -33,128 -96,160 l -31,15 z",id:"path11",style:{fill:"#e5b54f",fillOpacity:1}}),u.createElement("path",{d:"m 382,459 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path13",style:{fill:"#e5b54f",fillOpacity:1}}),u.createElement("path",{d:"m 210,430 c 0,-5 11,-10 25,-10 14,0 25,5 25,10 0,6 -11,10 -25,10 -14,0 -25,-4 -25,-10 z",id:"path15",style:{fill:"#e5b54f",fillOpacity:1}}),u.createElement("path",{d:"m 436,391 c -7,-11 22,-23 36,-15 6,4 5,10 -3,15 -18,11 -26,11 -33,0 z",id:"path17",style:{fill:"#e5b54f",fillOpacity:1}})),u.createElement("g",{id:"layer105",fill:"#f8bf37",stroke:"none",style:{fill:"#f88b12",fillOpacity:1},transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"m 448,463 c 16,-21 35,-55 42,-75 13,-44 36,-53 25,-10 -8,35 -48,93 -76,110 -17,11 -15,6 9,-25 z",id:"path20",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 382,459 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path22",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 210,430 c 0,-5 11,-10 25,-10 14,0 25,5 25,10 0,6 -11,10 -25,10 -14,0 -25,-4 -25,-10 z",id:"path24",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 436,391 c -7,-11 22,-23 36,-15 6,4 5,10 -3,15 -18,11 -26,11 -33,0 z",id:"path26",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 174,327 c -18,-15 -39,-27 -47,-27 -13,0 -13,-7 -4,-42 20,-79 112,-148 200,-148 77,0 167,100 167,185 v 36 l -26,-20 c -15,-12 -32,-21 -40,-21 -7,0 -27,-14 -44,-31 -27,-28 -36,-31 -72,-26 -59,8 -92,36 -98,82 l -5,38 z",id:"path28",style:{fill:"#f88b12",fillOpacity:1}})),u.createElement("g",{id:"layer106",fill:"#a3ddc1",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"m 382,459 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path31"}),u.createElement("path",{d:"m 210,430 c 0,-5 11,-10 25,-10 14,0 25,5 25,10 0,6 -11,10 -25,10 -14,0 -25,-4 -25,-10 z",id:"path33"}),u.createElement("path",{d:"m 436,391 c -7,-11 22,-23 36,-15 6,4 5,10 -3,15 -18,11 -26,11 -33,0 z",id:"path35"}),u.createElement("path",{d:"m 455,256 c -11,-8 -14,-15 -8,-19 6,-4 16,0 23,8 17,21 8,28 -15,11 z",id:"path37"}),u.createElement("path",{d:"m 160,250 c 0,-5 9,-10 20,-10 11,0 20,5 20,10 0,6 -9,10 -20,10 -11,0 -20,-4 -20,-10 z",id:"path39"}),u.createElement("path",{d:"m 332,179 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path41"})),u.createElement("g",{id:"layer107",fill:"#fde7b1",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"m 220,430 c 0,-5 7,-10 15,-10 8,0 15,5 15,10 0,6 -7,10 -15,10 -8,0 -15,-4 -15,-10 z",id:"path44"}),u.createElement("path",{d:"m 455,256 c -11,-8 -14,-15 -8,-19 6,-4 16,0 23,8 17,21 8,28 -15,11 z",id:"path46"}),u.createElement("path",{d:"m 160,250 c 0,-5 9,-10 20,-10 11,0 20,5 20,10 0,6 -9,10 -20,10 -11,0 -20,-4 -20,-10 z",id:"path48"}),u.createElement("path",{d:"m 332,179 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path50"})),u.createElement("g",{id:"layer108",fill:"#f6f9f1",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"m 220,430 c 0,-5 7,-10 15,-10 8,0 15,5 15,10 0,6 -7,10 -15,10 -8,0 -15,-4 -15,-10 z",id:"path53"}),u.createElement("path",{d:"m 165,250 c 3,-5 13,-10 21,-10 8,0 14,5 14,10 0,6 -9,10 -21,10 -11,0 -17,-4 -14,-10 z",id:"path55"}))),td=()=>{const{menuRoutes:e}=u.useContext(Ve),{currentRoles:t,auth:a}=je();return{menuRoutes:u.useMemo(()=>e.filter(s=>s.tenantNotRequired||a.tenant).filter(s=>{var o;return!((o=s.roles)!=null&&o.length)||ve.intersection(s.roles,t).length}),[e,t])}},nd=({route:e,showFullName:t,showTooltip:a,onBeforeClick:r=()=>({redirect:!0})})=>{const s=Ae(),{translate:o}=w(),i=()=>{const{redirect:c}=r();c&&s(pe(e.path))};return n(Fe,{placement:"right",title:o(e.navbarName),disableHoverListener:!a,children:g(ka,{sx:{minHeight:24,justifyContent:t?"initial":"center",px:2.5,pt:.5,pb:.5},onClick:i,children:[n(Ta,{sx:{minWidth:0,mr:t?3:"auto",justifyContent:"center"},children:e.icon}),n(ao,{primary:o(e.navbarName),sx:{opacity:t?1:0}})]})})},Br=({showFullName:e,showTooltip:t})=>{const{menuRoutes:a}=td();return n(O,{children:a.map(r=>n(Ea,{disablePadding:!0,sx:{display:"block",pt:0,pb:0},children:n(nd,{route:r,showFullName:e,showTooltip:t})},r.navbarName))})},ad=e=>{const{showFullName:t}=e,{toggleDrawer:a}=u.useContext(Ve),r=fe();return g(ro,{children:[n(Ea,{disablePadding:!0,sx:{display:"block",pt:0,pb:0},children:n(ka,{onClick:a,sx:{minHeight:24,justifyContent:t?"flex-end":"center",px:2.5,pt:0,pb:0},children:n(Ta,{sx:{minWidth:0,paddingTop:0,paddingBottom:0},children:t?n(ye,{onClick:a,sx:{mr:0,pr:0,pt:.5,pb:.5},children:r.direction==="rtl"?n(Wn,{}):n(Wn,{})}):n(ye,{onClick:a,sx:{pt:.5,pb:.5},children:n(so,{})})})})}),n(Br,{...e})]})},rd=()=>{const{isDrawerOpen:e}=u.useContext(Ve),t=oe(r=>r.breakpoints.up("sm")),{toggleDrawer:a}=u.useContext(Ve);return n("div",{children:t&&g(_c,{variant:"permanent",open:e,children:[n(Ja,{sx:{padding:0},children:n(He,{onClick:a,sx:{width:"100%",height:"100%",padding:0},children:e?n(Zt,{style:{width:"110px",height:"50px"}}):n(ed,{style:{width:"50px",height:"50px"}})})}),n(xa,{}),n(ad,{showFullName:e,showTooltip:!e})]})})},sd=H(oo,{shouldForwardProp:e=>e!=="open"&&e!=="fullwidth"})(({theme:e,open:t,fullwidth:a})=>({backgroundColor:e.palette.background.default,marginLeft:"20px",width:"calc(100% - 20px)",...!a&&{marginLeft:Kn,width:`calc(100% - ${Kn}px)`},color:e.palette.getContrastText(e.palette.background.default),boxShadow:"none",transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),...t&&!a&&{marginLeft:Ft,width:`calc(100% - ${Ft}px)`,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}})),od=H(io)(()=>({paddingLeft:"15px"})),id=["DoughNutIcon","CirclesIcon","BonutsCurrency"],cd="/assets/icons/",Or=e=>id.reduce((t,a)=>({...t,[a]:()=>n(co,{src:`${cd}${a}.svg`,beforeInjection:e?r=>{r.classList.add(`svg-icon-${a}`),r.setAttribute("style",`width: ${e.width}; height: ${e.height}`)}:I})}),{}),Tt=e=>{const{BonutsCurrency:t}=Or(e||{width:"20px",height:"20px"});return{BonutsCurrency:t}},ld=({profile:e})=>{var h,p;const{account:t,isLoading:a}=vt((h=e==null?void 0:e.distrib_account)==null?void 0:h.id),r=fe(),s=oe(r.breakpoints.down("sm")),{account:o,isLoading:i}=vt((p=e==null?void 0:e.self_account)==null?void 0:p.id),{BonutsCurrency:c}=Tt({height:"16px",width:"16px"}),{toSelfBalanceHistory:l,toDistribBalanceHistory:d}=Ze(e),{t:m}=w();return g(_,{direction:"column",minWidth:s?20:100,maxWidth:s?50:200,children:[n(E,{color:"grey.400",sx:{lineHeight:"16px",borderBottom:"1px solid"},className:"pr-1 pointer",onClick:l,children:g(_,{sx:{lineHeight:"16px"},direction:"row",gap:1,alignItems:"center",justifyContent:"flex-end",children:[n(R,{variant:"caption",color:"grey.700",sx:{lineHeight:"22px",textWrap:"nowrap"},children:!i&&e?n(O,{children:s?o==null?void 0:o.balance:`${o==null?void 0:o.balance} ${m("point",{count:o==null?void 0:o.balance})}`}):null}),n(c,{})]})}),g(_,{className:"pr-1 pointer",sx:{lineHeight:"16px"},direction:"row",gap:1,alignItems:"center",justifyContent:"flex-end",onClick:d,children:[n(R,{variant:"caption",color:"grey.700",sx:{lineHeight:"22px",textWrap:"nowrap"},children:!a&&e?n(O,{children:s?t==null?void 0:t.balance:`${t==null?void 0:t.balance} ${m("donut",{count:t==null?void 0:t.balance})}`}):null}),n(wn,{color:"primary",sx:{width:"16px",height:"16px"}})]})]})},dd=({profile:e})=>{var l,d;const{isDrawerOpen:t}=u.useContext(Ve),a=oe(m=>m.breakpoints.up("sm")),[r,s]=u.useState(null),o=!!r,i=m=>{s(m.currentTarget)},c=()=>{s(null)};return n(sd,{position:"fixed",open:t&&a,fullwidth:!a,children:n(od,{disableGutters:!0,children:g(ue,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,sx:{width:"100%",mr:"10px"},children:[g(_,{direction:"column",gap:0,sx:{flex:1,overflow:"hidden"},children:[n(R,{variant:"button",display:"block",sx:{textWrap:"nowrap",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",minWidth:20},children:e==null?void 0:e.user_name}),n(R,{variant:"caption",display:"block",gutterBottom:!0,sx:{textWrap:"nowrap",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",minWidth:20},children:e==null?void 0:e.position})]}),g(_,{direction:"row",alignItems:"center",gap:2,children:[n(ld,{profile:e||void 0}),n(ye,{edge:"start",color:"inherit","aria-label":"Avatar",onClick:i,children:n(Ue,{src:((d=(l=e==null?void 0:e.user_avatar)==null?void 0:l.thumb)==null?void 0:d.url)||void 0,alt:`${e==null?void 0:e.user_name}`})}),n(lo,{anchorEl:r,id:"account-menu",open:o,onClose:c,onClick:c,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:n(Br,{showFullName:!0})})]})]})})})},ud=()=>{const{auth:e}=je(),{routes:t,redirects:a}=u.useContext(Ve),{profile:r,isLoading:s}=Ne();X(ne.Profile,s);const o=u.useMemo(()=>nr(t,a),[t,a]);return g(E,{sx:{display:"flex",height:"100vh"},children:[n(uo,{}),e.isAuthenticated&&n(dd,{profile:r}),e.isAuthenticated&&n(rd,{}),n(E,{component:"main",sx:{flexGrow:1,maxWidth:"100%",height:"100%",overflow:"hidden"},children:g(_,{direction:"column",sx:{height:"100%",p:0,m:0,overflow:"hidden"},children:[e.isAuthenticated&&n(Ja,{}),n(E,{sx:{flexGrow:1,height:"100%",overflowY:"auto",p:1},children:n(Xl,{routes:o})})]})})]})},Wt=e=>e?e.index!==void 0?e.index:10:0,md=e=>Object.values(e.routes).filter(a=>a&&!a.hideInMenu&&a.navbarName).sort((a,r)=>Wt(a)-Wt(r)),hd={redirects:[{from:T[S.Login],to:T[S.Dashboard],authenticated:!0}]},zr=ie.enhanceEndpoints({addTagTypes:["Profiles"],endpoints:{getProfiles:{providesTags:Sn("Profiles")},postProfilesByIdSetActivity:{invalidatesTags:Oe("Profiles")},putProfilesById:{invalidatesTags:Oe("Profiles")},getProfilesById:{providesTags:Oe("Profiles")}}}),pd=(e,t=1e3)=>({profilerStart:()=>{},profilerStop:()=>{}}),Ye=e=>{const{profilerStart:t,profilerStop:a}=pd(`apiTransaltor for ${e.endpoint.name}`,0),{endpoint:r,args:s,pollingInterval:o=1e3,translator:i=b=>b}=e,[c,l]=u.useState([]),d=me(Te),{data:m,isLoading:h,isSuccess:p,refetch:f}=r.useQuery({...s,tenant:d},{pollingInterval:0,refetchOnMountOrArgChange:!0});return u.useEffect(()=>{if(!m)l(()=>[]);else{t();const b=i(m);ve.isEqual(c,b)||l(b),a()}},[m]),{objects:c,isLoading:h,isSuccess:p,refetch:f}},Fr=()=>Ye({endpoint:zr.endpoints.getProfiles,translator:xc}),qt=e=>{const{translate:t}=w(),{stringLabel:a,onClear:r=nt,name:s,clearable:o=!1,shouldTranslate:i=!0,...c}=e,{InputProps:l={},value:d,placeholder:m,label:h}=c,p=dr({clearable:o,onClear:r,value:d,props:l});return n(we,{...c,name:s,placeholder:i?t(m):m,label:i?t(a)||h:a||h,InputProps:p,value:d})},Xt=e=>{const{setSorter:t=I,setSearch:a,buttons:r,debounceDelay:s=0,className:o}=e,{translate:i}=w(),[c,l]=u.useState(""),d=mo(c,s),m=f=>{s||a(f),l(f)};u.useEffect(()=>{s&&a(d)},[d]);const h=f=>{m(f.target.value||"")},p=()=>{m("")};return g(O,{children:[n(qt,{color:"primary",name:"filter-donuts",placeholder:`${i(se.SEARCH_STRING)}...`,type:q.text,value:c,clearable:!0,onClear:p,onChange:h,className:V(o,{"mb-3":r==null?void 0:r.length}),size:"small",sx:{width:"100%"}}),r!=null&&r.length?n(_,{direction:{xs:"column",sm:"row"},className:"mb-5",spacing:{xs:1,sm:2},children:r==null?void 0:r.map(f=>n(Ge,{variant:"outlined",onClick:b=>{b.preventDefault(),t(f.sorter)},color:"primary",children:i(f.name)},f.name))}):null]})},Nt=e=>e?(e.name||e.last_name||e.first_name||e.email||"").toLowerCase():Q.EMPTY_STRING,ta={sorterByName:(e,t)=>Nt(e)>Nt(t)?1:Nt(e)<Nt(t)?-1:0,sorterByDate:(e,t)=>{const a=new Date(t.created_at||"1970/01/01"),r=new Date(e.created_at||"1970/01/01");return a-r}},Hr=()=>[{name:Qe.SORT_BY_ALPHABET,sorter:ta.sorterByName},{name:Qe.NEWEST,sorter:ta.sorterByDate}],hn=({title:e,onClick:t,profiles:a,setSorter:r,setSearch:s=I,subTitle:o,children:i,hideSearch:c})=>{const l=Hr();return n(ge,{className:"width-100 height-100",children:g(_,{className:"width-100 height-100",children:[g(E,{className:"mr-4 ml-4",children:[n(R,{variant:"h6",className:"mb-2",children:e}),n(R,{variant:"body2",className:"mb-2",children:o}),!c&&n(Xt,{setSearch:s,setFilter:I,setSorter:r,buttons:l})]}),n(E,{className:"m-2 flex-grow",children:a.map(d=>n(Ct,{profile:d,onClick:()=>t(d)},d.id))}),i]})})},en=H(ee,{shouldForwardProp:e=>e!=="noTransform"})(({noTransform:e})=>({textTransform:e?"none":void 0})),jr=H(en,{shouldForwardProp:()=>!0})(({theme:e})=>({fontSize:16,background:e.palette.primary.light,color:e.palette.getContrastText(e.palette.primary.light),padding:"6px 12px","&:hover":{background:e.palette.primary.dark,color:e.palette.getContrastText(e.palette.primary.dark)}})),$r=(e,t)=>{const{searchField:a,initialSorter:r}=t,[s,o]=u.useState(""),[i,c]=u.useState([]),[l,d]=u.useState(r),m=p=>{d(()=>p)};return{filteredList:u.useMemo(()=>e.filter(p=>p[a]&&p[a].toLowerCase().indexOf(s.toLowerCase())>=0).sort(ve.isFunction(l)?l:void 0),[s,i,e,l]),setSorter:m,setFilterFunction:c,setSearch:o}},gd=({next:e=I,initialProfiles:t=[]})=>{const{objects:a=[],isLoading:r}=Fr(),[s,o]=u.useState(t),{t:i}=w();X(ne.ShareAll,r);const c=a.filter(y=>s.every(v=>v.id!==y.id)),{filteredList:l,setSorter:d,setSearch:m}=$r(c,{searchField:"name"}),h=y=>{o(v=>v.some(x=>x.id===y.id)?v:[...v,y])},p=y=>{o(v=>v.filter(C=>C.id!==y.id))},f=()=>{o([...l,...s])},b=()=>{o([])};return g(O,{children:[n(E,{className:"ml-4",children:n(R,{variant:"h5",children:i(M.choose_employees,{capitalize:!0})})}),g(E,{className:"m-4",children:[g(k,{container:!0,columnSpacing:2,rowSpacing:2,children:[n(k,{item:!0,xs:12,sm:6,children:n(hn,{title:i(U.available_employees,{capitalize:!0}),profiles:l,onClick:h,setSearch:m,setSorter:d,hideSearch:!c.length,children:n(O,{children:c.length?n(E,{className:"m-4",children:n(Ge,{onClick:f,children:i(j.select_all)})}):null})})}),n(k,{item:!0,xs:12,sm:6,children:n(hn,{title:i(j.selected_employees,{capitalize:!0}),profiles:s,onClick:p,hideSearch:!s.length,children:n(O,{children:s.length?n(E,{className:"m-4",children:n(Ge,{color:"secondary",onClick:b,children:i(ce.remove_all)})}):null})})})]}),n(_,{direction:"row",alignItems:"center",justifyContent:"flex-end",className:"mt-4",children:n(jr,{disabled:!s.length,onClick:()=>{s.length&&e({profiles:s})},children:i(te.next)})})]})]})};var Ut=(e=>(e.donut="donut",e.coin="coin",e))(Ut||{});const fd=()=>{const{t:e}=w();return{fields:[{image:!1,size:N.xs,type:q.number,name:"amount",label:"amount",xs:12,required:!0},{disabled:!1,image:!1,size:N.xs,name:"comment",label:"comment",placeholder:"comment",type:q.textarea,required:!0,xs:12},{image:!1,required:!0,size:N.md,name:"type",label:e(ae.transfer_type,{capitalize:!0}),source:[{key:Ut.donut,label:e(Ce.donuts)},{key:Ut.coin,label:e(M.coins)}],type:q.radio,xs:12}]}},bd=({onSuccess:e})=>{const{fields:t}=fd(),{t:a}=w();return n(Le,{formId:"transfer-donuts",onSubmit:s=>{e==null||e(s)},fields:t,submitCaption:a(xt.ok)})},yd=({profiles:e,back:t=I,next:a=I})=>{const{t:r}=w();return n(O,{children:g(E,{className:"m-4",children:[n(_,{direction:"row",alignItems:"center",justifyContent:"flex-start",className:"mt-4 mb-4",children:g(Ge,{variant:"outlined",onClick:t,children:["< ",r(Pe.back)]})}),n(k,{className:"mb-4",container:!0,columnSpacing:2,rowSpacing:2,children:n(k,{item:!0,xs:12,children:n(E,{sx:{maxHeight:"200px"},className:"scroll",children:n(hn,{profiles:e||[],onClick:I,hideSearch:!0})})})}),n(bd,{onSuccess:a})]})})},vd=e=>{const{config:t}=e,{steps:a,initialValues:r,onSubmit:s}=t,[o,i]=u.useState(0),c=Object.keys(a)[o],[l,d]=u.useState({}),m=a[c],h=()=>{i(0),d({})},p={wizardState:l,initialValues:r,back:()=>{o>0&&i(f=>f-1)},next:f=>{d(b=>({...b,[c]:f})),o<Object.keys(a).length-1?i(b=>b+1):s({...l,[c]:f,onSuccess:h})}};return n(E,{children:m.renderItem(p)})},wd=()=>{const{adminDeposit:e}=Ln();return n(vd,{config:{initialValues:void 0,onSubmit:async r=>{const{Step1:s,Step2:o,onSuccess:i}=r;if(s&&o){const{profiles:c}=s,{amount:l,comment:d,type:m}=o;e({amount:l,comment:d,toSelfAccount:m===Ut.coin,ids:c.map(h=>h.id)},{onSuccess:i})}},steps:{Step1:{renderItem:r=>{var s;return n(gd,{next:r.next,initialProfiles:(s=r.wizardState.Step1)==null?void 0:s.profiles})}},Step2:{renderItem:r=>{var s;return n(yd,{profiles:(s=r.wizardState.Step1)==null?void 0:s.profiles,back:r.back,next:r.next})}}}}})},Cd=()=>n(wd,{}),Sd=H(ho,{})(()=>({[L("MuiBreadcrumbs-li")]:{overflow:"hidden !important"}})),_d=H(wa,{shouldForwardProp:e=>e!=="hasLink"})(({theme:e,hasLink:t})=>{const a=e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[800];return{maxWidth:"100%",backgroundColor:a,height:e.spacing(3),color:e.palette.grey[800],fontWeight:e.typography.fontWeightRegular,[L("MuiBreadcrumbs-li")]:{overflow:"hidden !important","& >span":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1}},"&:hover, &:focus":{backgroundColor:t&&Un(a,.06),cursor:t?"pointer":"auto"},"&:active":{boxShadow:e.shadows[1],backgroundColor:Un(a,.12)}}}),dt=({items:e,className:t})=>{const{translate:a}=w();return n("div",{children:n(Sd,{className:t,separator:n(po,{fontSize:"small",color:"action"}),children:e.map(r=>{const{onClick:s=nt,link:o,label:i,icon:c,key:l,noTranslation:d}=r,m={...o&&{component:go,to:o}},h=d?i:a(i,{capitalize:!0});return u.createElement(_d,{...m,onClick:r.onClick?()=>s(r):void 0,label:n(Fe,{title:h,children:n("span",{children:h})}),icon:n(ga,{children:c}),key:l,hasLink:!!o})})})})},$e=({children:e,className:t})=>n("div",{className:t,children:e}),Ke=({children:e,className:t,transparent:a})=>n(ge,{className:V(t,"mt-2 height-100"),sx:{background:a?"transparent":void 0},children:n($e,{className:"height-100",children:e})}),xd=()=>{const e=me(Te),{data:t,error:a,isLoading:r,refetch:s}=Yi({tenant:e||void 0},{skip:!e});return{tenant:Dr(t),isLoading:r,error:a,refetch:s}};var pn=(e=>(e.welcome_donuts="welcome donuts",e.welcome_points="welcome points",e))(pn||{});const kd=()=>{const{ImageModal:e}=Se(),{t}=w(),a=o=>{e.show({url:o||Q.EMPTY_STRING,title:t(W.preview,{capitalize:!0})})},r=[{id:1,md:5,lg:3,xs:12,padding:{pt:4}},{id:2,md:5,lg:5,xs:12,padding:{pt:4}}];return{fields:[{image:!0,size:N.xs,name:"logo",label:"Logo",type:q.imageUpload,xs:12,md:12,group:1,onClick:o=>a(o==null?void 0:o.toString())},{image:!1,size:N.xs,name:"name",label:"name",xs:12,required:!0,group:2},{image:!1,size:N.xs,name:"caption",label:"caption",xs:12,required:!0,group:2},{disabled:!1,type:q.text,image:!1,size:N.xs,name:"domain",label:Ce.domain,required:!1,xs:12,group:2},{disabled:!1,type:q.number,image:!1,size:N.xs,name:"welcome_donuts",label:pn.welcome_donuts,required:!0,xs:12,sm:6,lg:4,group:2},{disabled:!1,type:q.number,image:!1,size:N.xs,name:"welcome_points",label:pn.welcome_points,required:!0,xs:12,sm:6,lg:4,offset:{offsetAfterElement:{lg:4}},group:2},{disabled:!1,type:q.number,image:!1,size:N.xs,name:"birthday_donuts",label:Pe.birthday_donuts,required:!1,xs:12,sm:6,lg:4,group:2},{disabled:!1,type:q.number,image:!1,size:N.xs,name:"birthday_points",label:Pe.birthday_points,required:!1,xs:12,sm:6,lg:4,group:2},{disabled:!1,type:q.switch,image:!1,size:N.xs,name:"email_notification",label:B.email_notification,required:!1,xs:12,group:2},{disabled:!1,type:q.text,image:!1,size:N.xs,name:"birthday_message",label:Pe.birthday_message,required:!1,xs:12,group:2}],groups:r}},Td=lt.enhanceEndpoints({addTagTypes:["Tenant","Tenants"],endpoints:{getTenantCurrent:{providesTags:["Tenant"]},getTenants:{providesTags:["Tenants"]},getTenantsAccessible:{providesTags:["Tenants"]}}}),Bn=Td.injectEndpoints({endpoints:e=>({updateCurrentTenantFormData:e.mutation({invalidatesTags:["Tenant"],query(t){return Pn("/tenant/current","PUT",t)}})})}),Ed=()=>{const e=me(Te),[t]=Bn.useUpdateCurrentTenantFormDataMutation(),{showNotification:a}=De();return{updateTenant:async(s,o)=>{var i;if(e){const{logo:c}=s,l=c&&!Object.getOwnPropertyDescriptor(c,"url")?c:void 0,d=await t({body:{...s,...l&&{logo:l},tenant:e}}),m={data:void 0,...d};return m.data&&((i=o==null?void 0:o.onSuccess)==null||i.call(o,m.data),a(j.settings_updated)),d}}}},Pd=()=>{const{tenant:e}=xd(),{updateTenant:t}=Ed(),a=kd();return n(Le,{formId:"current_tenant",hasInitial:!0,initialValues:e,...a,onSubmit:s=>{t(s)}})},Ad=()=>{var t,a,r,s,o,i,c,l,d,m,h,p;const e=[{key:"settings",link:(t=de.routes[S.Settings])==null?void 0:t.path,label:((a=de.routes[S.Settings])==null?void 0:a.navbarName)||"settings",icon:(r=de.routes[S.Settings])==null?void 0:r.icon},{key:((i=(o=(s=de.routes[S.Settings])==null?void 0:s.children)==null?void 0:o.Tenant)==null?void 0:i.path)||"tenant",label:((d=(l=(c=de.routes[S.Settings])==null?void 0:c.children)==null?void 0:l.Tenant)==null?void 0:d.navbarName)||Q.EMPTY_STRING,icon:(p=(h=(m=de.routes[S.Settings])==null?void 0:m.children)==null?void 0:h.Tenant)==null?void 0:p.icon}];return g(_,{direction:"column",sx:{height:"100%",overflow:"hidden"},children:[n(dt,{items:e}),n(Ke,{className:"flex-grow scroll p-4",children:n(Pd,{})})]})},Id=()=>n(Ad,{}),Wr=()=>{const{t:e}=w();return n(E,{sx:{alignItems:"center",width:"100%",height:"60vh",display:"flex",justifyContent:"center"},children:g(ue,{direction:"column",justifyContent:"center",alignItems:"center",children:[n(fo,{sx:{height:"150px",width:"150px"}}),n(R,{variant:"h5",children:e(yt.under_construct)}),n(R,{variant:"body2",children:e(j.soon_will_be_back)})]})})},Dd=()=>n(Wr,{}),Ur=ie.enhanceEndpoints({addTagTypes:["Schedulers"],endpoints:{postDonutsSchedulers:{invalidatesTags:$a("Schedulers")},getDonutsSchedulers:{providesTags:Sn("Schedulers")},getDonutsSchedulersById:{providesTags:Oe("Schedulers")},patchDonutsSchedulersById:{invalidatesTags:Oe("Schedulers")},deleteDonutsSchedulersById:{invalidatesTags:["Schedulers"]}}}),Nd=()=>Ye({endpoint:Ur.endpoints.getDonutsSchedulers,translator:Mr}),Vt={schedulerList:"scheduler-list",schedulerCard:"scheduler-card",schedulerCardBody:"scheduler-card-body"},Vr=()=>[{id:1,label:"monday"},{id:2,label:"tuesday"},{id:3,label:"wednesday"},{id:4,label:"thursday"},{id:5,label:"friday"},{id:6,label:"saturday"},{id:7,label:"sunday"}],Gr=e=>{const t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),e?bo(t,e).toISOString():t.toISOString()};var Gt=(e=>(e.daily="daily",e.weekly="weekly",e))(Gt||{});const Rd=({scheduler:e,preventEdit:t,openEdit:a})=>{var s;const{t:r}=w();return n(ge,{raised:!0,className:Vt.schedulerCard,onClick:()=>{t||a()},children:n($e,{className:Vt.schedulerCardBody,children:g(_,{direction:"column",children:[n(E,{children:e.name||r(te.no_name,{capitalize:!0})}),n(E,{children:g(R,{variant:"caption2",children:[`${e.amount}  ${r("donut",{count:e.amount})} `,`${e.every===Gt.weekly?r(B.every_week):r(B.every_month)}`]})}),n(E,{children:n(R,{variant:"caption2",children:g(O,{children:[`${e.every===Gt.weekly?r((s=Vr().find(o=>o.id===e.weekday))==null?void 0:s.label):`${e.day}  ${r(Ce.day)}`}`,` ${wt(Gr(e.time_in_seconds),!1,!0,void 0,!0,!1)} ${e.timezone?`[${e.timezone}]`:Q.EMPTY_STRING}`]})})})]})})})},Yr=u.createContext(void 0),Md=()=>u.useContext(Yr),Ld=u.forwardRef((e,t)=>{const{translate:a}=w(),r=Md(),{stringLabel:s,fullWidth:o,...i}=e;return n(yo,{...i,localeText:r,inputProps:{fullWidth:o,placeholder:a(s),label:a(s),variant:"standard"},ref:t})}),gn=e=>{const{translate:t}=w(),{stringLabel:a,label:r,...s}=e;return n(vo,{...s,variant:"standard",label:r||t(a),inputProps:{placeholder:t(a),label:t(a),variant:"standard"}})},qd=()=>[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],na=()=>qd().map(e=>({id:e,label:e}));var fn=(e=>(e.daily="daily",e.weekly="weekly",e))(fn||{});const Bd=e=>{const{maxWidth:t="300px",...a}=e,{t:r}=w(),s=u.useMemo(()=>Vr().map(o=>({id:o.id,label:r(o.label,{capitalize:!0})})),[]);return n(gn,{...a,options:s,style:{maxWidth:t}})},Od=()=>({"Pacific/Midway":"Midway Island, Samoa","Pacific/Honolulu":"Hawaii","America/Juneau":"Alaska","America/Boise":"Mountain Time","America/Dawson":"Dawson, Yukon","America/Chihuahua":"Chihuahua, La Paz, Mazatlan","America/Phoenix":"Arizona","America/Chicago":"Central Time","America/Regina":"Saskatchewan","America/Mexico_City":"Guadalajara, Mexico City, Monterrey","America/Belize":"Central America","America/Detroit":"Eastern Time","America/Bogota":"Bogota, Lima, Quito","America/Caracas":"Caracas, La Paz","America/Santiago":"Santiago","America/St_Johns":"Newfoundland and Labrador","America/Sao_Paulo":"Brasilia","America/Tijuana":"Tijuana","America/Montevideo":"Montevideo","America/Argentina/Buenos_Aires":"Buenos Aires, Georgetown","America/Godthab":"Greenland","America/Los_Angeles":"Pacific Time","Atlantic/Azores":"Azores","Atlantic/Cape_Verde":"Cape Verde Islands",GMT:"UTC","Europe/London":"Edinburgh, London","Europe/Dublin":"Dublin","Europe/Lisbon":"Lisbon","Africa/Casablanca":"Casablanca, Monrovia","Atlantic/Canary":"Canary Islands","Europe/Belgrade":"Belgrade, Bratislava, Budapest, Ljubljana, Prague","Europe/Sarajevo":"Sarajevo, Skopje, Warsaw, Zagreb","Europe/Brussels":"Brussels, Copenhagen, Madrid, Paris","Europe/Amsterdam":"Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","Africa/Algiers":"West Central Africa","Europe/Bucharest":"Bucharest","Africa/Cairo":"Cairo","Europe/Helsinki":"Helsinki, Riga, Sofia, Tallinn, Vilnius","Europe/Kyiv":"Kyiv","Europe/Athens":"Athens","Asia/Jerusalem":"Jerusalem","Africa/Harare":"Harare, Pretoria","Europe/Moscow":"Moscow, St. Petersburg, Volgograd ","Europe/Minsk":"Minsk ","Europe/Istanbul":"Istanbul ","Asia/Kuwait":"Kuwait, Riyadh","Africa/Nairobi":"Nairobi","Asia/Baghdad":"Baghdad","Asia/Tehran":"Tehran","Asia/Dubai":"Abu Dhabi, Muscat","Asia/Baku":"Baku, Tbilisi, Yerevan","Asia/Kabul":"Kabul","Asia/Yekaterinburg":"Ekaterinburg","Asia/Tashkent":"Tashkent","Asia/Karachi":"Islamabad, Karachi","Asia/Kolkata":"Chennai, Kolkata, Mumbai, New Delhi","Asia/Kathmandu":"Kathmandu","Asia/Astana":"Astana","Asia/Dhaka":"Dhaka","Asia/Colombo":"Sri Jayawardenepura","Asia/Novosibirsk":"Novosibirsk","Asia/Almaty":"Almaty","Asia/Rangoon":"Yangon Rangoon","Asia/Bangkok":"Bangkok, Hanoi, Jakarta","Asia/Krasnoyarsk":"Krasnoyarsk","Asia/Shanghai":"Beijing, Chongqing, Hong Kong SAR, Urumqi","Asia/Kuala_Lumpur":"Kuala Lumpur, Singapore","Asia/Taipei":"Taipei","Australia/Perth":"Perth","Asia/Irkutsk":"Irkutsk, Ulaanbaatar","Asia/Seoul":"Seoul","Asia/Tokyo":"Osaka, Sapporo, Tokyo","Asia/Yakutsk":"Yakutsk","Australia/Darwin":"Darwin","Australia/Adelaide":"Adelaide","Australia/Sydney":"Canberra, Melbourne, Sydney","Australia/Brisbane":"Brisbane","Australia/Hobart":"Hobart","Asia/Vladivostok":"Vladivostok","Pacific/Guam":"Guam, Port Moresby","Asia/Magadan":"Magadan, Solomon Islands, New Caledonia","Asia/Kamchatka":"Kamchatka, Marshall Islands","Pacific/Fiji":"Fiji Islands","Pacific/Auckland":"Auckland, Wellington","Pacific/Tongatapu":"Nuku'alofa"});function Kr(){const{t:e}=w(),t=u.useMemo(()=>{const s=Od();return Object.entries(s).map(c=>{var l,d,m,h;try{const p=sn.now(c[0]),f=p.isDST()?"daylight":"standard",b=p.timezone(),y=wo(c[0]),v=(d=(l=y==null?void 0:y[0])==null?void 0:l[f])==null?void 0:d.abbr,C=(h=(m=y==null?void 0:y[0])==null?void 0:m[f])==null?void 0:h.name,x=b.current.offset*60,P=`${x/60^0}:${x%60===0?"00":Math.abs(x%60)}`,z=c[1].split(",").map(re=>e(re.trim())).join(", "),G=`${`(GMT${P.includes("-")?P:`+${P}`}) ${z}`} (${v})`;return{value:b.name,label:G,offset:b.current.offset,abbrev:v,altName:C}}catch{return null}}).filter(c=>!!c).sort((c,l)=>(c.offset||0)-(l.offset||0))},[]),a=s=>{let o;try{o=sn.now(s)}catch{o=sn.now("GMT")}return t.filter(i=>i.offset===o.timezone().current.offset).map(i=>{let c=0;return o.timezones[i.value.toLowerCase()]&&!!o.timezones[i.value.toLowerCase()].dst===o.timezone().hasDst?(i.value.toLowerCase().indexOf(o.tz.substring(o.tz.indexOf("/")+1))!==-1&&(c+=8),i.label.toLowerCase().indexOf(o.tz.substring(o.tz.indexOf("/")+1))!==-1&&(c+=4),i.value.toLowerCase().indexOf(o.tz.substring(0,o.tz.indexOf("/")))&&(c+=2),c+=1):i.value==="GMT"&&(c+=1),{tz:i,score:c}}).sort((i,c)=>c.score-i.score)[0].tz};return{options:t,parseTimezone:s=>{if(s){if(typeof s=="object"&&s.value&&s.label)return s;if(typeof s=="string")return t.find(o=>o.value===s)||s.indexOf("/")!==-1&&a(s);if(s.value&&!s.label)return t.find(o=>o.value===s.value)}}}}const zd=u.forwardRef((e,t)=>{const{stringLabel:a,placeholder:r,className:s,...o}=e,{options:i,parseTimezone:c}=Kr(),{translate:l}=w();return n(Co,{autocompleteProps:{isOptionEqualToValue:(d,m)=>d.value===m.value,value:e!=null&&e.value?c(e==null?void 0:e.value):void 0,className:s},...o,label:l(a),options:i,textFieldProps:{variant:"standard",placeholder:l(r)},ref:t})}),Fd=()=>{var i,c;const{t:e}=w(),{errors:t}=ba(),a=fe(),r=oe(a.breakpoints.down("sm")),s=fa({name:"every"}),o=u.useMemo(()=>[{id:fn.daily,label:e(B.every_month)},{id:fn.weekly,label:e(B.every_week)}],[]);return g(k,{container:!0,children:[n(k,{item:!0,xs:12,sm:12,lg:8,children:n(mn,{margin:"normal",fullWidth:!0,error:!!t,helperText:(i=t.name)==null?void 0:i.message,required:!0,name:"name",label:e(te.name,{capitalize:!0}),autoFocus:!0})}),n(k,{item:!0,xs:12,sm:6,children:n(gn,{fullWidth:!0,name:"every",options:o,required:!0,label:e(M.choose_type),placeholder:e(M.choose_type)})}),s==="daily"?n(k,{item:!0,xs:12,sm:6,children:n(gn,{className:r?void 0:"pl-2",fullWidth:!0,name:"day",options:na(),label:e(M.choose_day),SelectProps:{MenuProps:{style:{maxHeight:400}}}})}):n(k,{item:!0,xs:12,sm:5,children:n(Bd,{maxWidth:"400px",fullWidth:!0,className:r?void 0:"pl-2",name:"weekday",options:na(),label:e(M.choose_day),SelectProps:{MenuProps:{style:{maxHeight:400}}}})}),g(k,{item:!0,xs:12,sm:6,className:"mt-2",children:[n(Ld,{stringLabel:M.choose_time,name:"time",ampm:!1,format:"HH:mm",required:!0,fullWidth:!0}),g(_,{direction:"row",className:"pt-1",gap:1,children:[n(Fe,{title:e(ae.tooltip_scheduler_time,{capitalize:!0}),children:n(So,{color:"secondary",sx:{height:16,width:16}})}),n(R,{variant:"caption",children:e(U.approximate_action_time,{capitalize:!0})})]})]}),n(k,{item:!0,xs:12,sm:6,className:"mt-2",children:n(zd,{className:"pl-2",name:"timezoneValue",fullWidth:!0,stringLabel:M.choose_timezone})}),n(k,{item:!0,xs:12,children:n(mn,{margin:"normal",fullWidth:!0,error:!!t,helperText:(c=t.amount)==null?void 0:c.message,required:!0,name:"amount",stringLabel:U.amount,type:"number"})}),n(k,{item:!0,xs:12,className:"mt-2",children:n(cr,{name:"comment",required:!0,fullWidth:!0,placeholder:U.add_comment,stringLabel:M.comment,rows:6})}),n(k,{item:!0,xs:12,className:"mt-2",children:n(lr,{name:"burn_old",stringLabel:Pe.burn_unused_donuts})})]})},aa={amount:0,comment:"",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,weekday:1,name:"new scheduler",every:Gt.daily,day:1},Hd=()=>{const{translate:e}=w();return{formSchema:it().shape({name:be().required(e(te.name_is_required,{capitalize:!0})),amount:un().min(1,`${e(Re.min_amount_is)} 1`).max(1e4,`${e(Re.max_amount_is)} 10000`),comment:be().required(e(M.comment_is_required,{capitalize:!0})),time:be().required(e(ae.time_is_required,{capitalize:!0}))})}},jd=e=>{if(!e)return 0;const t=new Date(e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),_o(t,new Date(e))},$d=e=>{const{timezoneValue:t,time:a,...r}=e;return{...r,timezone:t?t.value:void 0,time_in_seconds:jd(a)}},Qr=({onSubmit:e=I,onCancel:t=I,defaultValue:a=aa,submitCaption:r,className:s})=>{const{translate:o}=w(),{parseTimezone:i}=Kr(),{formSchema:c}=Hd(),l=St({shouldUseNativeValidation:!1,resolver:ct(c),defaultValues:{...a,name:a.id?a.name:o(te.new_scheduler),time:Gr(a.time_in_seconds),timezoneValue:i(a.timezone||aa.timezone)}});return n("div",{className:s,children:g(va,{formContext:l,onSuccess:m=>{e($d(m))},onError:m=>console.error(m),children:[n(Fd,{}),n(gr,{visible:!0,onCancelClick:t,submitCaption:r})]})})},Wd=({scheduler:e,onSubmit:t,closeEdit:a,onDelete:r=I})=>{const{t:s}=w(),o=i=>{t==null||t(i),a()};return g(ge,{className:V("p-2"),raised:!0,children:[e.profile&&g(_,{direction:"row",justifyContent:"space-between",children:[g(_,{justifyContent:"flex-start",direction:"row",alignItems:"center",gap:2,children:[n(R,{variant:"caption2",children:s(U.author,{capitalize:!0})}),n(Ct,{profile:e.profile,onClick:I})]}),n(E,{children:n(ye,{onClick:r,sx:{width:40},children:n(Pa,{})})})]}),n(Qr,{defaultValue:e,onCancel:a,onSubmit:o})]})},Ud=({schedulers:e,createMode:t,className:a,closeCreateMode:r=I,onCreate:s,onUpdate:o,onDelete:i=I})=>{const[c,l]=u.useState(),{t:d}=w();return u.useEffect(()=>{c!==void 0&&t&&l(void 0)},[t]),g(_,{direction:"column",className:V(Vt.schedulerList,a),gap:2,children:[t&&n(Qr,{onSubmit:s,onCancel:r,submitCaption:d(M.create)}),t&&n(Jt,{}),e==null?void 0:e.map(m=>c===m.id?n(Wd,{scheduler:m,onSubmit:o,onDelete:()=>i(m.id),closeEdit:()=>{m.id===c&&l(void 0)}},m.id):n(Rd,{scheduler:m,openEdit:()=>{r(),l(m.id)}},m.id))]})},Vd=H(Ud,{})(({theme:e})=>({maxWidth:700,paddingTop:8,paddingRight:4,paddingLeft:8,paddingBottom:24,[L(Vt.schedulerCard)]:{"&:hover":{cursor:"pointer",outline:"2px solid",outlineColor:e.palette.primary.light,"& img":{transform:"translate3d(0, -3px, 2px)",transition:"all 500ms cubic-bezier(0.34, 1.61, 0.7, 1)"}},display:"flex",paddingTop:12,paddingLeft:12,justifyContent:"flex-start",minHeight:100}})),Gd=({onClick:e})=>{const{t}=w();return g(en,{startIcon:n(Aa,{}),onClick:e,sx:{maxWidth:700},children:[t(U.add_new_scheduler,{capitalize:!0})," "]})},Yd=()=>{const{usePostDonutsSchedulersMutation:e,usePatchDonutsSchedulersByIdMutation:t,useDeleteDonutsSchedulersByIdMutation:a}=Ur,[r]=e(),[s]=t(),[o]=a(),i=Mn(),{showNotification:c}=De();return{createScheduler:(h,p)=>{const{name:f,amount:b,every:y,comment:v}=h;if(i&&f&&b&&y&&v)r({body:{tenant:i,...h,name:f.toString(),amount:b,every:y,comment:v,execute_time:h.execute_time?Ca(new Date(h.execute_time),"yyyy-MM-dd HH:mm"):"2000-01-01 00:00"}}).unwrap().then(C=>{var x;(x=p==null?void 0:p.onSuccess)==null||x.call(p,C),c(j.scheduler_created)});else throw new Error("empty tenant or name")},updateScheduler:(h,p)=>{const{name:f,amount:b,every:y,comment:v,id:C}=h;if(i&&f&&b&&y&&v&&C)s({id:C==null?void 0:C.toString(),body:{tenant:i,...h,name:f.toString()}}).unwrap().then(x=>{var P;(P=p==null?void 0:p.onSuccess)==null||P.call(p,x),c(j.scheduler_updated)});else throw new Error("empty tenant or name")},deleteScheduler:(h,p)=>{if(i&&h)o({id:h==null?void 0:h.toString(),tenant:i}).unwrap().then(f=>{var b;(b=p==null?void 0:p.onSuccess)==null||b.call(p,f),c(j.scheduler_deleted)});else throw new Error("empty tenant or name")}}},Kd=()=>{const{objects:e,isLoading:t}=Nd(),{createScheduler:a,updateScheduler:r,deleteScheduler:s}=Yd(),[o,i]=u.useState(!1),{ConfirmationModal:c}=Se();X(ne.Schedulers,t);const l=fe(),d=oe(l.breakpoints.down("sm")),{t:m}=w();return g(_,{direction:"column",sx:{height:"100%",overflow:"hidden"},className:d?void 0:"ml-4",children:[o?null:n(Gd,{onClick:()=>i(!0)}),n(Ke,{className:"flex-grow scroll",transparent:!0,children:n(Vd,{schedulers:e,createMode:o,closeCreateMode:()=>i(!1),onCreate:f=>{a(f,{onSuccess:()=>i(!1)})},onUpdate:r,onDelete:f=>{c.show({title:m(j.scheduler_delete,{capitalize:!0}),text:m(U.are_you_sure_to_delete,{capitalize:!0}),onSubmit:()=>s(f)})}})})]})},Qd=()=>n(Kd,{}),Jd=({employee:e})=>{const t=[{key:T[S.Employees],link:T[S.Employees],label:B.employees,icon:n(Ia,{})},{key:(e==null?void 0:e.id.toString())||"employee",label:(e==null?void 0:e.user_name)||"",icon:n(Da,{}),noTranslation:!0}];return n(dt,{items:t,className:"mb-2"})},Rt=({name:e,value:t,className:a})=>{const{translate:r}=w();return g(ue,{direction:"row",alignItems:"baseline",className:V(a,"mt-2"),children:[g(R,{display:"block",color:"neutral.main",children:[r(e).toLowerCase(),":"]}),n(R,{display:"block",className:"ml-4",children:t})]})},Zd=({onAdminDepositClick:e=I,onEditClick:t=I,onTransferClick:a=I,onActivateClick:r=I,onDisableClick:s=I,allowAdminDeposit:o,allowDisable:i,allowActivate:c,allowEdit:l})=>{const{translate:d}=w(),{BonutsCurrency:m}=Tt();return g(_,{direction:"row",className:"mr-4",justifyContent:"flex-end",children:[n(qe,{color:"primary",tooltip:d(ae.transfer_donuts),onClick:a,children:n(Na,{})}),l&&n(qe,{customIcon:!0,tooltip:`${d(B.edit)}`,onClick:t,children:n(Ra,{color:"secondary"})}),o&&n(qe,{customIcon:!0,tooltip:`${d(ae.transfer_points)}`,onClick:e,children:n(m,{})}),i&&n(qe,{color:"error",tooltip:`${d(Ce.disable_account)}`,onClick:s,children:n(xo,{})}),c&&n(qe,{color:"primary",tooltip:`${d(U.activate)}`,onClick:r,children:n(ko,{})})]})},Xd=lt.injectEndpoints({endpoints:e=>({updateAvatars:e.mutation({query(t){return Pn("/avatars","POST",t)}})})}),eu=()=>{const e=me(Te),[t]=Xd.useUpdateAvatarsMutation(),{showNotification:a}=De();return{postAvatar:async(s,o)=>{var l;const{id:i,file:c}=s;if(e){const d=await t({body:{id:i,uploaded_image:c,tenant:e}}),m={data:void 0,...d};return m.data&&((l=o==null?void 0:o.onSuccess)==null||l.call(o,m.data),a(yt.updated)),d}}}},Jr=({profile:e})=>{const{postAvatar:t}=eu(),{ImageModal:a}=Se(),r=l=>{a.show({url:l||Q.EMPTY_STRING,title:e==null?void 0:e.name})},o={fields:[{image:!0,size:N.xs,name:"user_avatar",label:"Avatar",type:q.imageUpload,xs:12,onClick:l=>r(l==null?void 0:l.toString())}],formId:"user-profile"};return n(Le,{hasInitial:!0,initialValues:e,...o,onSubmit:l=>{if(e&&e.tenant&&e.id){const d=l.user_avatar;return t({file:d,id:e.id})}}})},ra={Space:" ",Dash:"-",Dot:".",Comma:",",Empty:""},ke={admin:"admin",moderator:"moderator",store_admin:"store_admin"},tu=(e,t)=>`${e}${e?ra.Space:ra.Empty}${t}`,nu=e=>{var t;return e&&(((t=e==null?void 0:e.roles)==null?void 0:t.includes(ke.admin))||(e==null?void 0:e.admin))||!1},sa={isAdmin:nu,getUserName:tu},au=({disabled:e})=>({roleField:{disabled:e,image:!1,size:N.md,name:"roles",label:"Roles",placeholder:"Roles",source:[{key:ke.admin,label:ke.admin},{key:ke.store_admin,label:ke.store_admin},{key:ke.moderator,label:ke.moderator}],type:q.tags,optionToValue:a=>a.key?a.key:a,xs:12}}),Zr=()=>Ye({endpoint:Rn.endpoints.getCircles,translator:pl}),ru=e=>{const t=me(Xa),{roleField:a}=au({disabled:!sa.isAdmin(t)}),{objects:r,isLoading:s}=Zr(),o=c=>({key:c.id,label:c.name});return{fields:[{disabled:!sa.isAdmin(e),image:!1,size:N.xs,name:"email",label:"Email",xs:12,required:!0},{disabled:!1,image:!1,size:N.xs,name:"first_name",label:"Name",xs:12,md:6},{disabled:!1,image:!1,size:N.md,name:"last_name",label:"Surname",xs:12,md:6},{image:!1,size:N.xs,name:"contact",label:"Contact",xs:12,required:!0},{disabled:!1,image:!1,size:N.md,name:"position",label:"Position",xs:12},a,{image:!1,size:N.xs,name:"birthdate",label:"Date of birth",type:q.date,md:6,sm:12,xs:12},{image:!1,size:N.xs,name:"in_date",label:B.employment_date,type:q.date,md:6,sm:12,xs:12},{image:!1,size:N.md,name:"circles",label:"Circles",placeholder:"Circles",source:r.map(o),valueToOption:c=>c.map(l=>({key:l.id,label:l.name})),optionToValue:c=>c.key,type:q.tags,loading:s,xs:12},{image:!1,size:N.md,name:"bio",label:U.about_myself,placeholder:U.about_myself,type:q.textarea,maxRows:7,minRows:5,rows:6,xs:12}]}},Xr=({profile:e,isLoading:t=!1,error:a,updateProfile:r})=>{const{fields:s}=ru(e),o={fields:s,formId:"user-profile"},i=e;return X(ne.Profile,t&&!a),n(Le,{hasInitial:!0,initialValues:i,...o,onSubmit:l=>{if(e)return r(e,{...l,active:!0})}})},su=({profile:e,onClose:t=I})=>{const{updateProfile:a}=tr(),{translate:r}=w();return g(O,{children:[n(_,{direction:"row",justifyContent:"flex-end",children:n(qe,{customIcon:!0,tooltip:`${r(M.close)}`,onClick:t,children:n(bt,{})})}),g(k,{container:!0,spacing:2,className:"p-2",children:[n(k,{item:!0,xs:12,sm:6,lg:4,children:n(Jr,{profile:e})}),n(k,{item:!0,xs:12,sm:6,lg:6,children:n(Xr,{profile:e,updateProfile:a})})]})]})},ou=({employee:e,onImageClick:t=I,onAdminDepositClick:a=I,onTransferClick:r=I,onActivateClick:s=I,onDisableClick:o=I,allowAdminDeposit:i,allowActivate:c,allowDisable:l,allowEdit:d})=>{var y,v;const m=fe(),{translate:h}=w(),p=oe(m.breakpoints.down("sm")),[f,b]=u.useState(!1);return g(_,{direction:"column",className:"height-100",children:[g(_,{direction:"column",children:[n(Jd,{employee:e}),n(ge,{className:"width-100 mb-1",children:n(Zd,{allowDisable:l,allowActivate:c,allowAdminDeposit:i,allowEdit:d,onAdminDepositClick:a,onTransferClick:r,onEditClick:()=>b(!0),onDisableClick:o,onActivateClick:s})})]}),n(ge,{className:"flex-grow scroll",children:n($e,{className:"m-2 p-2",children:f?n(su,{profile:e,onClose:()=>b(!1)}):n(O,{children:g(k,{container:!0,justifyItems:"flex-start",spacing:4,children:[g(k,{item:!0,xs:12,sm:8,md:4,lg:4,xl:3,className:V("",{"text-align-center":p}),children:[n(Kt,{defaultImage:Nn,image:(y=e==null?void 0:e.user_avatar)==null?void 0:y.url,className:"ml-3",onClick:t}),n(ue,{direction:"row",justifyContent:"center",alignItems:{sm:"center",xs:"center"},flexWrap:"wrap",spacing:1,gap:1,className:"ml-4 mt-4",children:(v=e==null?void 0:e.circles)==null?void 0:v.map(C=>n(yr,{title:C.name}))})]}),g(k,{item:!0,xs:12,sm:12,md:5,lg:6,order:{xs:3,md:2},children:[g(ue,{direction:{sm:"row",xs:"column"},alignItems:{sm:"center",xs:"flex-start"},spacing:2,children:[n(R,{variant:"h4",display:"block",children:e==null?void 0:e.user_name}),g(ue,{direction:{sm:"column",md:"row",xs:"column"},spacing:2,children:[(e==null?void 0:e.admin)&&n(Mt,{color:"primary",icon:n(To,{}),label:h(U.admin)}),e&&!(e!=null&&e.active)&&n(Mt,{color:"error",icon:n(Eo,{}),label:h(te.not_active)}),(e==null?void 0:e.store_admin)&&n(Mt,{color:"warning",icon:n(Po,{}),label:h(j.store_admin)})]})]}),n(R,{variant:"h5",display:"block",className:"mb-4",children:e==null?void 0:e.position}),n(Rt,{name:"email",value:e==null?void 0:e.email,className:"mb-3"}),n(Rt,{name:M.contact,value:e==null?void 0:e.contact,className:"mb-3"}),n(Rt,{name:Pe.birthday,value:wt(e==null?void 0:e.birthdate,!0),className:"mb-3"}),n(Rt,{name:ze.in_date,value:wt(e==null?void 0:e.in_date),className:"mb-3"}),n(Jt,{className:"mt-4 mb-4"}),n(E,{children:n(R,{isPreformatted:!0,children:e==null?void 0:e.bio})})]})]})})})})]})},iu=H(ou,{})(({theme:e})=>({})),es=()=>{const{AdminDepositModal:e,TransferModal:t}=Se(),{t:a}=w();return{showAdminDeposit:o=>{e.show({id:o,title:a(U.admin_deposit,{capitalize:!0})})},showTransfer:o=>{t.show({id:o,title:a(ae.transfer_donuts,{capitalize:!0})})}}},cu=()=>{const{usePostProfilesByIdSetActivityMutation:e}=zr,[t]=e(),{authTenant:a}=Ne(),{showNotification:r}=De(),{ConfirmationModal:s}=Se(),{t:o}=w(),i=(l,d)=>{const{id:m,active:h}=l;a&&t({id:m,body:{tenant:a,active:h}}).unwrap().then(p=>{var f;(f=d==null?void 0:d.onSuccess)==null||f.call(d,p),r(Ce.disabled)}).catch(p=>{var f;return(f=d==null?void 0:d.onError)==null?void 0:f.call(d,p.data.message)})};return{setActivity:i,setActivityWithConfirmation:(l,d)=>{s.show({text:o(U.are_you_sure,{capitalize:!0}),title:o(M.confirmation,{capitalize:!0}),onSubmit:()=>i(l,d)})}}},lu=()=>{const{id:e}=Je(),{employee:t,isLoading:a,error:r}=Dn(e),{ImageModal:s}=Se(),{profile:o}=Ne(),{showAdminDeposit:i,showTransfer:c}=es(),{setActivityWithConfirmation:l,setActivity:d}=cu();X(ne.EmployeePreview,a&&!r);const m=()=>{var y,v;(y=t==null?void 0:t.user_avatar)!=null&&y.url&&s.show({url:((v=t==null?void 0:t.user_avatar)==null?void 0:v.url)||""})},h=()=>{t&&i(t.id)},p=()=>{t&&c(t.id)},f=()=>{t&&d({id:t.id,active:!0})},b=()=>{t&&l({id:t.id,active:!1})};return n(iu,{employee:t,onImageClick:m,allowAdminDeposit:o==null?void 0:o.admin,allowDisable:o==null?void 0:o.admin,allowEdit:o==null?void 0:o.admin,onAdminDepositClick:h,onTransferClick:p,onActivateClick:f,onDisableClick:b})},du=()=>n(lu,{}),ts=e=>{const t=me(Te),{data:a,error:r,isLoading:s,refetch:o}=qi({id:e||"",tenant:t||void 0});return{donut:Ar(a),isLoading:s,error:r,refetch:o}},uu=()=>{const{ImageModal:e}=Se(),{t}=w(),a=o=>{e.show({url:o||Q.EMPTY_STRING,title:t(W.preview,{capitalize:!0})})},r=[{id:1,md:5,lg:3,xs:12,padding:{pt:0}},{id:2,md:7,lg:9,xs:12,padding:{pt:0},groups:[{id:3,xs:12,lg:8,offset:{offsetAfterElement:{lg:4}},padding:{p:1},sx:()=>({borderBottom:1,boxShadow:2,mb:4})}]}];return{fields:[{image:!0,size:N.xs,name:"logo",label:"Logo",type:q.imageUpload,xs:12,md:12,group:1,onClick:o=>a(o==null?void 0:o.toString())},{image:!1,size:N.xs,name:"name",label:"name",xs:12,required:!0,group:3},{disabled:!1,type:q.switch,image:!1,size:N.xs,name:"active",label:U.active,required:!1,xs:12,group:3},{disabled:!1,type:q.number,image:!1,size:N.xs,name:"price",label:"price",required:!0,xs:12,sm:6,lg:4,group:2},{disabled:!1,type:q.date,image:!1,size:N.xs,name:"expiration_date",label:B.expiration_date,required:!1,xs:12,sm:6,lg:4,offset:{offsetAfterElement:{lg:4}},group:2},{disabled:!1,type:q.number,image:!1,size:N.xs,name:"on_stock",label:xt.on_stock,required:!1,xs:12,md:6,lg:2,group:2},{disabled:!1,type:q.number,image:!1,size:N.xs,name:"supply_days",label:Ce.delivery_days,required:!1,xs:12,md:6,lg:2,offset:{offsetAfterElement:{lg:4}},group:2},{disabled:!1,type:q.textarea,image:!1,size:N.xs,name:"description",label:Ce.description,required:!1,xs:12,lg:8,group:2}],groups:r}},mu=({onSubmit:e,donut:t})=>{const{fields:a,groups:r}=uu();return n("div",{className:"p-8",children:n(Le,{hasInitial:!0,...{fields:a,formId:"edit-donut",groups:r,groupGap:0,onSubmit:i=>e(i),initialValues:t}})})},hu=()=>{const[e]=Rc(),t=Ae(),{profile:a}=Ne();return{putDonut:async(s,o,i)=>{var c;if(a!=null&&a.tenant){const{id:l,logo:d,created_at:m,likes:h,liked:p,comments:f,commentable:b,likeable:y,...v}=o,C=d&&!Object.getOwnPropertyDescriptor(d,"url")?d:void 0,x=await e({id:s.toString(),body:{...v,...C&&{logo:C},tenant:a==null?void 0:a.tenant}});return t(An.util.invalidateTags(["Donuts"])),"data"in x&&((c=i==null?void 0:i.onSuccess)==null||c.call(i,x.data)),x}}}},pu=()=>{const{id:e}=Je(),{donut:t,isLoading:a,refetch:r}=ts(e),{putDonut:s}=hu();X(ne.DonutPreview,a);const o=[{key:"shop",link:T.Store,label:se.DONUTS,icon:n(Ma,{})},{key:e||"donut",label:(t==null?void 0:t.name)||"",icon:n(La,{})}];return g(O,{children:[n(dt,{items:o,className:"mb-3"}),n(ge,{children:n($e,{className:"m-3 p-3",children:t?n(mu,{donut:t,onSubmit:c=>{if(t)return s(t==null?void 0:t.id,{...c},{onSuccess:()=>r()})}}):null})})]})},gu=()=>n(pu,{}),ut=()=>{const e=Ae();return{navigateToLogin:()=>{e(pe(T[S.Login]))},navigateToSignUp:()=>{e(pe(T[S.Registration]))},navigateToRoot:()=>{e(pe("/"))},navigateToRestorePassword:()=>{e(pe(T[S.RequestRecover]))}}},fu=e=>{const{data:t,isLoading:a}=Ji({token:e},{skip:!e}),[r]=Qi(),[s]=Ua(),{showNotification:o}=De(),{translate:i}=w(),{navigateToRoot:c}=ut(),{setValue:l}=_t();return{confirm:()=>{e&&r({body:{token:e}}).then(m=>{"data"in m&&(o(i(M.confirmed,{capitalize:!0})),l("auth_token",m.data.auth_token),s().finally(()=>c()))})},user:t==null?void 0:t.data,isLoading:a}},bu="_box_um1te_1",yu={box:bu},vu=()=>{var i;const{token:e}=Je(),{user:t,confirm:a,isLoading:r}=fu(e),{navigateToLogin:s}=ut(),{translate:o}=w();return X(ne.ConfirmEmail,r),g(E,{className:yu.box,sx:{mt:8},children:[n(Zt,{style:{width:"110px",height:"50px"}}),(i=t==null?void 0:t.attributes)!=null&&i.email?g(O,{children:[n(R,{children:`${o(B.email_confirmation,{capitalize:!0})}:  ${t.attributes.email}`}),n(ee,{variant:"contained",sx:{mt:3,mb:2},onClick:a,children:o(M.confirm)})]}):g(O,{children:[n(R,{children:o(te.not_found,{capitalize:!0})}),n(ee,{variant:"contained",sx:{mt:3,mb:2},onClick:s,children:o(M.close)})]})]})},wu=()=>({fields:[{image:!1,size:N.xs,name:"email",label:"Email",xs:12,required:!0},{disabled:!1,image:!1,size:N.xs,name:"first_name",label:"Name",xs:12,md:6,required:!0},{disabled:!1,image:!1,size:N.md,name:"last_name",label:"Surname",xs:12,md:6,required:!0}]}),mt="Invitations",ns=ie.enhanceEndpoints({addTagTypes:[mt],endpoints:{getInvitationsMy:{providesTags:[mt]},postInvitationsByIdAccept:{invalidatesTags:[mt]},postInvitationsByIdDecline:{invalidatesTags:[mt]},postInvitations:{invalidatesTags:[mt]}}}),{useGetInvitationsMyQuery:lp,usePostInvitationsByIdAcceptMutation:Cu,usePostInvitationsByIdDeclineMutation:Su}=ns,_u="invitationLogic",as=e=>{const[t]=Cu(),[a]=Su(),[r]=zi(),{showNotification:s}=De(),{openLoader:o,closeLoader:i}=X(_u),{checkAuth:c,auth:l}=je();return{accept:()=>{if(e){const{id:p}=e;o(),t({id:p.toString()}).then(()=>c()).finally(()=>{i()})}},decline:()=>{if(e){const{id:p}=e;o(),a({id:p.toString()}).then(()=>c()).finally(()=>{i()})}},create:(p,f)=>{const{tenant:b}=l;p&&b&&(p!=null&&p.email)&&p.first_name&&p.last_name&&(o(),r({body:{first_name:p.first_name,last_name:p.last_name,email:p.email,tenant:b}}).then(y=>{"error"in y||(s(te.new_invitation_was_created),s(te.new_invitation_email_was_sent),f==null||f())}).finally(()=>{i()}))}}},On=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,xu=()=>{const{translate:e}=w();return{formSchema:it().shape({first_name:be().required(e(st.first_name)),last_name:be().required(e(ot.last_name)),email:be().required(e(B.email_address_must_be_valid,{capitalize:!0})).matches(On,e(B.email_address_must_be_valid,{capitalize:!0})).email(e(B.email_address_must_be_valid,{capitalize:!0}))})}},ku=()=>{const{fields:e}=wu(),{create:t}=as(),{t:a}=w(),{formSchema:r}=xu(),s=ct(r),o={fields:e,formId:"create-invitation",resolver:s},i=c=>{t(c)};return n("div",{className:"p-5",children:g(_,{maxWidth:400,border:1,borderRadius:2,padding:2,children:[n(R,{variant:"h6",children:a(te.new_invitation,{capitalize:!0})}),n(Le,{...o,onSubmit:i})]})})},Tu=()=>n(_,{direction:"column",className:"height-100",children:n(Ke,{className:"flex-grow scroll",children:n(ku,{})})}),Eu=()=>{const{id:e}=Je();return n(_,{direction:"column",className:"height-100 width-100",alignItems:"center",children:n(qr,{postId:e})})},oa=(e,t,a,r)=>{const s=ja(e.getValue(t),a);return r({itemRank:s}),s.passed},Pu=({column:e,table:t})=>{var i;const a=t.getPreFilteredRowModel().flatRows.length,r=(i=t.getPreFilteredRowModel().flatRows[0])==null?void 0:i.getValue(e.id),{translate:s}=w(),o=e.getFilterValue();return typeof r=="number"?g(ue,{direction:"row",className:"bnt-table-filter",gap:2,children:[n(qt,{type:"number",value:(o==null?void 0:o[0])??"",onChange:c=>e.setFilterValue(l=>[c.target.value,l==null?void 0:l[1]]),placeholder:"Min",variant:"standard"}),n(qt,{type:"number",value:(o==null?void 0:o[1])??"",onChange:c=>e.setFilterValue(l=>[l==null?void 0:l[0],c.target.value]),placeholder:"Max",variant:"standard"})]}):n(qt,{className:"bnt-table-filter",value:o??"",onChange:c=>e.setFilterValue(c.target.value),placeholder:`${s(j.search,{capitalize:!0})}...${a} ${s(ce.records,{count:a})}`,variant:"standard",shouldTranslate:!1})},Au=({columns:e,data:t,className:a,pageSize:r=5,isVirtual:s=!1,estimateSize:o,hasNext:i=!1,isFetching:c=!1,fetchNext:l=I,virtualOverscan:d=100})=>{const[m,h]=u.useState([]),[p,f]=u.useState(""),[b,y]=u.useState([]),v=tt.useRef(null),C=fe(),x=oe(C.breakpoints.down("sm")),P=gi({data:t,columns:e,filterFns:{fuzzy:oa},initialState:{pagination:{pageSize:r,pageIndex:0}},state:{columnFilters:m,globalFilter:p,sorting:b},onColumnFiltersChange:h,onGlobalFilterChange:f,globalFilterFn:oa,getCoreRowModel:yi(),getFilteredRowModel:vi(),getSortedRowModel:wi(),getPaginationRowModel:s?void 0:Ci(),getFacetedRowModel:Si(),getFacetedUniqueValues:_i(),getFacetedMinMaxValues:xi(),onSortingChange:y}),{translate:z}=w(),J=[5,10,20,25,50,100],{rows:G}=P.getRowModel(),re=fi({getScrollElement:()=>v==null?void 0:v.current,count:G.length,overscan:d,estimateSize:()=>o||(x?200:100),rangeExtractor:A=>bi({...A,startIndex:A.startIndex%2===0?A.startIndex:Math.max(0,A.startIndex-1)})}),$=tt.useCallback(A=>{if(A){const{scrollHeight:K,scrollTop:D,clientHeight:he}=A;K-D-he<300&&!c&&i&&l()}},[l,c,i]);tt.useEffect(()=>{$(v.current)},[$]);const F=re.getVirtualItems(),[Y,Z]=F.length>0?[F[0].start,re.getTotalSize()-F[F.length-1].end]:[0,0];return g(Ao,{sx:{boxShadow:"none",height:"100%",overflow:"auto"},className:a,onScroll:A=>$(A.target),ref:v,children:[g(Io,{stickyHeader:!0,children:[n(Do,{children:P.getHeaderGroups().map((A,K)=>n(It,{children:A.headers.map(D=>g(Dt,{component:"th",scope:"row",colSpan:D.colSpan,className:V("bnt-table-th bnt-table-header",`-sort-${D.column.getIsSorted()}`,{"-cursor-pointer":A.headers.length-1!==K}),children:[D.isPlaceholder?null:g(ue,{direction:"row",alignItems:"center",gap:2,className:"sorter",onClick:D.column.getToggleSortingHandler(),children:[Yn(D.column.columnDef.header,D.getContext()),D.column.getCanSort()&&g(ue,{className:V(`sort-${D.column.getIsSorted()}`),children:[n(No,{className:V("sort-icon","sort-icon__asc")}),n(Ro,{className:V("sort-icon","sort-icon__desc")})]})]}),D.column.getCanFilter()?n("div",{children:n(Pu,{column:D.column,table:P})}):null]},D.id))},A.id))}),g(Mo,{children:[Y>0&&n(It,{children:n(Dt,{style:{height:`${Y}px`}})}),F.map((A,K)=>{const D=G[A.index];return n(It,{ref:s?re.measureElement:void 0,"data-index":K,className:V("bnt-table-tr",{"bnt-table-tr-odd":K%2===0},{"bnt-table-tr-even":K%2===1}),children:D.getVisibleCells().map(he=>n(Dt,{children:Yn(he.column.columnDef.cell,he.getContext())},he.id))},D.id)}),Z>0&&n(It,{children:n(Dt,{style:{height:`${Z}px`}})})]})]}),t.length&&!s?n("div",{className:"bnt-table-footer",children:g(ue,{direction:"row",gap:2,justifyContent:"space-between",alignItems:"stretch",flexWrap:{xs:"wrap",sm:"nowrap"},children:[n(He,{disabled:!P.getCanPreviousPage(),className:"bnt-navigation-button",onClick:()=>P.previousPage(),children:z(W.previous,{capitalize:!0})}),g(k,{container:!0,gap:2,justifyContent:"center",children:[n(k,{item:!0,xs:12,sm:5,md:4,children:n(ln,{fullWidth:!0,children:n(Vn,{value:P.getState().pagination.pageIndex,onChange:A=>{P.setPageIndex(Number(A.target.value))},inputProps:{name:"pageSelect",id:"page-select"},variant:"standard",children:P.getPageOptions().map((A,K)=>g(Gn,{value:A,children:[z("Page")," ",K+1]},A))})})}),n(k,{item:!0,xs:12,sm:5,md:4,children:n(ln,{fullWidth:!0,children:n(Vn,{value:P.getState().pagination.pageSize,onChange:A=>{P.setPageSize(Number(A.target.value))},inputProps:{name:"numberOfRows",id:"number-of-rows"},variant:"standard",children:J.map(A=>g(Gn,{value:A,children:[A," ",z("rows")]},A))})})})]}),n(He,{disabled:!P.getCanNextPage(),className:"bnt-navigation-button",onClick:()=>P.nextPage(),children:z(te.next,{capitalize:!0})})]})}):null]})},zn=H(Au,{})(({theme:e})=>({overflowX:"unset","& table":{border:0},"& tbody":{border:0},"& td":{border:0,...e.typography.body2,paddingLeft:0,paddingRight:0,fontSize:"1.1rem",color:e.palette.grey[800]},"& tr":{border:0},"& input":{border:0},[L("bnt-table-th")]:{minWidth:"60px",padding:"4px"},[L("bnt-table-filter")]:{width:"100%"},[L("bnt-table-tr-even")]:{background:e.palette.grey[100]},[L("bnt-table-tr")]:{[Ac]:{background:e.palette.grey[200]}},[L("bnt-navigation-button")]:{width:"50%",[e.breakpoints.down("sm")]:{width:"100%"}},[L("bnt-table-header")]:{border:0,borderColor:e.palette.grey[400],...e.typography.h6,marginBottom:"24px","& input":{width:"100%"},"& .sorter":{"&:hover":{color:e.palette.primary.dark,cursor:"pointer"}},"& .sort-icon":{opacity:.2},"& .sort-asc":{"& .sort-icon__asc":{color:e.palette.primary.dark,opacity:1}},"& .sort-desc":{"& .sort-icon__desc":{color:e.palette.primary.dark,opacity:1}}},[L("bnt-table-footer")]:{marginTop:"24px",paddingLeft:"16px"}}));var rs=(e=>(e.CellString="CellString",e.CellNumber="CellNumber",e.CellAction="CelleAction",e))(rs||{}),ss=(e=>(e.StringHeader="StringHeader",e.ActionHeader="ActionHeader",e))(ss||{}),Be=(e=>(e.Edit="Edit",e.Accept="Accept",e.Decline="Decline",e.Create="Create",e.Delete="Delete",e))(Be||{});const Iu=({value:e})=>n("div",{className:"pl-3",children:e}),Du=e=>e.cell?e.cell:a=>{const{getValue:r}=a;switch(e.cellType){default:return n(Iu,{value:r()})}},Nu=(e,t)=>{var r,s;const a=t||(o=>o);return(r=e.header)!=null&&r.value?ve.isString((s=e.header)==null?void 0:s.value)?a(e.header.value):e.header.value:a(e.accessor)},Ru=e=>{switch(e){case Be.Accept:return n(Ba,{color:"primary"});case Be.Decline:return n(qa,{color:"error"});case Be.Create:return n(Aa,{color:"primary"});case Be.Delete:return n(Pa,{});case Be.Edit:return n(Ra,{});default:return n(wn,{})}},ia=({rowId:e,actions:t})=>n(ue,{direction:"row",children:t.map(a=>n(ye,{onClick:()=>{var r;return(r=a.onClick)==null?void 0:r.call(a,e)},sx:e?{}:{border:"0.5px solid"},children:Ru(a.actionType)}))}),Mu=e=>{const t=Cn(),{translate:a}=w(),r=u.useMemo(()=>e.columns.map(i=>{const c=i.accessor;return t.accessor(c,{cell:Du(i),header:()=>Nu(i,l=>a(l,{capitalize:!0})),enableSorting:i.enableSorting,enableColumnFilter:i.enableColumnFilter,...i.filterFn?{filterFn:i.filterFn}:null})}),[e,t]),s=u.useMemo(()=>{if(e.actions||e.headerActions){const i=e.actions||{},c=e.headerActions||{};return[t.accessor("actions",{cell:l=>n(ia,{rowId:l.row.original.id,actions:Object.values(i)}),header:Object.values(c).length?()=>n(ia,{actions:Object.values(c)}):"",enableSorting:!1,enableColumnFilter:!1})]}return[]},[e]);return{tableConfig:u.useMemo(()=>[...r,...s],[s,r]),columnsConfig:r,actionsConfig:s}},Lu=()=>{const{CreateCircle:e}=Se(),{t}=w();return{showCreateCircleModal:()=>{e.show({title:t(te.new_circle,{capitalize:!0})})}}},qu=()=>{const{translate:e}=w(),{showCreateCircleModal:t}=Lu(),{deleteCircle:a}=Cr(),{ConfirmationModal:r,EditCircle:s}=Se(),o=d=>{d&&r.show({text:e(U.are_you_sure_to_delete,{capitalize:!0}),onSubmit:()=>a(d),title:e(M.confirmation,{capitalize:!0})})},i=d=>{d&&s.show({title:e(B.edit,{capitalize:!0}),circleId:d})},c=u.useMemo(()=>({columns:[{accessor:"name",cellType:rs.CellString,enableSorting:!0,enableColumnFilter:!0,header:{headerType:ss.StringHeader,value:e(te.name,{capitalize:!0})}}],actions:{edit:{onClick:d=>i(d),actionType:Be.Edit},delete:{onClick:d=>o(d),actionType:Be.Delete}},headerActions:{create:{onClick:t,actionType:Be.Create}}}),[]),{tableConfig:l}=Mu(c);return{tableConfig:l}},Bu=({circles:e})=>{var r,s,o,i,c,l,d,m,h,p,f,b;const{tableConfig:t}=qu(),a=[{key:"settings",link:(r=de.routes[S.Settings])==null?void 0:r.path,label:((s=de.routes[S.Settings])==null?void 0:s.navbarName)||"settings",icon:(o=de.routes[S.Settings])==null?void 0:o.icon},{key:((l=(c=(i=de.routes[S.Settings])==null?void 0:i.children)==null?void 0:c.Circles)==null?void 0:l.path)||"circles",label:((h=(m=(d=de.routes[S.Settings])==null?void 0:d.children)==null?void 0:m.Circles)==null?void 0:h.navbarName)||Q.EMPTY_STRING,icon:(b=(f=(p=de.routes[S.Settings])==null?void 0:p.children)==null?void 0:f.Circles)==null?void 0:b.icon}];return g(_,{direction:"column",sx:{height:"100%",overflow:"hidden"},children:[n(dt,{items:a}),n(Ke,{className:"flex-grow scroll",children:n(zn,{columns:t,data:e})})]})},Ou=()=>{const{objects:e,isLoading:t}=Zr();return X(ne.Circles,t),n(Bu,{circles:e})},zu=()=>n(Ou,{}),Fu=lt.enhanceEndpoints({addTagTypes:["Request"],endpoints:{}}),Hu=({archive:e,active:t,incoming:a,my:r})=>Ye({endpoint:Fu.endpoints.getRequests,args:{page:1,archive:e,active:t,incoming:a,my:r},pollingInterval:1e4,translator:Qt.toRequests}),ju=({donut:e,onClick:t})=>{var a,r;return n(He,{onClick:t,disableRipple:!0,startIcon:n(Ue,{src:((r=(a=e.logo)==null?void 0:a.thumb)==null?void 0:r.url)||void 0,alt:`${e.name} `}),children:n(Me,{variant:"body2",children:e.name&&n("span",{children:e.name})})})},$u=()=>({getFormattedDate:t=>t}),Wu=({profile:e,donut:t,datetime:a})=>{const{translate:r}=w(),s=fe(),o=oe(s.breakpoints.down("sm")),{getFormattedDate:i}=$u();return g(k,{container:!0,className:o?"pl-3":"pl-1",children:[n(k,{item:!0,children:g(_,{direction:"row",alignItems:"center",children:[t&&n(ju,{donut:t,onClick:I}),n(R,{variant:"body2",color:"grey.dark",className:o?"pl-3":Q.EMPTY_STRING,children:r(ae.to)})]})}),n(k,{item:!0,children:g(_,{direction:"row",alignItems:"center",children:[e&&n(Ct,{profile:e,onClick:I}),n(R,{variant:"body2",color:"grey",className:o?"pl-3":Q.EMPTY_STRING,children:a?i(a):null})]})})]})},Uu=({onCheckClick:e,onRollbackClick:t,hideCheck:a,hideRollback:r,checkTooltip:s,rollbackTooltip:o})=>g(ue,{direction:"row",children:[!a&&n(Fe,{title:s,hidden:!s,children:n(ye,{onClick:()=>e(),children:n(Ba,{color:"primary"})})}),!r&&n(Fe,{title:o,hidden:!o,children:n(ye,{onClick:()=>t(),children:n(qa,{color:"error"})})})]}),Vu=(e,t,a,r)=>{var o,i;const s=ja(`${(o=e.original.donut)==null?void 0:o.name} ${(i=e.original.profile)==null?void 0:i.name} ${e.original.created_at}`,a);return r({itemRank:s}),s.passed},Gu=e=>{const{onRollback:t=I,onCheck:a=I,hideActions:r=!1,checkRollbackEnabled:s,checkCheckEnabled:o,checkTooltip:i,rollbackTooltip:c}=e,{translate:l}=w(),d=Cn();return{tableConfig:u.useMemo(()=>[d.accessor("donut.name",{cell:h=>n(Wu,{donut:h.row.original.donut,profile:h.row.original.profile,datetime:h.row.original.created_at}),header:l(ce.requests,{capitalize:!0}),footer:h=>h.column.id,enableSorting:!0,filterFn:Vu}),d.accessor("actions",{cell:h=>{const p=s&&!s(h.row.original),f=o&&!o(h.row.original);return n(Uu,{checkTooltip:i,rollbackTooltip:c,hideCheck:!a||r||f,hideRollback:!t||r||p,onCheckClick:()=>a(h.row.original.id),onRollbackClick:()=>t(h.row.original.id)})},header:"",enableSorting:!1,enableColumnFilter:!1})],[])}},Et=({active:e,archive:t,incoming:a,my:r,onRollback:s=I,onCheck:o=I,hideActions:i=!1,checkRollbackEnabled:c,checkCheckEnabled:l,hideBreadCrumbs:d,rollbackTooltip:m,checkTooltip:h})=>{const{objects:p,isLoading:f,refetch:b}=Hu({active:e,archive:t,incoming:a,my:r}),y=J=>{s(J,{onSuccess:b})},v=J=>{o(J,{onSuccess:b})},{tableConfig:C}=Gu({onCheck:v,onRollback:y,hideActions:i,checkRollbackEnabled:c,checkCheckEnabled:l,rollbackTooltip:m,checkTooltip:h});X(ne.Requests,f);const x=t?M.closed_requests:e?U.activated:ze.incoming,P=t?n(Oa,{}):e?n(za,{}):n(Ot,{}),z=[{key:ce.requests,link:T.Requests,label:ce.requests,icon:n(Ot,{})},{key:x,label:x,icon:P}];return g(_,{direction:"column",sx:{height:"100%",overflow:"hidden"},children:[!d&&n(dt,{items:z}),n(Ke,{className:"flex-grow scroll",children:n(zn,{columns:C,data:p,isVirtual:!0,estimateSize:100})})]})},tn=()=>{const{authTenant:e,invalidateSelfBalance:t,profile:a}=Ne(),[r]=ji(),[s]=$i(),[o]=Wi(),[i]=Vi(),[c]=Ui(),{showNotification:l}=De();return{createRequest:async(b,y)=>{const{donut:v}=b;e&&r({body:{donut_id:v==null?void 0:v.id,tenant:e}}).unwrap().then(C=>{var x;(x=y==null?void 0:y.onSuccess)==null||x.call(y,C),t(),l(ce.request_added)})},activateRequest:(b,y)=>{s({body:{id:b,tenant:e}}).unwrap().then(v=>{var C;(C=y==null?void 0:y.onSuccess)==null||C.call(y,v),l(ce.request_been_set_active)})},refundRequest:(b,y)=>{o({body:{id:b,tenant:e}}).unwrap().then(v=>{var C,x;(C=y==null?void 0:y.onSuccess)==null||C.call(y,v),(x=v==null?void 0:v.data)!=null&&x.some(P=>{var z;return((z=P==null?void 0:P.attributes)==null?void 0:z.profile.id)===(a==null?void 0:a.id)})&&t(),l(ce.request_has_been_refunded)})},closeRequest:(b,y)=>{i({body:{id:b,tenant:e}}).unwrap().then(v=>{var C;(C=y==null?void 0:y.onSuccess)==null||C.call(y,v),l(ce.request_been_set_closed)})},rollbackRequest:(b,y)=>{c({body:{id:b,tenant:e}}).unwrap().then(v=>{var C;(C=y==null?void 0:y.onSuccess)==null||C.call(y,v),l(ce.request_been_set_incoming)})}}},Yu=()=>{const{rollbackRequest:e,closeRequest:t}=tn();return n(Et,{onRollback:e,onCheck:t,active:!0})},Ku=()=>n(Yu,{}),Qu=e=>n(Lo,{...e}),Ju=(e,t)=>({id:`bnt-tab${t?`-${t}`:Q.EMPTY_STRING}-${e}`,"aria-controls":`bnt-tab-panel${t?`-${t}`:Q.EMPTY_STRING}-${e}`}),ca=({prefix:e,tabValue:t,...a})=>n(qo,{...a,...Ju(t,e)}),la=e=>{const{children:t,value:a,index:r,...s}=e;return n("div",{role:"tabpanel",hidden:a!==r,id:`bnt-tabpanel-${r}`,"aria-labelledby":`bnt-tab-${r}`,...s,children:a===r&&n(E,{children:t})})},Zu=()=>{const{refundRequest:e}=tn(),{t}=w();return n(Et,{active:!0,incoming:!0,my:!0,onRollback:e,checkRollbackEnabled:a=>a.status===0,checkCheckEnabled:()=>!1,hideBreadCrumbs:!0,rollbackTooltip:t(M.cancel,{capitalize:!0})})},Xu=()=>n(Et,{archive:!0,my:!0,hideActions:!0,hideBreadCrumbs:!0}),em=()=>{const{translate:e}=w(),[t,a]=u.useState(0);return g(_,{direction:"column",className:"height-100",children:[g(Qu,{value:t,onChange:(s,o)=>{a(o)},indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"requests tabs",children:[n(ca,{label:e(U.active_request),tabValue:0}),n(ca,{label:e(M.closed_requests),tabValue:1})]}),g(Ke,{className:"flex-grow scroll",children:[n(la,{value:t,index:0,children:n(Zu,{})}),n(la,{value:t,index:1,children:n(Xu,{})})]})]})},tm=()=>n(em,{}),nm=()=>n(Et,{archive:!0,hideActions:!0}),am=()=>n(nm,{}),rm=()=>{const{refundRequest:e,activateRequest:t}=tn();return n(Et,{onRollback:e,onCheck:t,incoming:!0})},sm=()=>n(rm,{}),om=H(Me,{shouldForwardProp:()=>!0})(({theme:e})=>({display:"block",color:e.palette.grey.A700,fontSize:"14px",fontWeight:"bold"})),im=H(Me,{shouldForwardProp:()=>!0})(()=>({fontSize:"18px",fontWeight:"bold"})),cm=({donut:e})=>{const{createRequest:t}=tn(),{t:a}=w(),{BonutsCurrency:r}=Tt(),s=()=>{t({donut:e})};return g(ge,{raised:!0,children:[n(im,{className:"ml-5 mt-2",children:g(_,{direction:"row",children:[e.price," ",n(r,{})]})}),e.on_stock?g(om,{className:"ml-5",children:[a(xt.on_stock),": ",e.on_stock]}):null,e.on_stock===0&&e.supply_days?g(R,{children:[a(se.Delivery_days),": ",e.supply_days," "]}):null,(e==null?void 0:e.has_remains)&&n("div",{className:"m-5",children:n(jr,{onClick:s,className:"width-100",children:a(se.Buy)})})]})},lm=()=>{var d,m;const{id:e}=Je(),t=fe(),a=oe(t.breakpoints.down("sm")),{donut:r,isLoading:s}=ts(e),{translate:o}=w(),{ImageModal:i}=Se();X(ne.DonutPreview,s);const c=()=>{var h;i.show({url:((h=r==null?void 0:r.logo)==null?void 0:h.url)||$t,title:r==null?void 0:r.name})},l=[{key:T[S.Donuts],link:T[S.Donuts],label:se.DONUTS,icon:n(Bo,{})},{key:e||"donut",label:(r==null?void 0:r.name)||"",icon:n(La,{})}];return g(O,{children:[n(dt,{items:l,className:"mb-3"}),n(ge,{children:n($e,{className:"m-3 p-3",children:g(k,{container:!0,justifyContent:"space-between",children:[n(k,{item:!0,xs:12,sm:8,md:4,lg:3,xl:2,className:V("",{"text-align-center":a}),children:n(Kt,{defaultImage:(d=r==null?void 0:r.logo)!=null&&d.url?void 0:$t,image:(m=r==null?void 0:r.logo)==null?void 0:m.url,className:"ml-3",onClick:c})}),g(k,{item:!0,xs:12,sm:12,md:5,lg:7,order:{xs:3,md:2},children:[n(R,{variant:"h3",display:"block",children:r==null?void 0:r.name}),n(R,{variant:"h5",children:o(se.Description)}),n(R,{paragraph:!0,isPreformatted:!0,children:r==null?void 0:r.description})]}),n(k,{item:!0,xs:12,sm:4,md:3,lg:2,order:{xs:2,md:3},children:r&&n(cm,{donut:r})})]})})})]})},dm=()=>n(lm,{}),um=()=>{const{translate:e}=w(),t=Cn(),{showEmployeeModal:a}=Ze();return{tableConfig:u.useMemo(()=>[t.accessor("to_profile.name",{cell:s=>s?n(Tr,{className:"pl-2",operation:s==null?void 0:s.row.original,showDateTime:!0,onFromProfileClick:o=>{o.from_profile&&a(o.from_profile.id)},onToProfileClick:o=>{o.to_profile&&a(o.to_profile.id)}}):n("div",{}),header:e(Tn.history,{capitalize:!0}),footer:s=>s.column.id,enableSorting:!1,enableColumnFilter:!1})],[])}};function mm(e,t,a,r){const s=Ae(),o=me(A=>A.api.queries),{page:i,...c}=t,[l,d]=u.useState(c),[m,h]=u.useState([]),[p,f]=u.useState([]),[b,y]=u.useState(),[v,C]=u.useState(0),[x,P]=u.useState(!1),[z,J]=u.useState(!1),{data:G,isLoading:re,isSuccess:$}=e.useQuery({...t,page:1},{pollingInterval:0,refetchOnMountOrArgChange:!0,skip:r});u.useEffect(()=>{var A,K;if(G){const D=G,he=(A=D==null?void 0:D.paginator)!=null&&A.perPage?D.paginator.perPage:1,Pt=((K=D==null?void 0:D.paginator)==null?void 0:K.total)||0;J(v<Pt/he)}},[v,G]),u.useEffect(()=>{C(t.page)},[]),u.useEffect(()=>()=>{p.forEach(A=>A.unsubscribe())},[p]);const F=u.useCallback(()=>{C(v+1)},[C,v]);u.useEffect(()=>{if(v>1){const A=s(e.initiate({...t,page:v}));f([...p,A])}},[v]),u.useEffect(()=>{if(v>1){const A=Yt.getState(),K={};for(let D=2;D<=v;D++){const{data:he}=e.select({...t,page:D})(A);if(!he)break;if(G){const Pt=he;Oo(m[D],Pt)||(K[D]=Pt)}}Object.keys(K).length&&h({...m,...K})}},[o,p,t]),u.useEffect(()=>{$&&(Object.keys(m).length<=1||!ve.isEqual(c,l)?(d(c),C(1),h({1:G})):h({...m,1:G}))},[G,$]),u.useEffect(()=>{b||P(!1)},[b]);const Y=u.useCallback(()=>{b&&(C(1),h([b]),y(void 0))},[m,b]),Z=u.useMemo(()=>m,[m]);return{endpoint:e,pages:m,paginatedPages:Z,isLoading:re&&v===1,isFetching:re,fetchNext:F,currentPage:v,hasNew:x,applyUpdates:Y,hasNext:z}}const os=e=>{const{endpoint:t,args:a,pollingInterval:r=1e3,translator:s=C=>C,skip:o}=e,[i,c]=u.useState([]),l=me(Te),{hasNext:d,pages:m,isLoading:h,fetchNext:p,hasNew:f,applyUpdates:b,isFetching:y}=mm(t,{...a,tenant:l},r,o);u.useEffect(()=>{m||c(()=>[]);const C=Object.values(m).reduce((x,P)=>(x.push(s(P)),x),[]);ve.isEqual(i,C)||c(C)},[m]);const v=u.useMemo(()=>i.reduce((C,x)=>[...C,...x],[]),[i]);return{hasNext:d,pages:i,isLoading:h,fetchNext:p,hasNew:f,applyUpdates:b,flatData:v,isFetching:y}},hm=e=>{const{id:t}=e;return os({endpoint:Ht.endpoints.getAccountOperations,args:{accountId:t.toString(),page:1},skip:!t,pollingInterval:1e4,translator:Qt.toOperations})},pm=({accountId:e})=>{const{tableConfig:t}=um(),{hasNext:a,flatData:r,isLoading:s,fetchNext:o,isFetching:i}=hm({id:e});return X(ne.Events,s),n(zn,{columns:t,data:r,isVirtual:!0,estimateSize:100,fetchNext:o,isFetching:i,hasNext:a})},gm=()=>{const{id:e}=Je(),t=Number(e);return n(_,{direction:"column",sx:{height:"100%",overflow:"hidden"},children:n(Ke,{className:"flex-grow scroll",children:n(pm,{accountId:t})})})},fm=({showMine:e=!1,searchText:t=void 0})=>os({endpoint:at.endpoints.getEvents,args:{showMine:e?"true":"false",searchText:t,page:1},pollingInterval:1e4,translator:Qt.toPosts}),bm=()=>{var v;const{translate:e}=w(),t=oe("(min-width:1980px)"),a=fe(),r=oe(a.breakpoints.down("md")),[s,o]=u.useState(),[i,c]=u.useState(!1),{hasNext:l,pages:d,isLoading:m,fetchNext:h,hasNew:p,applyUpdates:f}=fm({showMine:i,searchText:s}),b=C=>{C.preventDefault(),h()};X(ne.Events,m);const y=!((v=d[0])!=null&&v.length);return g(_,{direction:"column",className:V("height-100 pb-2"),children:[n(_,{direction:"row",gap:2,justifyContent:"space-bwteen",alignItems:"center",children:d.length>0?g(O,{children:[n(Xt,{setSearch:o,debounceDelay:500,className:"flex-grow"}),n(zo,{control:n(Fo,{}),label:e(j.show_only_mine),onChange:(C,x)=>{c(x)}})]}):null}),g(E,{className:V("flex-grow pb-2 mt-2",{"pr-12":!r,scroll:!y}),sx:{overflowY:r&&y?"hidden":void 0},children:[p&&n(ee,{onClick:f,children:se.REFRESH}),n(k,{container:!0,rowSpacing:{xs:2},columnSpacing:{xs:1,sm:2,md:3},children:d.length>0&&Object.values(d).map(C=>C&&C.map(x=>n(k,{item:!0,xs:12,sm:12,md:6,lg:t?4:6,children:n(Er,{post:x})},x.id)))}),y?g(_,{alignItems:"center",justifyContent:"center",sx:{height:r?"300px":"40%",overflowY:r?"hidden":void 0},children:[n(Ho,{sx:{height:"100px",width:"100px"}}),n(R,{children:e(B.empty_events_placeholder,{capitalize:!0})})]}):null,l&&d.length>0&&n(ee,{onClick:b,children:e(se.MORE)})]})]})},ym=H(ge,{shouldForwardProp:()=>!0})(({theme:e})=>({background:`linear-gradient(60deg, ${e.palette.secondary.light},${e.palette.secondary.veryLight})`})),is=({title:e,value:t,lastOperation:a,name:r,balance:s,onClick:o})=>{const{formatDate:i}=kr(),{t:c}=w();return g(_,{children:[g(_,{direction:"row",gap:1,children:[g(R,{display:"block",color:"grey.700",children:[e,":"]}),g(_,{direction:"row",children:[n(R,{display:"block",color:"grey.main",className:"mr-1",children:s}),t]})]}),n(ee,{sx:{width:"fit-content"},onClick:o,children:n(R,{variant:"caption",color:"grey.700",textTransform:"none",children:n(_,{direction:"row",children:a?`${a==null?void 0:a.direction}${a==null?void 0:a.amount} ${r?c(r,{count:a.amount}):Q.EMPTY_STRING} ${i(a==null?void 0:a.date_utc)}`:"..."})})})]})},vm=({profile:e})=>{var c;const{t}=w(),a=(c=e==null?void 0:e.distrib_account)==null?void 0:c.id,{account:r,isLoading:s}=vt(a),{toEmployeeList:o,toDistribBalanceHistory:i}=Ze(e);return g(_,{gap:1,children:[n(is,{title:t(ze.i_can_share,{capitalize:!0}),balance:r==null?void 0:r.balance,value:s?"...":g(O,{children:[t("donut",{count:r==null?void 0:r.balance}),"(",n(wn,{color:"primary"}),")"]}),name:"donut",lastOperation:r==null?void 0:r.last_operation,onClick:i}),n(E,{children:n(Ge,{variant:"contained",onClick:o,children:t(j.share,{capitalize:!0})})})]})},cs=e=>{const t=Ae(),{CreateDonut:a}=Se(),{t:r}=w();return{showDonut:l=>{(l||e)&&t(pe(`/d/${l||(e==null?void 0:e.id)}`))},editDonut:l=>{(l||e)&&t(pe(`/donut_edit/${l||(e==null?void 0:e.id)}`))},showCreateDonutModal:()=>{a.show({title:r(te.new_donut,{capitalize:!0})})},toStore:()=>{t(pe(T[S.Donuts]))}}},wm=({profile:e})=>{var l;const{t}=w(),{BonutsCurrency:a}=Tt(),r=(l=e==null?void 0:e.self_account)==null?void 0:l.id,{account:s,isLoading:o}=vt(r),{toStore:i}=cs(),{toSelfBalanceHistory:c}=Ze(e);return g(_,{gap:1,children:[n(is,{title:t(ze.i_can_spend,{capitalize:!0}),balance:s==null?void 0:s.balance,value:o?"...":g(O,{children:[t("point",{count:s==null?void 0:s.balance}),"(",n(a,{}),")"]}),name:"point",lastOperation:s==null?void 0:s.last_operation,onClick:c}),n(E,{children:n(Ge,{variant:"contained",onClick:i,children:t(ae.to_store,{capitalize:!0})})})]})},da=({accountType:e})=>{const{profile:t}=Ne();return t?n(ym,{className:"p-2 width-100",sx:{maxWidth:700},children:e==="distrib"?n(vm,{profile:t}):n(wm,{profile:t})}):null},Cm=()=>{const e=fe(),t=oe(e.breakpoints.down("md"));return g(k,{container:!0,flexDirection:t?"column-reverse":"row",gap:t?2:0,className:V({"height-100":!t}),children:[n(k,{item:!0,xs:12,sm:12,md:8,lg:9,className:"height-100",children:n(bm,{})}),n(k,{item:!0,xs:12,sm:12,md:4,lg:3,children:n(_,{direction:"row",justifyContent:"flex-end",className:V("width-100",{"pl-2":!t}),children:g(_,{gap:2,className:"width-100",children:[n(da,{accountType:"self"}),n(da,{accountType:"distrib"})]})})})]})},gt={sorterByName:(e,t)=>(e==null?void 0:e.name.toLowerCase())>(t==null?void 0:t.name.toLowerCase())?1:(e==null?void 0:e.name.toLowerCase())<(t==null?void 0:t.name.toLowerCase())?-1:0,sorterByPriceAsc:(e,t)=>((e==null?void 0:e.price)||0)-((t==null?void 0:t.price)||0),sorterByPriceDesc:(e,t)=>((t==null?void 0:t.price)||0)-((e==null?void 0:e.price)||0),sorterByDate:(e,t)=>new Date((t==null?void 0:t.created_at)||0).getTime()-new Date((e==null?void 0:e.created_at)||0).getTime()},Sm=e=>Ye({endpoint:An.endpoints.getDonuts,args:{all:e?"true":"false",page:1},translator:Pr}),Ie={donutCard:"donut-card",cardHover:"card-hover",cardHeaderHover:"card-header-hover",cardActions:"card-actions",cardBody:"card-body",remains:"remains",logo:"logo",cardTitle:"card-title",captions:"captions"},Fn=e=>n(jo,{...e}),_m=({donut:e,className:t,onDonutClick:a})=>{var d;const{translate:r}=w(),{BonutsCurrency:s}=Tt(),{on_stock:o=0,logo:i,price:c,name:l}=e;return n(ge,{raised:!0,className:V(Ie.donutCard,t),children:n(Fn,{onClick:a,className:Ie.cardHover,children:g($e,{className:`${Ie.cardBody} m-10`,children:[g(_,{direction:"column",justifyContent:"space-between",alignItems:"center",spacing:3,children:[n("div",{className:Ie.cardHeaderHover,children:n("img",{src:((d=i==null?void 0:i.thumb)==null?void 0:d.url)||$t,alt:"...",className:Ie.logo})}),g("div",{className:Ie.captions,children:[n(R,{variant:"body1",children:g(_,{direction:"row",children:[r("Price"),": ",c,n(s,{})]})}),n(R,{children:l})]})]}),o>0&&g("div",{className:Ie.remains,children:[r(xt.on_stock),": ",o]})]})})})},xm=H(_m,{})(({theme:e})=>({backgroundColor:e.palette.secondary.veryLight,maxWidth:300,color:e.palette.neutral.dark,margin:"auto","& img":{boxShadow:"0px 0px 48px rgba(255, 255, 255, 0.8)",maxHeight:"100px"},"&:hover":{outline:"2px solid",outlineColor:e.palette.primary.light,"& img":{transform:"translate3d(0, -3px, 2px)",transition:"all 500ms cubic-bezier(0.34, 1.61, 0.7, 1)"}},[L(Ie.remains)]:{position:"absolute",top:"5px",right:"5px",color:e.palette.error.main,backgroundColor:e.palette.secondary.light,borderRadius:"3px",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.14)"},[L(Ie.cardBody)]:{display:"flex",justifyContent:"center",minHeight:200},[L(Ie.captions)]:{display:"flex",flexDirection:"column",gap:"12px",alignItems:"center",textAlign:"center"},[L(Ie.cardHeaderHover)]:{display:"flex",flexDirection:"column",height:"100%",alignItems:"center",justifyContent:"center"}})),km=({donut:e})=>{const{showDonut:t}=cs(e);return n(xm,{donut:e,onDonutClick:()=>{t()}})},Tm=({setSorter:e,setSearch:t,setFilter:a})=>{const r=[{name:Qe.PRICE_ASC,sorter:gt.sorterByPriceAsc},{name:Qe.PRICE_DESC,sorter:gt.sorterByPriceDesc},{name:Qe.SORT_BY_ALPHABET,sorter:gt.sorterByName},{name:Qe.NEWEST,sorter:gt.sorterByDate}];return n(Xt,{setSearch:t,setFilter:a,setSorter:e,buttons:r})},Em=()=>{const[e,t]=u.useState(""),[a,r]=u.useState([]),[s,o]=u.useState(()=>gt.sorterByName),{objects:i=[],isLoading:c}=Sm(),l=h=>{r(h)},d=h=>{o(()=>h)};X(ne.Donuts,c);const m=u.useMemo(()=>i.filter(h=>h.name&&h.name.toLowerCase().indexOf(e.toLowerCase())>=0).sort(s),[e,a,i,s]);return g(O,{children:[n(Tm,{setSearch:t,setFilter:l,setSorter:d}),n(k,{container:!0,rowSpacing:{xs:2},columnSpacing:{xs:1,sm:2,md:3},children:m.map(h=>n(k,{item:!0,xs:12,sm:12,md:6,lg:3,children:n(km,{donut:h})},h.id))})]})},Pm=()=>n(Em,{}),Am=()=>n(Me,{children:"Home"}),Im=()=>{const e=Ae();return{showRegister:()=>{e(pe(T.Registration))}}},ls=()=>{const[e,{isLoading:t,error:a}]=Ki(),[r]=tc(),{showNotification:s}=De(),{translate:o}=w(),{navigateToLogin:i}=ut();return{isPostingRegister:t,registerError:a,register:async d=>{const m={body:{...d.body,email:d.body.email.trim(),first_name:d.body.first_name.trim(),last_name:d.body.last_name.trim()}},h=await e(m);Object.hasOwn(h,"error")||(s(o(M.confirmation_email_was_sent_to,{capitalize:!0})),i())},sendConfirmEmail:async d=>{const m=await r({body:{email:d}});Object.hasOwn(m,"error")||(s(o(M.confirmation_email_was_sent_to,{capitalize:!0})),i())}}},Dm="_box_um1te_1",Nm={box:Dm},Rm=()=>{const{signIn:e,demoSignIn:t,isLogging:a,authError:r}=je(),{showRegister:s}=Im(),{translate:o}=w(),{sendConfirmEmail:i}=ls(),{navigateToRestorePassword:c}=ut(),[l,d]=u.useState({email:"",password:""}),m=async f=>{d({...l,[f.currentTarget.name]:f.currentTarget.value})},h=f=>{f.preventDefault(),e({body:l})};X(ne.Default,a);const p=u.useMemo(()=>{var f;if(r&&Object.hasOwn(r,"data"))return(f=r==null?void 0:r.data)==null?void 0:f.errorCode},[r]);return g(E,{className:Nm.box,sx:{mt:8},children:[n(Zt,{style:{width:"110px",height:"50px"}}),g(E,{component:"form",onSubmit:h,noValidate:!0,sx:{mt:1},children:[n(we,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:o(B.email_address,{capitalize:!0}),name:"email",autoComplete:"email",onChange:m,autoFocus:!0}),n(we,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:o(W.password,{capitalize:!0}),type:"password",id:"password",autoComplete:"current-password",onChange:m}),n(ee,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:o(j.sign_in)}),g(k,{container:!0,children:[n(k,{item:!0,xs:!0,children:g(ee,{sx:{textTransform:"none"},onClick:t,children:[n($o,{}),o(Ce.demo,{capitalize:!0})]})}),n(k,{item:!0,children:g(ue,{flexDirection:{xs:"column",sm:"row"},gap:1,alignItems:"flex-start",children:[g(ee,{sx:{textTransform:"none"},onClick:c,children:[n(Wo,{color:"primary"}),o(ce.restore_password,{capitalize:!0})]}),g(ee,{sx:{textTransform:"none"},onClick:s,children:[n(Uo,{color:"primary"}),o(j.sign_up,{capitalize:!0})]})]})})]}),p===5e3&&n(ee,{fullWidth:!0,color:"secondary",sx:{textTransform:"none",mt:4},onClick:()=>{ve.isEmpty(l.email)||i(l.email)},children:o(j.send_confirmation_email,{capitalize:!0})})]})]})},Mm=()=>{const{signOut:e}=je(),{t}=yn();return n(E,{sx:{mt:8,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:g(ee,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,width:"250px",display:"flex",justifyContent:"space-evenly"},onClick:()=>{e()},children:[t(se.SIGN_OUT),n(Ue,{sx:{m:1,bgcolor:"secondary.main"},children:n(Fa,{})})]})})},We={employeeCard:"employee-card",userPic:"user-pic",cardHover:"card-hover",cardHeaderHover:"card-header-hover",cardActions:"card-actions",cardBody:"card-body",cardTitle:"card-title",captions:"captions"},Lm=({employee:e,onCardClick:t=I,className:a,onTransferClick:r=I})=>{const{user_avatar:s,name:o}=e,{translate:i}=w();return n(ge,{raised:!0,className:V(We.employeeCard,a),children:n(Fn,{onClick:t,className:We.cardActions,children:n($e,{className:`${We.cardBody} mt-4 ml-10 mr-10 mb-4`,children:g(_,{direction:"column",justifyContent:"space-between",alignItems:"center",spacing:3,children:[n("div",{className:We.userPic,children:n("img",{src:(s==null?void 0:s.url)||Nn,alt:"..."})}),n("div",{className:We.captions,children:g(_,{direction:"row",alignItems:"center",children:[n(R,{variant:"body1",className:"pt-1",children:o}),n(qe,{color:"primary",onClick:c=>{c.preventDefault(),c.stopPropagation(),r()},tooltip:i(ae.transfer_donuts,{capitalize:!0}),children:n(Na,{})})]})})]})})})})},qm=H(Lm,{})(({theme:e})=>({backgroundColor:e.palette.secondary.veryLight,maxWidth:300,color:e.palette.neutral.dark,margin:"auto","& img":{width:"auto",height:"auto",maxHeight:"160px",maxWidth:"100%",verticalAlign:"middle",margin:"auto",border:"0",[e.breakpoints.down("xs")]:{maxHeight:"90px"},boxShadow:"0px 0px 48px rgba(255, 255, 255, 0.8)"},"&:hover":{outline:"2px solid",outlineColor:e.palette.primary.light,"& img":{transform:"translate3d(0, -3px, 2px)",transition:"all 500ms cubic-bezier(0.34, 1.61, 0.7, 1)"}},[L(We.cardBody)]:{display:"flex",justifyContent:"center",minHeight:200},[L(We.captions)]:{display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"},[L(We.cardHeaderHover)]:{display:"flex",flexDirection:"column",height:"100%",alignItems:"center",justifyContent:"center"}})),Bm=({employee:e})=>{const{showEmployee:t}=Ze(e),{showTransfer:a}=es();return n(qm,{employee:e,onCardClick:()=>t(),onTransferClick:()=>a(e.id)})},Om=()=>{const{objects:e=[],isLoading:t}=Fr(),{filteredList:a,setSorter:r,setSearch:s}=$r(e,{searchField:"name"}),o=Hr();return X(ne.Employees,t),n(O,{children:g(k,{container:!0,rowSpacing:{xs:2},columnSpacing:{xs:1,sm:2,md:3},children:[n(k,{item:!0,xs:12,children:n(Xt,{setSearch:s,setFilter:I,setSorter:r,buttons:o})}),a.map(i=>n(k,{item:!0,xs:12,sm:12,md:6,lg:3,children:n(Bm,{employee:i})},i.id))]})})},zm=()=>n(Om,{}),Fm=()=>{const{profile:e,isLoading:t,error:a,updateProfile:r}=Ne();return g(k,{container:!0,spacing:2,className:"p-2",children:[n(k,{item:!0,xs:12,sm:6,lg:4,children:n(Jr,{profile:e})}),n(k,{item:!0,xs:12,sm:6,lg:6,children:n(Xr,{profile:e,isLoading:t,error:a,updateProfile:r})})]})},Hm=()=>n(_,{direction:"column",className:"height-100",children:n(Ke,{className:"flex-grow scroll",children:n(Fm,{})})}),jm="_box_h9afl_1",ds={box:jm},$m=()=>{const{translate:e}=w();return{formSchema:it().shape({email:be().required(e(B.email_address_must_be_valid,{capitalize:!0})).matches(On,e(B.email_address_must_be_valid,{capitalize:!0})).email(e(B.email_address_must_be_valid,{capitalize:!0}))})}},Wm=({onSubmit:e})=>{var c;const{formSchema:t}=$m(),{register:a,handleSubmit:r,formState:{errors:s}}=St({shouldUseNativeValidation:!1,resolver:ct(t)}),{translate:o}=w();return n(E,{sx:{mt:8},children:g(E,{component:"form",onSubmit:r(async l=>{const{...d}=l;e(d.email)}),noValidate:!0,sx:{mt:1},children:[n(we,{margin:"normal",error:!!s.email,helperText:(c=s.email)==null?void 0:c.message,required:!0,fullWidth:!0,...a("email",{required:o(B.email_address)}),label:o(B.email_address,{capitalize:!0})}),n(ee,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:3,mb:2},children:o(ce.restore_password,{capitalize:!0})})]})})},Um=()=>{const{translate:e}=w();return{formSchema:it().shape({password:be().required(e(W.password_is_required,{capitalize:!0})),passwordRepeat:be().required(e(W.password_confirm_is_required,{capitalize:!0})).oneOf([Ha("password")],e(W.passwords_do_not_math,{capitalize:!0}))})}},Vm=({onSubmit:e})=>{var c,l;const{formSchema:t}=Um(),{register:a,handleSubmit:r,formState:{errors:s}}=St({shouldUseNativeValidation:!1,resolver:ct(t)}),{translate:o}=w();return n(E,{sx:{mt:8},children:g(E,{component:"form",onSubmit:r(async d=>{const{...m}=d;e(m.password)}),noValidate:!0,sx:{mt:1},children:[n(we,{margin:"normal",error:!!s.password,helperText:(c=s.password)==null?void 0:c.message,required:!0,fullWidth:!0,...a("password",{required:W.password}),label:o(W.password,{capitalize:!0}),type:"password"}),n(we,{margin:"normal",error:!!s.passwordRepeat,helperText:(l=s.passwordRepeat)==null?void 0:l.message,required:!0,fullWidth:!0,label:o(W.password_repeat,{capitalize:!0}),...a("passwordRepeat",{required:W.password_repeat}),type:"password"}),n(ee,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:3,mb:2},children:o(j.set_password,{capitalize:!0})})]})})},Gm="auth_token",Ym=e=>{const[t]=ac(),[a]=rc(),[r]=Ua(),{data:s,isLoading:o,isError:i,isSuccess:c}=nc({recoverToken:e},{skip:!e}),{showNotification:l}=De(),{navigateToRoot:d}=ut(),{setValue:m}=_t(),{translate:h}=w();return{sendRecoverEmail:b=>{t({body:{email:b}}).then(y=>{"data"in y&&l(h(ce.recover_email_has_been_sent,{capitalize:!0}))})},changePassword:b=>{e&&a({body:{password:b,recover_token:e}}).then(y=>{"data"in y&&(l(h(M.confirmed,{capitalize:!0})),m(Gm,y.data.auth_token),r().finally(()=>d()))})},isError:i,isLoading:o,user:s,isSuccess:c}},ua=()=>{const{token:e}=Je(),{sendRecoverEmail:t,changePassword:a,isLoading:r,isError:s}=Ym(e),{navigateToLogin:o}=ut();return u.useEffect(()=>{s&&o()},[s]),X(ne.Default,r),n(E,{className:ds.box,sx:{mt:8},children:e?n(Vm,{onSubmit:a}):n(Wm,{onSubmit:t})})},Km=()=>{const{translate:e}=w();return{formSchema:it().shape({password:be().required(e(W.password_is_required,{capitalize:!0})),passwordRepeat:be().required(e(W.password_confirm_is_required,{capitalize:!0})).oneOf([Ha("password")],e(W.passwords_do_not_math,{capitalize:!0})),first_name:be().required(e(st.first_name)),last_name:be().required(e(ot.last_name)),email:be().required(e(B.email_address_must_be_valid,{capitalize:!0})).matches(On,e(B.email_address_must_be_valid,{capitalize:!0})).email(e(B.email_address_must_be_valid,{capitalize:!0}))})}},Qm=()=>{var l,d,m,h,p;const{formSchema:e}=Km(),{register:t,handleSubmit:a,formState:{errors:r}}=St({shouldUseNativeValidation:!1,resolver:ct(e)}),{isPostingRegister:s,register:o}=ls(),{translate:i}=w(),c=async f=>{const{passwordRepeat:b,...y}=f;await o({body:y})};return X(ne.Default,s),g(E,{className:ds.box,sx:{mt:8},children:[n(Zt,{style:{width:"110px",height:"50px"}}),n(R,{variant:"h5",className:"mt-8 mb-2",children:i(j.sign_up,{capitalize:!0})}),g(E,{component:"form",onSubmit:a(c),noValidate:!0,sx:{mt:1},children:[n(we,{margin:"normal",fullWidth:!0,error:!!r.first_name,helperText:(l=r.first_name)==null?void 0:l.message,required:!0,...t("first_name",{required:i(st.first_name),pattern:/^\S+@\S+$/i}),label:i(st.first_name,{capitalize:!0}),autoFocus:!0}),n(we,{margin:"normal",error:!!r.last_name,helperText:(d=r.last_name)==null?void 0:d.message,fullWidth:!0,required:!0,...t("last_name",{required:i(ot.last_name)}),label:i(ot.last_name,{capitalize:!0})}),n(we,{margin:"normal",error:!!r.email,helperText:(m=r.email)==null?void 0:m.message,required:!0,fullWidth:!0,...t("email",{required:i(B.email_address)}),label:i(B.email_address,{capitalize:!0})}),n(we,{margin:"normal",error:!!r.password,helperText:(h=r.password)==null?void 0:h.message,required:!0,fullWidth:!0,...t("password",{required:W.password}),label:i(W.password,{capitalize:!0}),type:"password"}),n(we,{margin:"normal",error:!!r.passwordRepeat,helperText:(p=r.passwordRepeat)==null?void 0:p.message,required:!0,fullWidth:!0,label:i(W.password_repeat,{capitalize:!0}),...t("passwordRepeat",{required:W.password_repeat}),type:"password"}),n(ee,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:3,mb:2},children:i(j.sign_up)})]})]})},bn={menuCard:"menu-card",cardHover:"card-hover",cardHeader:"card-header",actionArea:"action-area",cardBody:"card-body",cardTitle:"card-title"},ht=bn,Jm=({route:e,onCardClick:t,className:a})=>{const{t:r}=w();return n(ge,{raised:!0,color:"primaryLight",className:V(ht.menuCard,a),children:n(Fn,{onClick:t,className:ht.actionArea,children:g($e,{className:ht.cardBody,children:[n("div",{className:ht.cardHeader,children:e.icon}),n(R,{className:ht.cardTitle,children:r(e.navbarName)})]})})})},Zm=H(Jm,{})(({theme:e})=>({backgroundColor:e.palette.primary.light,maxWidth:250,height:150,verticalAlign:"middle",margin:"auto",textAlign:"center","& svg":{width:"50px",height:"50px"},"&:hover":{outline:"2px solid",outlineColor:e.palette.primary.main,"& svg":{transform:"translate3d(0, -20px, 10px)",transition:"all 400ms cubic-bezier(0.34, 1.61, 0.7, 1)"}},[L(bn.cardBody)]:{minHeight:200},[L(bn.cardHeader)]:{paddingTop:"20px",height:"80px",display:"flex",justifyContent:"center",alignItems:"center"}})),Hn=()=>{const e=Ae(),{routes:t}=u.useContext(Ve);return{navigate:u.useCallback(r=>{e(pe(r))},[e]),routes:t}},Xm=({route:e})=>{const{navigate:t}=Hn(),a=u.useCallback(()=>{t(e.path)},[e,t]);return n(Zm,{route:e,onCardClick:a})},eh=({routes:e,className:t})=>n(k,{className:t,container:!0,rowSpacing:{xs:3,lg:3},columnSpacing:{xs:2,lg:3,xl:4},children:e.map(a=>n(k,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,children:n(Xm,{route:a})},a.path))}),th=H(eh,{})(()=>({justifyContent:"center",alignItems:"center"})),us=({routes:e=[]})=>n(th,{routes:e}),ms=e=>e!=null&&e.children?Object.values(e.children).sort((a,r)=>Wt(a)-Wt(r)).filter(a=>a&&!(a!=null&&a.hideInMenu)&&(a==null?void 0:a.navbarName))||[]:[],nh=()=>{const{routes:e}=Hn(),t=ms(e.Requests);return n(us,{routes:t})},ah=()=>{const{routes:e}=Hn(),t=ms(e.Settings);return n(us,{routes:t})},rh=()=>n(Wr,{}),sh=()=>Ye({endpoint:Bn.endpoints.getTenantsAccessible,translator:qn}),Ee={tenantCard:"tenant-card",tenantLogo:"tenant-logo",tenantDefaultLogo:"tenant-default-logo",cardHover:"card-hover",cardHeaderHover:"card-header-hover",cardActions:"card-actions",cardBody:"card-body",cardTitle:"card-title",captions:"captions",error:"error"},oh=H(en,{shouldForwardProp:()=>!0})(({theme:e})=>({fontSize:16,background:e.palette.secondary.light,color:e.palette.getContrastText(e.palette.primary.light),padding:"6px 12px","&:hover":{background:e.palette.secondary.main,color:e.palette.getContrastText(e.palette.secondary.light)}})),ih=H(en,{shouldForwardProp:()=>!0})(({theme:e})=>({fontSize:16,background:e.palette.error.light,color:e.palette.getContrastText(e.palette.primary.light),padding:"6px 12px","&:hover":{background:e.palette.error.main,color:e.palette.getContrastText(e.palette.secondary.light)}})),ch=({tenant:e,submitActionName:t,onSubmitActionClick:a=I,cancelActionName:r,onCancelActionClick:s=I,className:o,errorText:i})=>{const{logo:c,caption:l}=e;return g(ge,{raised:!0,className:V(Ee.tenantCard,o),children:[n($e,{className:`${Ee.cardBody} mt-4 ml-4 mr-4 mb-4`,children:g(_,{direction:"column",justifyContent:"space-between",alignItems:"center",spacing:3,children:[n("div",{className:V(Ee.tenantDefaultLogo,{[Ee.tenantLogo]:c==null?void 0:c.url}),children:n("img",{src:(c==null?void 0:c.url)||$t,alt:"..."})}),g("div",{className:Ee.captions,children:[n(R,{align:"center",variant:"subtitle1",children:l}),n(R,{className:Ee.error,align:"center",variant:"caption",children:i})]})]})}),g(_,{direction:"row",justifyContent:"center",alignItems:"center",spacing:3,className:"mb-6",children:[t&&n(oh,{variant:"contained",onClick:a,noTransform:!0,children:t}),r&&n(ih,{variant:"contained",onClick:s,noTransform:!0,children:r})]})]})},lh=H(ch,{})(({theme:e})=>({backgroundColor:e.palette.primary.light,maxWidth:300,color:e.palette.neutral.dark,margin:"auto",[L(Ee.tenantDefaultLogo)]:{"& img":{width:"auto",height:"auto",maxHeight:"100px",maxWidth:"100%",verticalAlign:"middle",margin:"auto",border:"0",[e.breakpoints.down("xs")]:{maxHeight:"60px"}}},[L(Ee.tenantLogo)]:{"& img":{boxShadow:"0px 0px 48px rgba(255, 255, 255, 0.8)"}},"&:hover":{outline:"1px solid",outlineColor:e.palette.secondary.light},[L(Ee.cardBody)]:{display:"flex",justifyContent:"center",minHeight:150},[L(Ee.captions)]:{display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"},[L(Ee.error)]:{color:e.palette.error.main},[L(Ee.cardHeaderHover)]:{display:"flex",flexDirection:"column",height:"100%",alignItems:"center",justifyContent:"center"}})),jn=e=>n(lh,{...e}),dh=e=>{const[t]=Gi(),{setTenant:a}=je();return{joinTenant:()=>{e&&t({tenantName:e.name}).then(()=>{a(e.name)})}}},uh=({tenant:e})=>{const{t}=w(),{joinTenant:a}=dh(e);return n(jn,{tenant:e,submitActionName:t(En.join,{capitalize:!0}),onSubmitActionClick:a})},$n=({children:e,title:t})=>g("div",{className:"mb-8",children:[n(R,{variant:"subtitle1",className:"ml-1",children:t}),n(Jt,{}),n(k,{container:!0,rowSpacing:{xs:2},columnSpacing:{xs:1,sm:2,md:3},className:"mt-1",children:e})]}),mh=()=>{const{objects:e,isLoading:t}=sh(),{t:a}=w();return X(ne.AccessibleTenants,t),e!=null&&e.length?n($n,{title:a(ae.teams_you_can_join,{capitalize:!0}),children:e.map(r=>n(k,{item:!0,xs:12,sm:12,md:6,lg:3,children:n(uh,{tenant:r})},r.id))}):null},hh=()=>Ye({endpoint:Bn.endpoints.getTenants,translator:qn}),ph=({tenant:e})=>{const{t}=w(),{auth:a,setTenant:r}=je();return n(jn,{tenant:e,submitActionName:a.tenant!==e.name&&!e.deactivated?t(kn.go_to,{capitalize:!0}):void 0,errorText:e.deactivated?t(Pe.blocked,{capitalize:!0}):void 0,onSubmitActionClick:()=>r(e.name)})},gh=()=>{const{objects:e,isLoading:t}=hh(),{t:a}=w();return X(ne.MyTenants,t),e!=null&&e.length?n($n,{title:a(Re.my_teams,{capitalize:!0}),children:e.map(r=>n(k,{item:!0,xs:12,sm:12,md:6,lg:3,children:n(ph,{tenant:r})},r.id))}):null},fh=()=>Ye({endpoint:ns.endpoints.getInvitationsMy,translator:Nr}),bh=({invitation:e})=>{const{t}=w(),{accept:a,decline:r}=as(e);return n(jn,{tenant:e,submitActionName:t(U.accept,{capitalize:!0}),onSubmitActionClick:a,cancelActionName:t(Ce.decline,{capitalize:!0}),onCancelActionClick:r})},yh=()=>{const{objects:e,isLoading:t}=fh(),{t:a}=w();return X(ne.MyInvitations,t),e!=null&&e.length?n($n,{title:a(ze.invitations,{capitalize:!0}),children:e.map(r=>n(k,{item:!0,xs:12,sm:12,md:6,lg:3,children:n(bh,{invitation:r})},r.id))}):null},vh=()=>g(O,{children:[n(yh,{}),n(mh,{}),n(gh,{})]}),wh="modulepreload",Ch=function(e){return"/"+e},ma={},et=function(t,a,r){if(!a||a.length===0)return t();const s=document.getElementsByTagName("link");return Promise.all(a.map(o=>{if(o=Ch(o),o in ma)return;ma[o]=!0;const i=o.endsWith(".css"),c=i?'[rel="stylesheet"]':"";if(!!r)for(let m=s.length-1;m>=0;m--){const h=s[m];if(h.href===o&&(!i||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${o}"]${c}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":wh,i||(d.as="script",d.crossOrigin=""),d.href=o,document.head.appendChild(d),i)return new Promise((m,h)=>{d.addEventListener("load",m),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>t())},Sh=tt.lazy(()=>et(()=>import("./store-manager-95d38244.js"),["assets/store-manager-95d38244.js","assets/vendor-9396aa6c.js","assets/lodash-63a25aa2.js","assets/tanstack-d9d7d041.js"])),_h=()=>n(u.Suspense,{fallback:n("div",{children:"Loading..."}),children:n(Sh,{})}),{CirclesIcon:xh}=Or(),_e=[ke.moderator,ke.admin,ke.admin],kh={AccountOperations:{path:T[S.AccountOperations],anonymous:!1,authenticated:!0,hideInMenu:!1,component:n(gm,{})},ConfirmEmail:{path:T[S.ConfirmEmail],anonymous:!0,authenticated:!1,hideInMenu:!1,component:n(vu,{})},Dashboard:{path:T[S.Dashboard],anonymous:!1,authenticated:!0,navbarName:"Dashboard",hideInMenu:!1,component:n(Cm,{}),redirect:T[S.Login],icon:n(Vo,{}),index:0},DonutPreview:{path:T[S.DonutPreview],anonymous:!1,authenticated:!0,hideInMenu:!0,component:n(dm,{})},DonutEdit:{path:T[S.DonutEdit],anonymous:!1,authenticated:!0,hideInMenu:!0,component:n(gu,{}),roles:_e},Donuts:{path:T[S.Donuts],anonymous:!1,authenticated:!0,navbarName:"Store",hideInMenu:!1,component:n(Pm,{}),icon:n(Go,{}),index:2},Home:{path:T[S.Home],anonymous:!0,authenticated:!0,navbarName:"Home",hideInMenu:!0,component:n(Am,{})},Login:{path:T[S.Login],anonymous:!0,authenticated:!1,hideInMenu:!0,component:n(Rm,{})},Logout:{path:T[S.Logout],anonymous:!1,authenticated:!0,navbarName:"Exit",hideInMenu:!1,component:n(Mm,{}),icon:n(Fa,{}),index:100,tenantNotRequired:!0},MyRequests:{path:T[S.MyRequests],anonymous:!1,authenticated:!0,navbarName:"My requests",hideInMenu:!1,icon:n(Yo,{}),component:n(tm,{})},Employees:{path:T[S.Employees],anonymous:!1,authenticated:!0,navbarName:"Employees",hideInMenu:!1,component:n(zm,{}),icon:n(Ia,{})},EmployeePreview:{path:T[S.EmployeePreview],anonymous:!1,authenticated:!0,hideInMenu:!0,component:n(du,{})},Event:{path:T[S.Event],anonymous:!1,authenticated:!0,hideInMenu:!0,component:n(Eu,{})},Profile:{path:T[S.Profile],anonymous:!1,authenticated:!0,navbarName:"Profile",hideInMenu:!1,component:n(Hm,{}),redirect:T[S.Login],icon:n(Da,{}),index:1},RequestRecover:{path:T[S.RequestRecover],anonymous:!0,authenticated:!1,hideInMenu:!0,component:n(ua,{})},Recover:{path:T[S.Recover],anonymous:!0,authenticated:!1,hideInMenu:!0,component:n(ua,{})},Invitations:{path:T[S.Invitations],anonymous:!1,authenticated:!0,navbarName:"Invitations",hideInMenu:!1,component:n(Tu,{}),icon:n(Ko,{}),roles:_e},Registration:{path:T[S.Registration],anonymous:!0,authenticated:!1,hideInMenu:!0,component:n(Qm,{})},Requests:{path:T[S.Requests],anonymous:!1,authenticated:!0,navbarName:"Requests",hideInMenu:!1,component:n(nh,{}),icon:n(Ot,{}),roles:_e,children:{IncomingRequests:{path:T[S.IncomingRequests],anonymous:!1,authenticated:!0,navbarName:"Incoming requests",hideInMenu:!1,component:n(sm,{}),icon:n(Ot,{}),index:0,roles:_e},ActiveRequests:{path:T[S.ActiveRequests],anonymous:!1,authenticated:!0,navbarName:"Active requests",hideInMenu:!1,component:n(Ku,{}),icon:n(za,{}),index:1,roles:_e},ClosedRequests:{path:"/closed_requests",anonymous:!1,authenticated:!0,navbarName:"Closed requests",hideInMenu:!1,component:n(am,{}),icon:n(Oa,{}),index:2,roles:_e}}},Settings:{path:T[S.Settings],anonymous:!1,authenticated:!0,navbarName:"Settings",hideInMenu:!1,component:n(ah,{}),redirect:T[S.Login],icon:n(Ma,{}),roles:_e,children:{Share:{path:T[S.Share],anonymous:!1,authenticated:!0,navbarName:"Transfer donuts or coins",hideInMenu:!1,component:n(Cd,{}),redirect:T[S.Login],icon:n(Qo,{}),roles:_e},Store:{path:T[S.Store],anonymous:!1,authenticated:!0,navbarName:"Store",hideInMenu:!1,component:n(_h,{}),icon:n(Jo,{}),index:0,roles:_e},Tenant:{path:T[S.Tenant],anonymous:!1,authenticated:!0,navbarName:"Team settings",hideInMenu:!1,component:n(Id,{}),icon:n(Zo,{}),index:0,roles:_e},Plugins:{path:T[S.Plugins],anonymous:!1,authenticated:!0,navbarName:"Plugins",hideInMenu:!1,component:n(Dd,{}),icon:n(Xo,{}),index:0,roles:_e},Schedulers:{path:T[S.Schedulers],anonymous:!1,authenticated:!0,navbarName:"Schedulers",hideInMenu:!1,component:n(Qd,{}),icon:n(ei,{}),index:0,roles:_e},Circles:{path:T[S.Circles],anonymous:!1,authenticated:!0,navbarName:"Circles",hideInMenu:!1,component:n(zu,{}),icon:n(xh,{}),index:0,roles:_e}}},Statistics:{path:T[S.Statistics],anonymous:!1,authenticated:!0,navbarName:"Statistic",hideInMenu:!1,component:n(rh,{}),icon:n(ti,{}),roles:[ke.moderator,ke.admin,ke.admin]},TenantList:{path:T[S.TenantList],anonymous:!1,authenticated:!0,navbarName:"My tenants",hideInMenu:!1,component:n(vh,{}),icon:n(ni,{}),tenantNotRequired:!0}},de={redirects:hd,routes:kh},Th=()=>navigator.language,Eh=({children:e})=>{const[t,a]=u.useState(dn),[r,s]=u.useState(void 0);return u.useEffect(()=>{(async()=>{const i=Th();let c;switch(i){case"ru":c=await et(()=>import("./vendor-9396aa6c.js").then(l=>l.c2),["assets/vendor-9396aa6c.js","assets/lodash-63a25aa2.js"]),s(oi.components.MuiLocalizationProvider.defaultProps.localeText);break;case"es":c=await et(()=>import("./vendor-9396aa6c.js").then(l=>l.c1),["assets/vendor-9396aa6c.js","assets/lodash-63a25aa2.js"]),s(si.components.MuiLocalizationProvider.defaultProps.localeText);break;case"de":c=await et(()=>import("./vendor-9396aa6c.js").then(l=>l.b$),["assets/vendor-9396aa6c.js","assets/lodash-63a25aa2.js"]),s(ri.components.MuiLocalizationProvider.defaultProps.localeText);break;case"en-GB":c=await et(()=>import("./vendor-9396aa6c.js").then(l=>l.c0),["assets/vendor-9396aa6c.js","assets/lodash-63a25aa2.js"]),s(ai.components.MuiLocalizationProvider.defaultProps.localeText);break;default:c=dn;break}a(c.default)})()},[]),n(fr.Provider,{value:t,children:n(Yr.Provider,{value:r,children:n(ya.DateFnsProvider,{adapterLocale:t,children:e})})})},Ph={"International Date Line West":"Международная линия перемены дат Запад","Midway Island":"Мидуэй",Samoa:"Самоа","American Samoa":"Американское Самоа",Hawaii:"Гаваи",Alaska:"Аляска","Pacific Time (US & Canada)":"Тихоокеанское время (США и Канада)","Pacific Time":"Тихоокеанское время (США и Канада)",Tijuana:"Тихуана","Mountain Time (US & Canada)":"Горное время (США и Канада)","Mountain Time":"Горное время (США и Канада)",Arizona:"Аризона",Chihuahua:"Чихуахуа",Mazatlan:"Мазатлан","Central Time (US & Canada)":"Центральное время (США и Канада)","Central Time":"Центральное время (США и Канада)",Saskatchewan:"Саскачеван",Guadalajara:"Гвадалахара","Mexico City":"Мехико",Monterrey:"Монтеррей",Montevideo:"Монтевидео","Central America":"Центральная Америка","Eastern Time (US & Canada)":"Центральная Америка","Eastern Time":"Центральная Америка","Indiana (East)":"Индиана (восток)",Bogota:"Богота",Lima:"Лима",Quito:"Кито","Atlantic Time (Canada)":"Атлантическое время (Канада)",Caracas:"Каракас","La Paz":"Ла-Пас",Santiago:"Сантьяго",Newfoundland:"Ньюфаундленд",Brasilia:"Бразилиа","Buenos Aires":"Буэнос-Айрес",Georgetown:"Джорджтаун",Greenland:"Гренландия","Mid-Atlantic":"Средне-атлантическое",Azores:"Азорские острова","Cape Verde Is.":"Кабо-Верде.",Dublin:"Дублин",Edinburgh:"Эдинбург",Lisbon:"Лиссабон",London:"Лондон",Casablanca:"Касабланка",Monrovia:"Монровия",UTC:"UTC",Belgrade:"Белград",Bratislava:"Братислава",Budapest:"Будапешт",Ljubljana:"Любляна",Prague:"Прага",Sarajevo:"Сараево",Skopje:"Скопье",Warsaw:"Варшава",Zagreb:"Загреб",Brussels:"Брюссель",Copenhagen:"Копенгаген",Madrid:"Мадрид",Paris:"Париж",Amsterdam:"Амстердам",Berlin:"Берлин",Bern:"Берн",Rome:"Рим",Stockholm:"Стокгольм",Vienna:"Вена","West Central Africa":"Западной и Центральной Африки",Bucharest:"Бухарест",Cairo:"Каир",Helsinki:"Хельсинки",Kyiv:"Киев",Riga:"Рига",Sofia:"София",Tallinn:"Таллин",Vilnius:"Вильнюс",Athens:"Афины",Istanbul:"Стамбул",Minsk:"Минск",Jerusalem:"Иерусалим",Harare:"Хараре",Pretoria:"Претория",Moscow:"Москва","St. Petersburg":"Санкт-Петербург",Volgograd:"Волгоград",Kuwait:"Кувейт",Riyadh:"Рияд",Nairobi:"Найроби",Baghdad:"Багдад",Tehran:"Тегеран","Abu Dhabi":"Абу-Даби",Muscat:"Мускат",Baku:"Баку",Tbilisi:"Тбилиси",Yerevan:"Ереван",Kabul:"Кабул",Ekaterinburg:"Екатеринбург",Islamabad:"Исламабад",Karachi:"Карачи",Tashkent:"Ташкент",Chennai:"Ченнаи",Kolkata:"Калькутта",Mumbai:"Мумбаи","New Delhi":"Нью-Дели",Kathmandu:"Катманду",Astana:"Астана",Dhaka:"Дакка","Sri Jayawardenepura":"Шри-Яварденапура",Almaty:"Алматы",Novosibirsk:"Новосибирск",Rangoon:"Рангун",Bangkok:"Бангкок",Hanoi:"Ханой",Jakarta:"Джакарта",Krasnoyarsk:"Красноярск",Beijing:"Пекин",Chongqing:"Чунцин","Hong Kong":"Гонконг",Urumqi:"Урумчи","Kuala Lumpur":"Куала-Лумпур",Singapore:"Сингапур",Taipei:"Тайбэй",Perth:"Перт",Irkutsk:"Иркутск","Ulaan Bataar":"Улан-Батор",Seoul:"Сеул",Osaka:"Осака",Sapporo:"Саппоро",Tokyo:"Токио",Yakutsk:"Якутск",Darwin:"Дарвин",Adelaide:"Аделаида",Canberra:"Канберра",Melbourne:"Мельбурн",Sydney:"Сидней",Brisbane:"Брисбен",Hobart:"Хобарт",Vladivostok:"Владивосток",Guam:"Гуам","Port Moresby":"Порт-Морсби",Magadan:"Магадан","Solomon Is.":"Соломоновы острова.","New Caledonia":"Новая Каледония",Fiji:"Фиджи","Fiji Islands":"Острова Фиджи",Kamchatka:"Камчатка","Marshall Is.":"Маршалловы о-ва",Auckland:"Окленд",Wellington:"Веллингтон","Nuku'alofa":"Нукуалофа","Tokelau Is.":"Токелау",Yukon:"Юкон","Newfoundland and Labrador":"Ньюфа́ундленд и Лабрадо́р",Dawson:"Доусон"},Ah={monday:"понедельник",tuesday:"вторник",wednesday:"среда",thursday:"четверг",friday:"пятница",saturday:"суббота",sunday:"воскресенье"},Ih={translations:{CONST_GREETINGS:"Простой и быстрый способ поблагодарить ваших коллег за отличную работу.",Account:"Аккаунт","About myself":"Обо мне",Amount:"Количество",amount:"количество",Add:"Добавить",admin:"админ","admin deposit":"Депозит (админ)",[U.author]:"автор",[U.accept]:"принять",[U.add_new_scheduler]:"добавить новый планировщик",[U.add_comment]:"добавьте комментарий",Activate:"Активировать",[U.active_request]:"Активные запросы",[U.approximate_action_time]:"приблизительное время начала действия",Active:"Активен",active:"активен",activated:"в работе","access denied":"доступ закрыт","Active requests":"Запросы в работе","Active donuts":"Активные пончики","Already used regards":"Уже использованные награды","Activate regard code":"Активация кода награды","Already activated":"Уже активировано","Accepted requests":"Активированные запросы","All users":"Все пользователи","are you sure to delete?":"вы точно хотите удалить?","are you sure?":"вы уверены?","available employees":"доступные сотрудники","Back to store":"Назад в магазин",Balance:"Баланс","birthday donuts":"пончики на день рождения",[Pe.birthday_points]:"монеты на день рождения",[Pe.birthday_message]:"сообщение на день рождения",[Pe.blocked]:"заблокировано",back:"назад",Buy:"Купить","Burn old points":"Списывать неиспользованные монеты","Burn old donuts":"Списывать неиспользованные пончики",[Pe.burn_unused_donuts]:"списывать неиспользованные пончики",Cancel:"Отмена",cancel:"отмена",Caption:"Название",caption:"название",Change:"Изменить","Can not be empty":"Не может быть пустым","Change password":"Сменить пароль",Confirm:"Подтвердить почтовый адрес","Confirmation dialog":"Подтверждение",confirmation:"подтверждение",[M.coins]:"монеты",[M.comment]:"комментарий",[M.confirmation_email_was_sent_to]:"Письмо для подтверждения было отправлено на ваш электронный адрес","Confirmation email was sent to":"Подтвердите адрес электронной почты ","Confirm your email first":"Для продолжения подтвердите адрес электронной почты ","Connect to space":"Присоединиться к пространству",[M.confirm]:"подтвердить",[M.comment_is_required]:"введите комментарий",[M.confirmed]:"подтверждено",[M.choose_type]:"выберите тип",[M.choose_day]:"выберите день",[M.choose_time]:"выберите время",[M.choose_timezone]:"выберите часовой пояс",code:"код",Comment:"Комментарий",Contact:"Контакт","Comment saved":"Комментарий сохранен","Click to select files":"Нажмите, чтобы выбрать фото","Closed requests":"Завершенные запросы",Close:"Закрыть",close:"закрыть",closed:"закрытые","closed requests":"закрытые запросы",Circles:"Круги",created:"создан(а)",create:"создать",[M.choose_employees]:"выберите сотрудников","Date of birth":"Дата рождения",department:"подразделение","Day of month":"День месяца",[Ce.demo]:"демо",[Ce.day]:"день",DEMO:"Демо",Dashboard:"Лента",Delete:"Удалить",[Ce.donuts]:"пончики",[Ce.decline]:"отклонить","delivery days":"через сколько дней будет",Departments:"Отделы",Department:"Отдел",Description:"Описание",description:"описание",Details:"Подробнее","department chief":"руководитель подразделения","Distrib account":"Могу отдать","disable account":"отключить аккаунт","Donut name":"Название плюшки","Donut added":"Пончик добавлен","Share donuts":"Перевести пончики",Discard:"Отменить изменения",Donut:"Пончик",Donuts:"Пончики","Donut description":"Описание пончика",donut_zero:"пончиков",donut_one:"пончик",donut_few:"пончика",donut_many:"пончиков",donut_other:"пончиков","Domain not found":"Не найден почтовый домен",Domain:"Домен",domain:"домен","Drag and drop an image here or click to select a file Drag and drop an image here or click to select a file":"Перетащите сюда файл или кликните, для выбора","Drag and drop an image here or click to select a file":"Перетащите сюда файл или кликните, для выбора",Edit:"Редактировать","Employment date":"Дата приема","Edit donut":"Редактировать пончик","Error while updating":"Ошибка во время обновления",[B.email_address_must_be_valid]:"Почтовый адрес должен быть в верном формате",Employees:"Сотрудники",employees:"сотрудники",[B.email_notification]:"оповещения по почте",[B.email_confirmation]:"подтверждение почты",[B.empty_events_placeholder]:"здесь будут отображаться все события",[B.edit]:"редактировать",[B.every_week]:"каждую неделю",[B.every_month]:"каждый месяц",Email:"Email",[B.email_address]:"почтовый адрес",error:"ошибка",Events:"События","Expiration date":"Дата окончания",Exit:"Выход","expiration date":"срок действия",[st.first_name]:"имя",forbidden:"запрещено",for:"для",from:"от","Go to shop":"В магазин","Go to":"Перейти",[kn.go_to]:"перейти",Goods:"Товары",History:"История",[Tn.history]:"история",Home:"Главная","How many points do you want to send":"Сколько монет вы хотите отправить","How many donuts do you want to send":"Сколько пончиков вы хотите отправить","Hide snow":"Убрать снег",Invitations:"Приглашения","Incoming requests":"Входящие запросы",incoming:"входящие","in date":"дата приема",[ze.invitations]:"приглашения",[ze.i_can_share]:"я могу поделиться",[ze.i_can_spend]:"я могу потратить","invitation added":"Приглашение отправлено",Join:"Присоединиться",[En.join]:"присоединиться",[ot.last_name]:"фамилия","Log in":"Войти","Log Out":"Выйти",Max:"Макс",Min:"Мин",[Re.max_amount_is]:"максимальное значение - ",[Re.min_amount_is]:"минимальное значение - ","Max donuts":"Макисмальное количество пончиков",message:"сообщение","My Requests":"Мои запросы","My requests":"Мои запросы","My spaces":"Мои команды","My teams":"Мои команды","My tenants":"Мои команды",[Re.my_teams]:"мои команды",More:"Ещё",more:"ещё",[te.name_is_required]:"необходимо задать имя","new password":"новый пароль","New points for all users":"Новые монеты для всех пользователей",Name:"Имя","name has been taken":"Имя уже занято",name:"название","New item":"Новый элемент","new donut":"Новый пончик","new circle":"новый круг",newest:"самые новые",Next:"Вперед",next:"далее","Not active donuts":"Неактивные пончики","No options":"Нет вариантов","not active":"не активен",[te.no_name]:"без имени",[te.not_found]:"не найдено",[te.new_invitation]:"новое приглашение",[te.new_scheduler]:"новый планировщик",[te.new_invitation_was_created]:"Новое приглашение было создано",[te.new_invitation_email_was_sent]:"Письмо с приглашением было отправлено","on stock":"в наличии","Only you can see it":"Только вы это видите",[W.password]:"пароль",[W.password_changed]:"пароль изменен",[W.password_repeat]:"пароль еще раз",[W.password_is_required]:"пароль необходим",[W.passwords_do_not_math]:"пароль не совпадает",[W.password_confirm_is_required]:"подтверждение пароля необходимо",Page:"Страница",People:"Сотрудники","Please confirm your email":"Пожалуйста, подтвердите почтовый адрес",points:"монеты",point_zero:"монет",point_one:"монета",point_few:"монет",point_many:"монет",point_other:"монет",position:"должность",Position:"Должность",Plugins:"Плагины",preview:"просмотр",Price:"Цена",price:"цена",[W.purchase]:"покупка","price asc":"сначала самые дешевые","price desc":"сначала самые дорогие",Profile:"Профиль",profile:"профиль",profiles:"профили",pts:"бон.",PTS:"БОН.",place:"место",Previous:"Назад",previous:"назад",Purchase:"Покупка","regard added":"Покупка успешно совершена","request added":"Запрос создан","Registration Confirmation":"Подтверждение регистрации","Recover password":"Восстановить пароль","Requests in progress":"Запросы в работе",Refund:"Возврат",[ce.remove_all]:"удалить всех",[ce.refund]:"возврат",Required:"Обязательное поле",requests:"запросы",Requests:"Запросы",Register:"Зарегистрировать",Remove:"Удалить",records:"записей",records_zero:"записей",records_one:"запись",records_few:"записи",records_many:"записей",records_other:"записей",[ce.restore_password]:"восстановить пароль",[ce.recover_email_has_been_sent]:"письмо для восставновления пароля было отправлено","request has been refunded":"запрос отменен","request has been set as incoming":"запрос переведен во входящие","request has been set as close":"запрос переведен во закрытые","request has been set as active":"запрос переведен в работе","Refresh or activate":"Обновить или активировать",Rollback:"Вернуть",Roles:"Роли",rows:"строк","rows per page":"строк на стр.",[j.settings_updated]:"настройки обновлены",[j.scheduler_created]:"планировщик создан",[j.scheduler_updated]:"планировщик обновлен",[j.scheduler_deleted]:"планировщик удален",[j.scheduler_delete]:"удаление планировщика",save:"сохранить",saved:"сохранено","Save changes":"Сохранить изменения","Self account":"Могу потратить",Search:"Поиск","Search string":"Строка поиска",search:"поиск",[j.set_password]:"установить пароль",Share:"Поделиться",share:"поделиться","Share dialog":"Окно подарков","Show only mine":"Показывать только мои","Show snow":"Включить снег","sort by alphabet":"сортировать по алфавиту","Store item":"Элемент магазина",Send:"Отправить","Send to all":"Отправить всем","Send again":"Отправить еще раз",[j.send_confirmation_email]:"Отправить письмо подтверждения","Select image":"Выбрать картинку","select all":"выбрать всех","selected employees":"выбранные сотрудники",Settings:"Настройки",Schedule:"Расписание",Schedulers:"Расписания",Sign_Out:"Выход",Sign_In:"Войти",[j.send]:"Отправить",[j.sign_in]:"войти",[j.sign_up]:"регистрация",[j.soon_will_be_back]:"Он улетел, но обещал вернуться",[j.show_only_mine]:"только мои",Sign_Up:"Регистрация",Statistic:"Статистика","start typing":"начните ввод",Store:"Магазин","Store admin":"Администратор магазина","store admin":"управляющий","Something went wrong.":"Что-то пошло не так.",Surname:"Фамилия","Submit values":"Отправить",Submit:"Подтвердить",Tenant:"Команда","Team settings":"Настройки команды",transferred:"перведено","transfer points":"перевести монеты","transfer donuts":"перевести пончики",to:"для",[ae.transfer]:"перевести",[ae.transfer_type]:"тип перевода",[ae.to_store]:"в магазин","Transfer donuts or coins":"Перевести пончики или монеты",[ae.time_is_required]:"необходимо указать время","to can transfer to others":"можно дарить коллегам","This field is required":"Это поле является обязательным",[ae.teams_you_can_join]:"команды, к которым можно присоединиться",[ae.tooltip_scheduler_time]:"фактическое действие будет запущено в течении 1 часа после указанного времени.","Teams I can join":"Команды, к которым могу присоединиться","Update donut":"Обновить пончик",Update:"Обновить",[yt.under_construct]:"В разработке",[yt.updated]:"обновлено","Update is available":"Обновление доступно","user can spend in store":"можно тратить в магазине","welcome points":"приветственные монеты","welcome donuts":"приветственные пончики","Without department":"Без подразделения","Wrong credentials":"Не удалось войти с этим именем и паролем","Withdrawal error. Not enough points":"Ошибка. Недостаточно монет","you have to be admin":"Вы должны иметь полномочия администратора","You have successfully bought a new donut":"Вы успешно купили плюшку","your comment":"ваш комментарий",yes:"да",...Ph,...Ah}},Dh={translations:{Events:"Events",Balance:"Balance","Confirmation email was sent to":"Confirmation email was sent to",Confirm:"Confirm email",Dashboard:"Dashboard","invitation added":"Invitation added","Registration Confirmation":"Registration Confirmation","regard added":"New donuts has been bought","name has been taken":"NAME HAS BEEN TAKEN","Log in":"Log in",Sign_In:"Sign In",Sign_Out:"Sign Out",Sign_Up:"Sign Up","Recover password":"Recover password",CONST_GREETINGS:"Fast and simple way to   encourage your colleagues and thank them for their patience and help.",[ae.tooltip_scheduler_time]:"the actual action will be fired within 1 hour after the specified time."}};Bt.use(ii).init({resources:{en:Dh,ru:Ih},fallbackLng:"en",debug:!1,ns:["translations"],defaultNS:"translations",keySeparator:!1,interpolation:{escapeValue:!1,formatSeparator:","}});const Nh=()=>{const[e,t]=u.useState(!1),a=()=>{t(!e)},r=u.useMemo(()=>md(de),[de]),s=u.useMemo(()=>({isDrawerOpen:e,toggleDrawer:a,menuRoutes:r,routes:de.routes,redirects:de.redirects.redirects}),[e,de,r]);return n(Cc,{children:n(ci,{i18n:Bt,children:n(li,{children:n(Eh,{children:n(Ve.Provider,{value:s,children:n(di,{history:fc,children:n(Sc,{children:n(ud,{})})})})})})})})},Rh=e=>{e&&e instanceof Function&&et(()=>import("./vendor-9396aa6c.js").then(t=>t.c3),["assets/vendor-9396aa6c.js","assets/lodash-63a25aa2.js"]).then(({getCLS:t,getFID:a,getFCP:r,getLCP:s,getTTFB:o})=>{t(e),a(e),r(e),s(e),o(e)})},Mh=ui.createRoot(document.getElementById("root"));Mh.render(n(tt.StrictMode,{children:n(mi,{store:Yt,children:n(Nh,{})})}));Rh();export{Be as A,_ as B,rs as C,ss as H,ne as M,w as a,W as b,Mu as c,Qu as d,ca as e,Ke as f,la as g,zn as h,I as i,X as j,Sm as k,te as t,cs as u};
