const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/store-manager-DSxfl9Lr.js","assets/vendor-DfgYjpZC.js","assets/lodash-Cs3fEaAR.js","assets/i18next-DbwsuLPt.js","assets/tanstack-BSKQklyj.js","assets/reagraph-BfrTLMkA.js"])))=>i.map(i=>d[i]);
import{am as _r,an as Tr,ao as Ps,ap as kr,s as n,aq as te,ar as Pr,as as it,at as Xt,au as Er,av as Ar,aw as Ir,ax as Nr,ay as Dr,az as Mr,aA as Rr,aB as Lr,r as u,aC as De,aD as Br,aE as L,aF as Me,aG as Ye,aH as he,aI as qr,aJ as fe,aK as Or,aL as we,aM as zr,aN as Q,aO as Fr,aP as en,aQ as S,aR as Hr,aS as In,aT as $r,aU as Wr,aV as Gr,aW as Vr,aX as Ur,aY as me,aZ as Es,a_ as pe,a$ as re,b0 as We,b1 as Yr,b2 as pt,b3 as xe,b4 as wn,b5 as gt,b6 as Qr,b7 as Kr,b8 as Jr,b9 as Zr,ba as As,bb as Is,bc as Xr,bd as Ns,be as eo,bf as to,bg as no,bh as xt,bi as so,bj as ao,bk as Ds,bl as et,bm as ro,bn as Ms,bo as Sn,bp as Rs,bq as Cn,br as Ls,bs as Nn,bt as oo,bu as rs,bv as io,bw as co,bx as lo,by as Bs,bz as uo,bA as mo,bB as qs,bC as Os,bD as ho,bE as gn,bF as po,bG as go,bH as xo,bI as fo,bJ as bo,bK as yo,bL as zs,bM as Fs,bN as Hs,bO as $s,bP as Ws,bQ as Gs,bR as jo,bS as vo,bT as xn,bU as wo,bV as So,bW as Co,bX as nt,bY as Vs,bZ as Us,b_ as _o,b$ as To,c0 as ko,c1 as Dt,c2 as Mt,c3 as Po,c4 as Eo,c5 as Ao,c6 as os,c7 as is,c8 as tn,c9 as Ys,ca as Qs,cb as zt,cc as Ks,cd as Js,ce as Io,cf as No,cg as Do,ch as Mo,ci as Ro,cj as Lo,ck as Bo,cl as qo,cm as Oo,cn as zo,co as Zs,cp as Xs,cq as ea,cr as cs,cs as ls,ct as ds,cu as Fo,cv as vt,cw as Ho,cx as $o,cy as Wo,cz as Go,cA as Vo,cB as Uo,cC as Yo,cD as Qo,cE as Ko,cF as Jo,cG as Zo,cH as Xo,cI as Rt,cJ as fn,cK as bn,cL as ei,cM as ti,cN as ni,cO as si,cP as ai,cQ as ri,cR as oi,cS as ii,cT as ci,cU as li,cV as di,cW as yn,cX as wt,cY as ta,cZ as na,c_ as ui,c$ as sa,d0 as mi,d1 as hi,d2 as us,d3 as pi,d4 as gi,d5 as xi,d6 as fi,d7 as bi,d8 as yi,d9 as ji,da as vi,db as wi}from"./vendor-DfgYjpZC.js";import{_ as be,b as Si,l as Ci}from"./lodash-Cs3fEaAR.js";import{i as Ft,B as _i}from"./i18next-DbwsuLPt.js";import{r as aa,u as Ti,a as ki,f as ms,g as Pi,b as Ei,c as Ai,d as Ii,e as Ni,h as Di,i as Mi,j as Ri,k as Dn}from"./tanstack-BSKQklyj.js";import{u as Li,G as Bi,I as qi}from"./reagraph-BfrTLMkA.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const o of r)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const o={};return r.integrity&&(o.integrity=r.integrity),r.referrerPolicy&&(o.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?o.credentials="include":r.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function a(r){if(r.ep)return;r.ep=!0;const o=s(r);fetch(r.href,o)}})();const Oi=["UNAUTHORIZED","UNKNOWN_ERROR"];function zi(e,t){return t&&"status"in t&&t.status===401?[...e,"UNAUTHORIZED"]:[...e,"UNKNOWN_ERROR"]}const nn=e=>(t,s)=>t!=null&&t.data?[{type:e,id:"LIST"},...t.data.map(({id:a})=>({type:e,id:a}))]:zi([{type:e,id:"LIST"}],s),Ct=e=>()=>[{type:e,id:"LIST"}],_t=(e,t)=>[{type:e,id:t}],He=(e,t)=>(s,a,r)=>t?[{type:e,id:r.id},{type:e,id:t}]:[{type:e,id:r.id}];function ra(e){const t=localStorage.getItem("settings");if(t)try{return JSON.parse(t)[e]}catch{return localStorage.removeItem("settings"),null}else return null}function Fi(e,t){const s=localStorage.getItem("settings");let a={};if(s)try{a=JSON.parse(s)}catch{localStorage.removeItem("settings")}a[e]=t,localStorage.setItem("settings",JSON.stringify(a))}const sn={getValue:e=>ra(e),setValue:(e,t)=>Fi(e,t)},Hi="https://api-develop.bonuts.ru/api/v1/",$i=_r({baseUrl:Hi,prepareHeaders:e=>{const t=ra("auth_token");return t&&e.set("Authorization",`Bearer ${t}`),e},mode:"cors",credentials:"include"}),Ht=Tr({baseQuery:$i,tagTypes:Oi,endpoints:()=>({})}),ae=Ht.injectEndpoints({endpoints:e=>({postAccountOperations:e.mutation({query:t=>({url:"/account_operations",method:"POST",body:t.body})}),getAccountOperations:e.query({query:t=>({url:"/account_operations",params:{tenant:t.tenant,account_id:t.accountId,page:t.page}})}),getAccountsById:e.query({query:t=>({url:`/accounts/${t.id}`,params:{tenant:t.tenant}})}),postAdminDeposit:e.mutation({query:t=>({url:"/admin_deposit",method:"POST",body:t.body})}),getCircles:e.query({query:t=>({url:"/circles",params:{tenant:t.tenant}})}),postCircles:e.mutation({query:t=>({url:"/circles",method:"POST",body:t.body})}),getCirclesById:e.query({query:t=>({url:`/circles/${t.id}`,params:{tenant:t.tenant}})}),patchCirclesById:e.mutation({query:t=>({url:`/circles/${t.id}`,method:"PATCH",body:t.body})}),deleteCirclesById:e.mutation({query:t=>({url:`/circles/${t.id}`,method:"DELETE",params:{tenant:t.tenant}})}),getDonuts:e.query({query:t=>({url:"/donuts",params:{tenant:t.tenant,all:t.all}})}),postDonuts:e.mutation({query:t=>({url:"/donuts",method:"POST",body:t.body})}),getDonutsById:e.query({query:t=>({url:`/donuts/${t.id}`,params:{tenant:t.tenant}})}),putDonutsById:e.mutation({query:t=>({url:`/donuts/${t.id}`,method:"PUT",body:t.body})}),getEvents:e.query({query:t=>({url:"/events",params:{tenant:t.tenant,showMine:t.showMine,searchText:t.searchText,page:t.page}})}),getEventsById:e.query({query:t=>({url:`/events/${t.id}`,params:{tenant:t.tenant}})}),putEventsById:e.mutation({query:t=>({url:`/events/${t.id}`,method:"PUT",body:t.body})}),postEventsByIdComments:e.mutation({query:t=>({url:`/events/${t.id}/comments`,method:"POST",body:t.body})}),postInvitationsByIdAccept:e.mutation({query:t=>({url:`/invitations/${t.id}/accept`,method:"POST"})}),postInvitationsByIdDecline:e.mutation({query:t=>({url:`/invitations/${t.id}/decline`,method:"POST"})}),postInvitations:e.mutation({query:t=>({url:"/invitations",method:"POST",body:t.body})}),getInvitationsMy:e.query({query:()=>({url:"/invitations/my"})}),getPlugins:e.query({query:t=>({url:"/plugins",params:{tenant:t.tenant}})}),postPluginsByIdActivate:e.mutation({query:t=>({url:`/plugins/${t.id}/activate`,method:"POST",params:{tenant:t.tenant}})}),postPluginsByIdDeactivate:e.mutation({query:t=>({url:`/plugins/${t.id}/deactivate`,method:"POST",params:{tenant:t.tenant}})}),patchPluginsById:e.mutation({query:t=>({url:`/plugins/${t.id}`,method:"PATCH",body:t.body})}),getProfile:e.query({query:t=>({url:"/profile",params:{tenant:t.tenant}})}),getProfilesById:e.query({query:t=>({url:`/profiles/${t.id}`,params:{tenant:t.tenant}})}),putProfilesById:e.mutation({query:t=>({url:`/profiles/${t.id}`,method:"PUT",body:t.body})}),postProfilesByIdSetActivity:e.mutation({query:t=>({url:`/profiles/${t.id}/set_activity`,method:"POST",body:t.body})}),getProfiles:e.query({query:t=>({url:"/profiles",params:{tenant:t.tenant,show_balance:t.showBalance,show_score:t.showScore,show_sent:t.showSent,search_text:t.searchText}})}),getReportsProfiles:e.query({query:t=>({url:"/reports/profiles",params:{tenant:t.tenant,report_type:t.reportType,date_from:t.dateFrom,date_to:t.dateTo,search_text:t.searchText}})}),getRequests:e.query({query:t=>({url:"/requests",params:{active:t.active,archive:t.archive,incoming:t.incoming,my:t.my,tenant:t.tenant}})}),postRequests:e.mutation({query:t=>({url:"/requests",method:"POST",body:t.body})}),postRequestsActivate:e.mutation({query:t=>({url:"/requests/activate",method:"POST",body:t.body})}),postRequestsRefund:e.mutation({query:t=>({url:"/requests/refund",method:"POST",body:t.body})}),postRequestsRollback:e.mutation({query:t=>({url:"/requests/rollback",method:"POST",body:t.body})}),postRequestsClose:e.mutation({query:t=>({url:"/requests/close",method:"POST",body:t.body})}),getDonutsSchedulers:e.query({query:t=>({url:"/donuts_schedulers",params:{tenant:t.tenant}})}),postDonutsSchedulers:e.mutation({query:t=>({url:"/donuts_schedulers",method:"POST",body:t.body})}),getDonutsSchedulersById:e.query({query:t=>({url:`/donuts_schedulers/${t.id}`,params:{tenant:t.tenant}})}),patchDonutsSchedulersById:e.mutation({query:t=>({url:`/donuts_schedulers/${t.id}`,method:"PATCH",body:t.body})}),deleteDonutsSchedulersById:e.mutation({query:t=>({url:`/donuts_schedulers/${t.id}`,method:"DELETE",params:{tenant:t.tenant}})}),postTenantsByTenantNameJoin:e.mutation({query:t=>({url:`/tenants/${t.tenantName}/join`,method:"POST"})}),getTenantCurrent:e.query({query:t=>({url:"/tenant/current",params:{tenant:t.tenant}})}),putTenantCurrent:e.mutation({query:t=>({url:"/tenant/current",method:"PUT",body:t.body})}),getTenantsAccessible:e.query({query:()=>({url:"/tenants/accessible"})}),getTenants:e.query({query:()=>({url:"/tenants"})}),getTies:e.query({query:t=>({url:"/ties",params:{tenant:t.tenant,date_from:t.dateFrom,date_to:t.dateTo}})}),postAvatars:e.mutation({query:t=>({url:"/avatars",method:"POST",body:t.body})}),postRegister:e.mutation({query:t=>({url:"/register",method:"POST",body:t.body})}),postConfirmEmail:e.mutation({query:t=>({url:"/confirm_email",method:"POST",body:t.body})}),getConfirmEmail:e.query({query:t=>({url:"/confirm_email",params:{token:t.token}})}),postDemoAuthenticate:e.mutation({query:()=>({url:"/demo_authenticate",method:"POST"})}),postAuthenticate:e.mutation({query:t=>({url:"/authenticate",method:"POST",body:t.body})}),postLogout:e.mutation({query:()=>({url:"/logout",method:"POST"})}),postSendConfirmEmail:e.mutation({query:t=>({url:"/send_confirm_email",method:"POST",body:t.body})}),postRefreshToken:e.mutation({query:()=>({url:"/refresh_token",method:"POST"})}),getUsersRecover:e.query({query:t=>({url:"/users/recover",params:{recover_token:t.recoverToken}})}),putUsersPassword:e.mutation({query:t=>({url:"/users/password",method:"PUT",body:t.body})}),postUsersPassword:e.mutation({query:t=>({url:"/users/password",method:"POST",body:t.body})}),postUsersGenerateTg:e.mutation({query:t=>({url:"/users/generate_tg",method:"POST",params:{tenant:t.tenant}})})}),overrideExisting:!1}),{usePostAccountOperationsMutation:Wi,useGetAccountOperationsQuery:Sp,useGetAccountsByIdQuery:Cp,usePostAdminDepositMutation:Gi,useGetCirclesQuery:_p,usePostCirclesMutation:Tp,useGetCirclesByIdQuery:kp,usePatchCirclesByIdMutation:Vi,useDeleteCirclesByIdMutation:Ui,useGetDonutsQuery:Pp,usePostDonutsMutation:Ep,useGetDonutsByIdQuery:Yi,usePutDonutsByIdMutation:Ap,useGetEventsQuery:Ip,useGetEventsByIdQuery:Np,usePutEventsByIdMutation:Qi,usePostEventsByIdCommentsMutation:Ki,usePostInvitationsByIdAcceptMutation:Dp,usePostInvitationsByIdDeclineMutation:Mp,usePostInvitationsMutation:Ji,useGetInvitationsMyQuery:Rp,useGetPluginsQuery:Lp,usePostPluginsByIdActivateMutation:Bp,usePostPluginsByIdDeactivateMutation:qp,usePatchPluginsByIdMutation:Op,useGetProfileQuery:oa,useGetProfilesByIdQuery:Zi,usePutProfilesByIdMutation:Xi,usePostProfilesByIdSetActivityMutation:zp,useGetProfilesQuery:Fp,useGetReportsProfilesQuery:Hp,useGetRequestsQuery:$p,usePostRequestsMutation:ec,usePostRequestsActivateMutation:tc,usePostRequestsRefundMutation:nc,usePostRequestsRollbackMutation:sc,usePostRequestsCloseMutation:ac,useGetDonutsSchedulersQuery:Wp,usePostDonutsSchedulersMutation:Gp,useGetDonutsSchedulersByIdQuery:Vp,usePatchDonutsSchedulersByIdMutation:Up,useDeleteDonutsSchedulersByIdMutation:Yp,usePostTenantsByTenantNameJoinMutation:rc,useGetTenantCurrentQuery:oc,usePutTenantCurrentMutation:Qp,useGetTenantsAccessibleQuery:Kp,useGetTenantsQuery:Jp,useGetTiesQuery:Zp,usePostAvatarsMutation:Xp,usePostRegisterMutation:ic,usePostConfirmEmailMutation:cc,useGetConfirmEmailQuery:lc,usePostDemoAuthenticateMutation:dc,usePostAuthenticateMutation:uc,usePostLogoutMutation:mc,usePostSendConfirmEmailMutation:hc,usePostRefreshTokenMutation:ia,useGetUsersRecoverQuery:pc,usePutUsersPasswordMutation:gc,usePostUsersPasswordMutation:xc,usePostUsersGenerateTgMutation:eg}=ae,jn={token:void 0,tenant:void 0,isAuthenticated:!1,isAuthenticating:!1,profile:void 0},ca=Ps({name:"auth",initialState:jn,reducers:{logout:()=>jn,authenticate:(e,t)=>{e.isAuthenticated=!0,e.isAuthenticating=!1,e.token=t.payload.token,e.tenant=t.payload.tenant},setProfile:(e,t)=>{be.isEqual(e.profile,t.payload)||(e.profile=t.payload)}},extraReducers:e=>{e.addMatcher(ae.endpoints.postDemoAuthenticate.matchPending,t=>{t.isAuthenticating=!0}).addMatcher(ae.endpoints.postDemoAuthenticate.matchFulfilled,(t,s)=>{var a;t.token=s.payload.auth_token,s.payload.tenants.length===1&&(t.tenant=((a=s.payload.tenants[0])==null?void 0:a.name)||""),t.isAuthenticated=!0,t.isAuthenticating=!1}).addMatcher(ae.endpoints.postRefreshToken.matchFulfilled,(t,s)=>{var a;t.token=s.payload.auth_token,s.payload.tenants.length===1&&(t.tenant=((a=s.payload.tenants[0])==null?void 0:a.name)||""),t.isAuthenticated=!0,t.isAuthenticating=!1}).addMatcher(ae.endpoints.postDemoAuthenticate.matchRejected,t=>{t.isAuthenticated=!1,t.isAuthenticating=!1,t.token=void 0,t.tenant=void 0,t.profile=void 0}).addMatcher(ae.endpoints.postAuthenticate.matchPending,t=>{t.isAuthenticating=!0}).addMatcher(ae.endpoints.postAuthenticate.matchFulfilled,(t,s)=>{var a;t.token=s.payload.auth_token,s.payload.tenants.length===1&&(t.tenant=((a=s.payload.tenants[0])==null?void 0:a.name)||""),t.isAuthenticated=!0,t.isAuthenticating=!1}).addMatcher(ae.endpoints.postAuthenticate.matchRejected,t=>{t.isAuthenticated=!1,t.isAuthenticating=!1,t.token=void 0,t.tenant=void 0,t.profile=void 0}).addMatcher(ae.endpoints.postLogout.matchPending,()=>jn)}}),Mn=ca.actions,fc=ca.reducer;var ct=(e=>(e.Success="success",e.Error="error",e.Warning="warning",e.Info="info",e))(ct||{});const bc={isOpen:!1,severity:ct.Success,message:""},yc=Ps({name:"notification",initialState:bc,reducers:{setNotification:(e,t)=>{e.isOpen=!0,e.severity=t.payload.severity,e.message=t.payload.message},clearNotification:e=>{e.isOpen=!1,e.severity=ct.Success,e.message=""}}}),jc=yc.reducer,vc={[Ht.reducerPath]:Ht.reducer,auth:fc,notification:jc},wc=e=>{kr(e,{preventDuplicate:!0,variant:ct.Error,action:t=>n.jsx(te,{sx:{textTransform:"none",color:"black"},onClick:()=>Pr(t),children:n.jsx(it,{})})})},y=()=>{const{t:e}=Xt(),t=(s,a)=>{let r="";return s&&(r=e(s,{...a!=null&&a.count||(a==null?void 0:a.count)===0?{count:a==null?void 0:a.count}:{}}),a!=null&&a.capitalize&&(r=be.capitalize(r))),r};return{translate:t,t}};var q=(e=>(e.edit="edit",e.error="error",e.employees="employees",e.employee="employee",e.employment_date="Employment date",e.empty_events_placeholder="you dont have any events yet",e.expiration_date="expiration date",e.email_notification="email notification",e.email_confirmation="email confirmation",e.email_address="email address",e.email_address_must_be_valid="email address must be valid",e.every_week="every week",e.every_month="every month",e))(q||{});const ke=()=>{const{enqueueSnackbar:e,closeSnackbar:t}=Er(),{t:s}=y();return{showNotification:(o,i)=>{const c=e(s(o),{variant:i||ct.Success,action:l=>n.jsx(te,{sx:{textTransform:"none",color:"black"},onClick:()=>t(l),children:n.jsx(it,{})})});return{closeNotify:()=>t(c)}},showGeneralError:()=>{e(s(q.error),{variant:ct.Error,action:o=>n.jsx(te,{sx:{textTransform:"none",color:"black"},onClick:()=>t(o),children:n.jsx(it,{})})})}}};var oe=(e=>(e.Buy="Buy",e.EDIT="Edit",e.Description="Description",e.Delivery_days="delivery days",e.DONUTS="Donuts",e.PROFILE="Profile",e.ONLY_YOU_CAN_SEE_IT="Only you can see it",e.REFRESH="Refresh",e.SIGN_OUT="Sign_Out",e.SUBMIT="Submit",e.DISCARD="Discard",e.NEXT="Next",e.MORE="More",e.NO_OPTIONS="No options",e.On_stock="on stock",e.PTS="PTS",e.SEARCH_STRING="Search string",e))(oe||{}),Xe=(e=>(e.PRICE_ASC="price asc",e.PRICE_DESC="price desc",e.DATE_ASC="date asc",e.NEWEST="newest",e.SORT_BY_ALPHABET="sort by alphabet",e.NAME_DESC="name desc",e))(Xe||{}),la=(e=>(e.DATA_FETCHING_ERROR="Data fetching error",e))(la||{}),V=(e=>(e.EMPTY_STRING="",e.DOT=".",e.COMMA=",",e.SPACE=" ",e.SEMICOLON=":",e.DASH="-",e))(V||{});const Sc=e=>t=>s=>{var o,i,c,l,d,m;const{dispatch:a}=e,{setValue:r}=sn;return Ar(s)&&(console.warn("We got a rejected action!"),console.log(s),(i=(o=s==null?void 0:s.payload)==null?void 0:o.data)!=null&&i.error&&wc(Ft.t((l=(c=s==null?void 0:s.payload)==null?void 0:c.data)==null?void 0:l.message)||Ft.t((m=(d=s.payload)==null?void 0:d.data)==null?void 0:m.errorText)||la.DATA_FETCHING_ERROR),s.payload.status===401&&(r("auth_token",null),r("tenant",null),a(Mn.logout()),a(ae.util.resetApiState()))),t(s)},{createReduxHistory:Cc,routerMiddleware:_c,routerReducer:Tc}=Ir({history:Nr()}),kc=e=>Dr({reducer:{router:Tc,...vc},devTools:!1,middleware:t=>t().concat(_c,Ht.middleware,Sc),...e}),an=kc(),Ae=()=>Lr(),ie=Rr,Pc=Cc(an);Mr(an.dispatch);const Qe=u.createContext({isDrawerOpen:!1,toggleDrawer:()=>{},menuRoutes:[],routes:{}});var v=(e=>(e.Login="Login",e.Logout="Logout",e.Registration="Registration",e.RequestRecover="RequestRecover",e.Recover="Recover",e.Dashboard="Dashboard",e.Donuts="Donuts",e.DonutPreview="DonutPreview",e.DonutEdit="DonutEdit",e.Profile="Profile",e.Requests="Requests",e.IncomingRequests="IncomingRequests",e.ActiveRequests="ActiveRequests",e.ClosedRequests="ClosedRequests",e.Employees="Employees",e.EmployeePreview="EmployeePreview",e.Settings="Settings",e.Store="Store",e.Schedulers="Schedulers",e.Plugins="Plugins",e.Share="Share",e.Tenant="Tenant",e.TenantList="TenantList",e.Statistics="Statistics",e.AccountOperations="AccountOperations",e.MyRequests="MyRequests",e.Home="Home",e.Circles="Circles",e.ConfirmEmail="ConfirmEmail",e.Event="Event",e.Invitations="Invitations",e))(v||{});const _={Home:"/home",AccountOperations:"/account/:id",ActiveRequests:"active_requests",ClosedRequests:"closed_request",Dashboard:"/",DonutPreview:"/d/:id",DonutEdit:"/donut_edit/:id",Donuts:"/donuts",MyRequests:"/my_requests",IncomingRequests:"/incoming_requests",Login:"/login",Logout:"/logout",Employees:"/employees",EmployeePreview:"/e/:id",Event:"/event/:id",Plugins:"/plugins",Profile:"/my",RequestRecover:"/recover_password",Recover:"/recover_password/:token",Registration:"/registration",Requests:"/requests",Schedulers:"/schedulers",Settings:"/settings",Share:"/share",Statistics:"/statistic",Store:"/store-manager",Tenant:"/tenant",TenantList:"/tenants_list",Circles:"/circles",ConfirmEmail:"/confirm_email/:token",Invitations:"/invitations"},Ec={redirects:[{from:_[v.Login],to:_[v.Dashboard],authenticated:!0}]},Rn=e=>{var s,a,r,o,i,c,l,d,m,h,p,f,x,g,b,j,C,R,N,W;return e?{id:Number(e.id),...e.attributes,user_id:(s=e.attributes)!=null&&s.user_id?Number((a=e.attributes)==null?void 0:a.user_id):void 0,position:(r=e.attributes)==null?void 0:r.position,user_name:(o=e.attributes)==null?void 0:o.name,admin:(i=e.attributes)==null?void 0:i.admin,user_avatar:(c=e.attributes)==null?void 0:c.user_avatar,email:(l=e.attributes)==null?void 0:l.email,first_name:(d=e.attributes)==null?void 0:d.first_name,last_name:(m=e.attributes)==null?void 0:m.last_name,roles:(h=e.attributes)==null?void 0:h.roles,tenant:(p=e.attributes)==null?void 0:p.tenant,circles:(f=e.attributes)==null?void 0:f.circles,birthdate:((x=e.attributes)==null?void 0:x.birthdate)||null,in_date:((g=e.attributes)==null?void 0:g.in_date)||null,bio:((b=e.attributes)==null?void 0:b.bio)||void 0,contact:((j=e.attributes)==null?void 0:j.contact)||void 0,self_account:(C=e.attributes)==null?void 0:C.self_account,distrib_account:(R=e.attributes)==null?void 0:R.distrib_account,created_at:(N=e.attributes)==null?void 0:N.created_at,tg_code:((W=e.attributes)==null?void 0:W.tg_code)||void 0}:void 0},da=e=>{var t;if(!(!(e!=null&&e.data)||!((t=e==null?void 0:e.data)!=null&&t.id)))return Rn(e.data)},ua=e=>{const{data:t}=e;return t?t.map(s=>{const{attributes:a,id:r}=s;return{...a,email:(a==null?void 0:a.email)||"",birthdate:(a==null?void 0:a.birthdate)||null,in_date:(a==null?void 0:a.in_date)||null,bio:(a==null?void 0:a.bio)||void 0,contact:(a==null?void 0:a.contact)||void 0,tg_code:(a==null?void 0:a.tg_code)||void 0,id:Number(r)}}):[]},ma=ae.enhanceEndpoints({addTagTypes:["Profiles"],endpoints:{getProfiles:{providesTags:nn("Profiles")},postProfilesByIdSetActivity:{invalidatesTags:He("Profiles")},putProfilesById:{invalidatesTags:He("Profiles")},getProfilesById:{providesTags:He("Profiles")}}}),ye=e=>e.auth.tenant,ha=e=>e.auth.profile,Ac=(e,t=1e3)=>({profilerStart:()=>{},profilerStop:()=>{}}),Re=e=>{const{profilerStart:t,profilerStop:s}=Ac(`apiTransaltor for ${e.endpoint.name}`,0),{endpoint:a,args:r,pollingInterval:o=1e3,translator:i=g=>g,skip:c}=e,[l,d]=u.useState([]),m=ie(ye),{data:h,isLoading:p,isSuccess:f,refetch:x}=a.useQuery({...r,tenant:m},{pollingInterval:0,refetchOnMountOrArgChange:!0,skip:c});return u.useEffect(()=>{if(!h)d(()=>[]);else{t();const g=i(h);be.isEqual(l,g)||d(g),s()}},[h]),{objects:l,isLoading:p,isSuccess:f,refetch:x}},Ln=(e={})=>{const{searchText:t}=e;return Re({endpoint:ma.endpoints.getProfiles,translator:ua,args:{searchText:t}})},P=e=>n.jsx(De,{...e,component:"div"}),ce=e=>n.jsx(Br,{...e}),Ge=L(te,{shouldForwardProp:()=>!0})(()=>({boxShadow:"none",textTransform:"none",fontSize:16,padding:"6px 12px"})),lt=({profile:e,onClick:t,className:s})=>{var a,r;return n.jsx(Ge,{className:s,onClick:t,disableRipple:!0,startIcon:n.jsx(Ye,{src:((r=(a=e.user_avatar)==null?void 0:a.thumb)==null?void 0:r.url)||void 0,alt:`${e.name} ${e.name}`}),children:n.jsx(Me,{variant:"body2",children:e.name&&n.jsx("span",{children:e.name})})})},k=L(Me,{shouldForwardProp:e=>e!=="isPreformatted"})(({isPreformatted:e})=>({...e?{whiteSpace:"pre-wrap"}:null}));var A=(e=>(e.xs="xs",e.sm="sm",e.md="md",e.lg="lg",e))(A||{}),D=(e=>(e.password="password",e.tags="tags",e.imageUpload="imageUpload",e.text="text",e.number="number",e.textarea="textarea",e.date="date",e.switch="switch",e.radio="radio",e))(D||{});const w=e=>n.jsx(he,{...e}),Ke=L(te,{shouldForwardProp:()=>!0})(()=>({borderRadius:"30px",fontSize:10})),rt=()=>{},pa=e=>{const{props:t,onClear:s,value:a,clearable:r}=e;return{...t,...r&&{endAdornment:n.jsx(qr,{position:"end",children:!!a&&n.jsx(fe,{onClick:o=>{o.preventDefault(),s()},children:n.jsx(Or,{})})})}}},qt=e=>{const{translate:t}=y(),{stringLabel:s,onClear:a=rt,name:r,clearable:o=!1,shouldTranslate:i=!0,...c}=e,{InputProps:l={},value:d,placeholder:m,label:h}=c,p=pa({clearable:o,onClear:a,value:d,props:l});return n.jsx(we,{...c,name:r,placeholder:i?t(m):m,label:i?t(s)||h:s||h,InputProps:p,value:d})},T=()=>{},rn=e=>{const{setSorter:t=T,setSearch:s,buttons:a,debounceDelay:r=0,className:o}=e,{translate:i}=y(),[c,l]=u.useState(""),d=zr(c,r),m=f=>{r||s(f),l(f)};u.useEffect(()=>{r&&s(d)},[d]);const h=f=>{m(f.target.value||"")},p=()=>{m("")};return n.jsxs(n.Fragment,{children:[n.jsx(qt,{color:"primary",name:"filter-donuts",placeholder:`${oe.SEARCH_STRING}`,type:D.text,value:c,clearable:!0,onClear:p,onChange:h,className:Q(o,{"mb-3":a==null?void 0:a.length}),size:"small",sx:{width:"100%"}}),a!=null&&a.length?n.jsx(w,{direction:{xs:"column",sm:"row"},className:"mb-5",spacing:{xs:1,sm:2},children:a==null?void 0:a.map(f=>n.jsx(Ke,{variant:"outlined",onClick:x=>{x.preventDefault(),t(f.sorter)},color:"primary",children:i(f.name)},f.name))}):null]})},Lt=e=>e?(e.name||e.last_name||e.first_name||e.email||"").toLowerCase():V.EMPTY_STRING,hs={sorterByName:(e,t)=>Lt(e)>Lt(t)?1:Lt(e)<Lt(t)?-1:0,sorterByDate:(e,t)=>{const s=new Date(t.created_at||"1970/01/01"),a=new Date(e.created_at||"1970/01/01");return s-a}},ga=()=>[{name:Xe.SORT_BY_ALPHABET,sorter:hs.sorterByName},{name:Xe.NEWEST,sorter:hs.sorterByDate}],_n=({title:e,onClick:t,profiles:s,setSorter:a,setSearch:r=T,subTitle:o,children:i,hideSearch:c})=>{const l=ga();return n.jsx(ce,{className:"width-100 height-100",children:n.jsxs(w,{className:"width-100 height-100",children:[n.jsxs(P,{className:"mr-4 ml-4",children:[n.jsx(k,{variant:"h6",className:"mb-2",children:e}),n.jsx(k,{variant:"body2",className:"mb-2",children:o}),!c&&n.jsx(rn,{setSearch:r,setFilter:T,setSorter:a,buttons:l})]}),n.jsx(P,{className:"m-2 flex-grow",children:s.map(d=>n.jsx(lt,{profile:d,onClick:()=>t(d)},d.id))}),i]})})};var G=(e=>(e.author="author",e.accept="accept",e.amount="amount",e.approximate_action_time="approximate action time",e.add_new_scheduler="add new scheduler",e.admin_deposit="admin deposit",e.add_comment="add some comment",e.available_employees="available employees",e.are_you_sure="are you sure?",e.are_you_sure_to_delete="are you sure to delete?",e.active="active",e.active_request="active requests",e.activated="activated",e.activate="activate",e.access_denied="access denied",e.admin="admin",e.about_myself="About myself",e))(G||{}),Se=(e=>(e.birthday="date of birth",e.blocked="blocked",e.birthday_donuts="birthday donuts",e.birthday_points="birthday points",e.birthday_message="birthday_message",e.burn_unused_donuts="burn unused donuts",e.back="back",e.by_name="by name",e.balance="balance",e))(Se||{}),E=(e=>(e.close="close",e.closed="closed",e.coins="coins",e.cancel="cancel",e.create="create",e.created="created",e.contact="Contact",e.comment="comment",e.comment_is_required="comment is required",e.confirmation="confirmation",e.confirm="confirm",e.confirmed="confirmed",e.confirm_email="confirm email",e.closed_requests="closed requests",e.choose_employees="choose employees",e.choose_type="choose type",e.choose_day="choose day",e.choose_time="choose time",e.choose_timezone="choose timezone",e.confirmation_email_was_sent_to="confirmation email was sent to",e.connect_to_telegram="connect to telegram",e.connect="подключить",e))(E||{}),ue=(e=>(e.day="day",e.delivery_days="delivery days",e.decline="decline",e.deactivate="deactivate",e.description="description",e.disable_account="disable account",e.disabled="disabled",e.domain="domain",e.demo="demo",e.donuts="donuts",e))(ue||{}),dt=(e=>(e.filtered="filtered",e.first_name="first name",e))(dt||{}),on=(e=>(e.go_to="go to",e))(on||{}),Bn=(e=>(e.history="history",e))(Bn||{}),qe=(e=>(e.in_date="in date",e.invitations="invitations",e.incoming="incoming",e.i_can_spend="i can spend",e.i_can_share="i can share",e.integrations="integrations",e))(qe||{}),qn=(e=>(e.join="join",e))(qn||{}),ut=(e=>(e.last_name="last name",e))(ut||{}),$e=(e=>(e.more="more",e.my_teams="my teams",e.max_amount_is="max amount is",e.min_amount_is="min amount is",e))($e||{}),Z=(e=>(e.not_active="not active",e.name="name",e.no_name="no name",e.name_is_required="name is required",e.next="next",e.new_donut="new donut",e.not_found="not found",e.new_circle="new circle",e.new_invitation="new invitation",e.new_scheduler="new scheduler",e.new_invitation_was_created="new invitation was created",e.new_invitation_email_was_sent="new invitation email was sent",e.not_connected="not connected",e))(Z||{}),kt=(e=>(e.on_stock="on stock",e.ok="ok",e))(kt||{}),$=(e=>(e.profile="profile",e.profiles="profiles",e.price="price",e.previous="previous",e.preview="preview",e.purchase="purchase",e.password="password",e.password_repeat="password_repeat",e.page_not_found="page not found",e.password_changed="password changed",e.password_is_required="password is required",e.password_confirm_is_required="password confirm is required",e.passwords_do_not_math="password do not match",e.period_start="period start",e.period_end="period end",e))($||{}),de=(e=>(e.request_added="request added",e.rows_per_page="rows per page",e.records="records",e.requests="requests",e.remove_all="remove all",e.refunded="refunded",e.refund="refund",e.request_been_set_incoming="request has been set as incoming",e.request_been_set_closed="request has been set as close",e.request_been_set_active="request has been set as active",e.request_has_been_refunded="request has been refunded",e.restore_password="restore password",e.recover_email_has_been_sent="recover email has been sent",e))(de||{}),O=(e=>(e.save="save",e.search="search",e.selected="selected",e.show_only_mine="show only mine",e.select_all="select all",e.share="share",e.selected_employees="selected employees",e.set_password="set password",e.send_confirmation_email="send confirmation email",e.store_admin="store admin",e.supply_days="supply days",e.settings_updated=" settings updated",e.sign_in="sign in",e.send="send",e.sign_up="sign_up",e.soon_will_be_back="soon_will_be_back",e.scheduler_created="scheduler created",e.scheduler_updated="scheduler updated",e.scheduler_deleted="scheduler deleted",e.scheduler_delete="scheduler delete",e))(O||{}),se=(e=>(e.teams_you_can_join="teams you can join",e.to="to",e.to_profile="to profile",e.to_store="to store",e.transfer_type="transfer type",e.transfer_points="transfer points",e.transfer_donuts="transfer donuts",e.transferred="transferred",e.transfer="transfer",e.time_is_required="time is required",e.tooltip_scheduler_time="tooltip_scheduler_time",e.total_donuts_received="total received",e.total_donuts_sent="total received",e.telegram_code="telegram code",e))(se||{}),$t=(e=>(e.under_construct="under construct",e.updated="updated",e))($t||{});const cn=L(te,{shouldForwardProp:e=>e!=="noTransform"})(({noTransform:e})=>({textTransform:e?"none":void 0})),xa=L(cn,{shouldForwardProp:()=>!0})(({theme:e})=>({fontSize:16,background:e.palette.primary.light,color:e.palette.getContrastText(e.palette.primary.light),padding:"6px 12px","&:hover":{background:e.palette.primary.dark,color:e.palette.getContrastText(e.palette.primary.dark)}})),fa=({loading:e=!1})=>n.jsx(Fr,{sx:{color:"#fff",zIndex:t=>t.zIndex.drawer+1},open:e,onClick:()=>{},children:n.jsx(en,{color:"inherit"})}),ba=u.createContext(()=>{}),Ic=({children:e})=>{const[t,s]=u.useState({}),a=u.useCallback((o,i)=>{s(c=>({...c,[o]:i}))},[]),r=u.useMemo(()=>Object.values(t).some(o=>o),[t]);return n.jsxs(ba.Provider,{value:a,children:[n.jsx(fa,{loading:r}),e]})},K=(e,t=!1)=>{const s=u.useContext(ba);u.useEffect(()=>(s(e,t),()=>s(e,!1)),[t]);const a=u.useCallback(()=>{s(e,!0)},[]),r=u.useCallback(()=>{s(e,!1)},[]);return{openLoader:a,closeLoader:r}};var ne=(e=>(e.Default="default",e.Circles="circles",e.Profile="profile",e.Events="events",e.DetailedEvent="detailedEvent",e.Donuts="donuts",e.DonutPreview="donut_preview",e.Employees="employees",e.EmployeePreview="employee_preview",e.Requests="requests",e.StoreManager="store_manager",e.ShareAll="share_all",e.ConfirmEmail="confirm_email",e.Schedulers="schedulers",e.AccessibleTenants="accessible_tenants",e.MyTenants="my_tenants",e.MyInvitations="my_invitations",e.Plugins="Plugins",e))(ne||{});const ya=(e,t)=>{const{searchField:s,initialSorter:a}=t,[r,o]=u.useState(""),[i,c]=u.useState([]),[l,d]=u.useState(a),m=p=>{d(()=>p)};return{filteredList:u.useMemo(()=>e.filter(p=>p[s]&&p[s].toLowerCase().indexOf(r.toLowerCase())>=0).sort(be.isFunction(l)?l:void 0),[r,i,e,l]),setSorter:m,setFilterFunction:c,setSearch:o}},Nc=({next:e=T,initialProfiles:t=[]})=>{const{objects:s=[],isLoading:a}=Ln(),[r,o]=u.useState(t),{t:i}=y();K(ne.ShareAll,a);const c=s.filter(g=>r.every(b=>b.id!==g.id)),{filteredList:l,setSorter:d,setSearch:m}=ya(c,{searchField:"name"}),h=g=>{o(b=>b.some(C=>C.id===g.id)?b:[...b,g])},p=g=>{o(b=>b.filter(j=>j.id!==g.id))},f=()=>{o([...l,...r])},x=()=>{o([])};return n.jsxs(n.Fragment,{children:[n.jsx(P,{className:"ml-4",children:n.jsx(k,{variant:"h5",children:i(E.choose_employees,{capitalize:!0})})}),n.jsxs(P,{className:"m-4",children:[n.jsxs(S,{container:!0,columnSpacing:2,rowSpacing:2,children:[n.jsx(S,{item:!0,xs:12,sm:6,children:n.jsx(_n,{title:i(G.available_employees,{capitalize:!0}),profiles:l,onClick:h,setSearch:m,setSorter:d,hideSearch:!c.length,children:n.jsx(n.Fragment,{children:c.length?n.jsx(P,{className:"m-4",children:n.jsx(Ke,{onClick:f,children:i(O.select_all)})}):null})})}),n.jsx(S,{item:!0,xs:12,sm:6,children:n.jsx(_n,{title:i(O.selected_employees,{capitalize:!0}),profiles:r,onClick:p,hideSearch:!r.length,children:n.jsx(n.Fragment,{children:r.length?n.jsx(P,{className:"m-4",children:n.jsx(Ke,{color:"secondary",onClick:x,children:i(de.remove_all)})}):null})})})]}),n.jsx(w,{direction:"row",alignItems:"center",justifyContent:"flex-end",className:"mt-4",children:n.jsx(xa,{disabled:!r.length,onClick:()=>{r.length&&e({profiles:r})},children:i(Z.next)})})]})]})};u.createContext(()=>{});const ja=u.createContext({}),va=u.createContext({}),Dc=({children:e,values:t,initialValues:s={}})=>n.jsx(ja.Provider,{value:t,children:n.jsx(va.Provider,{value:s,children:e})}),Wt=({offset:e,key:t})=>e?n.jsx(S,{item:!0,style:{padding:0},...e,zeroMinWidth:!0},t):null,wa=e=>{const{translate:t}=y(),{stringLabel:s,placeholder:a,onAnimationStart:r,onBlur:o,onFocus:i,name:c,...l}=e;return n.jsx(Hr,{...l,placeholder:t(a),label:t(s),name:c,parseError:d=>t(d.message)})},Pt=()=>{const e=In(),t=(r,o)=>{e.setValue(r,o,{shouldDirty:!0})},s=u.useContext(ja),a=u.useContext(va);return{onChange:t,values:s,initialValues:a}},Mc=e=>{const{name:t,id:s,placeholder:a,label:r,maxRows:o,minRows:i,value:c,required:l,disabled:d,rows:m}=e,{onChange:h}=Pt(),p=f=>{h(t,f.target.value)};return n.jsx(wa,{name:t,id:s,placeholder:a,stringLabel:r,value:c==null?void 0:c.toString(),onChange:p,required:l,minRows:i,maxRows:o,disabled:d,rows:m||10})},Rc=e=>{const{translate:t}=y(),{stringLabel:s,...a}=e;return n.jsx($r,{...a,inputProps:{placeholder:t(s),label:t(s),variant:"standard"}})},Lc=e=>{const{name:t,label:s,required:a,disabled:r,readOnly:o}=e,{onChange:i}=Pt(),c=l=>{i(t,(l==null?void 0:l.toDateString())||V.EMPTY_STRING)};return n.jsx(Rc,{readOnly:o,name:t,stringLabel:s,onChange:c,required:a,disabled:r})},Sa=u.forwardRef(({stringLabel:e,...t},s)=>{const{t:a}=y();return n.jsx(Wr,{...t,ref:s,label:a(e)})}),Bc=e=>{const{name:t,id:s,label:a,disabled:r,disabledLabel:o}=e,{getValues:i}=In(),{t:c}=y(),l=i(t),d=u.useMemo(()=>l?a:o||a,[l]);return n.jsx(Sa,{stringLabel:c(d),name:t,disabled:r,id:s})},qc=({field:e})=>{const{translate:t}=y(),{name:s,disabled:a,label:r,required:o}=e;return e.source?n.jsx(Gr,{required:o,label:r,valueKey:"key",name:s==null?void 0:s.toString(),disabled:a,options:e.source,parseError:i=>t(i.message)}):null},Gt=u.forwardRef((e,t)=>{const{translate:s}=y(),{stringLabel:a,onClear:r=rt,name:o,clearable:i=!1,component:c,...l}=e,{InputProps:d={},value:m,placeholder:h,label:p}=l,f=pa({clearable:i,onClear:r,value:m,props:d});return n.jsx(Vr,{...l,component:c,ref:t,name:o,placeholder:s(h),label:s(a)||p,InputProps:f,value:m,parseError:x=>s(x.message),variant:"standard"})}),Oc=e=>{const{name:t,id:s,minValue:a,maxValue:r,placeholder:o,readOnly:i,label:c,type:l,value:d,rows:m,required:h,disabled:p}=e,{onChange:f}=Pt(),x=g=>{const b=be.isNumber(g.target.value)?Number(g.target.value):g.target.value;f(t,b)};return n.jsx(Gt,{name:t,id:s,placeholder:o,stringLabel:c,type:l,value:d,multiline:l===D.text,rows:m,required:h,sx:{width:"100%"},disabled:p,onChange:x,InputProps:{inputProps:{min:a,max:r},readOnly:i}})},zc=({field:e,value:t,id:s})=>{const{source:a=[],label:r,placeholder:o,name:i,disabled:c,loading:l,readOnly:d}=e,{onChange:m}=Pt(),{translate:h}=y(),p=a.filter(x=>!t.find(g=>g.key===x.key)),f=(x,g)=>{m(i.toString(),g)};return n.jsx(Ur,{multiple:!0,id:s,options:p,getOptionLabel:x=>{var g;return x.label||((g=x.key)==null?void 0:g.toString())||(x==null?void 0:x.toString())},value:t,loading:l,readOnly:d,renderInput:x=>n.jsx(we,{...x,variant:"standard",label:h(r),placeholder:t?V.EMPTY_STRING:h(o)}),onChange:f,noOptionsText:h(oe.NO_OPTIONS),disabled:c})},Ca=u.createContext(()=>{}),On=u.createContext(()=>{}),_a=u.createContext([]),Ta={modalImage:"modal-image"},Fc=({url:e,className:t})=>n.jsx("div",{className:t,children:n.jsx("img",{className:Ta.modalImage,src:e,alt:"..."})}),M=e=>`& .${e}`,Hc="&:hover",$c=L(Fc,{})(({theme:e})=>({fontSize:"0",verticalAlign:"top",maxHeight:"600px",[e.breakpoints.down("sm")]:{display:"flex",alignItems:"center",justifyContent:"center",height:"100%"},[M(Ta.modalImage)]:{display:"block",maxWidth:"100%",maxHeight:"600px",verticalAlign:"top",padding:"5px"}})),ka=(e,t,s)=>(t&&typeof t=="object"&&!(t instanceof Date)&&!(t instanceof File)?Object.keys(t).length?Object.keys(t).forEach(a=>{ka(e,t[a],s?`${s}[${a}]`:a)}):e.append(s,JSON.stringify([])):t instanceof Date?e.append(s,t.toISOString()):e.append(s,t===null?"":t),e),Wc=e=>ka(new FormData,e),zn=(e,t,s)=>({url:e,method:t,credentials:"include",body:Wc(s==null?void 0:s.body)}),ft=ae.injectEndpoints({endpoints:e=>({createDonut:e.mutation({query(t){return{url:"/donuts",method:"POST",credentials:"include",body:t}}}),updateDonut:e.mutation({query(t){return zn(`/donuts/${t.id}`,"PUT",t)}})})}),{useCreateDonutMutation:Gc,useUpdateDonutMutation:Vc}=ft,Pa=e=>{var t,s;return{perPage:Number((t=e==null?void 0:e.response)==null?void 0:t.headers.get("Per-Page")),total:Number((s=e==null?void 0:e.response)==null?void 0:s.headers.get("Total"))}},Vt=ae.enhanceEndpoints({addTagTypes:["Accounts","History"],endpoints:{getAccountsById:{providesTags:He("Accounts","Balance")},getAccountOperations(e){e.providesTags=(t,s,a)=>[{type:"Accounts",id:a.accountId}],e.transformResponse=(t,s)=>(t.paginator=Pa(s),t)}}}),{useGetAccountsByIdQuery:Uc}=Vt,Ea=()=>{const[e]=Xi(),t=ie(ye);return{updateProfile:async(a,r,o)=>{const i=await e({id:a==null?void 0:a.id.toString(),body:{...r,tenant:t}});return o==null||o(),i}}},Yc="profileLogic",Ie=()=>{const e=ie(ha),t=ie(ye),{updateProfile:s}=Ea(),{openLoader:a,closeLoader:r}=K(Yc),o=Ae(),{data:i,error:c,isLoading:l,refetch:d}=oa({tenant:t||void 0},{skip:!t});return u.useEffect(()=>{if(i){const f=da(i);f&&o(Mn.setProfile(f))}},[i]),{profile:e,isLoading:l,error:c,updateProfile:async(f,x)=>(a(),s(f,x,d).finally(()=>{r()})),authTenant:t,invalidateSelfBalance:()=>{var f;o(Vt.util.invalidateTags(_t("Accounts",(f=e==null?void 0:e.self_account)==null?void 0:f.id)))},invalidateDistribBalance:()=>{var f;o(Vt.util.invalidateTags(_t("Accounts",(f=e==null?void 0:e.distrib_account)==null?void 0:f.id)))}}},Fn=ft.enhanceEndpoints({addTagTypes:["Donuts"],endpoints:{getDonuts:{providesTags:["Donuts"]},postDonuts:{invalidatesTags:["Donuts"]}}}),Qc=()=>{const[e]=Gc(),t=Ae(),{profile:s}=Ie();return{postDonut:async(r,o)=>{const{logo:i,price:c,name:l}=r;if(s!=null&&s.tenant){const d=new FormData;i&&d.append("logo",i),d.append("tenant",s.tenant),d.append("price",c.toString()),d.append("name",l),e(d).unwrap().then(m=>{var h;m.data&&(t(Fn.util.invalidateTags(["Donuts"])),(h=o==null?void 0:o.onSuccess)==null||h.call(o,m))})}}}},Kc=()=>{const e=[{id:1,md:6,xs:12},{id:2,md:6,xs:12}];return{fields:[{image:!0,size:A.xs,name:"logo",label:"Logo",type:D.imageUpload,xs:12,md:12,group:1},{image:!1,size:A.xs,name:"name",label:"name",xs:12,required:!0,group:2},{disabled:!1,type:D.number,image:!1,size:A.xs,name:"price",label:"price",required:!0,xs:12,group:2}],groups:e}},Jc=({onSubmit:e})=>{const{fields:t,groups:s}=Kc(),a={fields:t,formId:"create-donut",groups:s,groupGap:0},r=o=>{e(o)};return n.jsx(Oe,{...a,onSubmit:r})},Zc=({onSubmit:e})=>n.jsx(P,{sx:{m:3,minHeight:"220px"},children:n.jsx(Jc,{onSubmit:e})}),Xc=({close:e=T})=>{const{postDonut:t}=Qc(),s=a=>t(a,{onSuccess:e});return n.jsx(Zc,{onSubmit:s})},Hn=e=>{const{authTenant:t}=Ie(),{data:s,error:a,isLoading:r}=Zi({id:(e==null?void 0:e.toString())||"",tenant:t||void 0});return{employee:da(s),isLoading:r,error:a}},Ze=e=>{const t=Ae(),{ViewEmployee:s}=je(),{t:a}=y();return{showEmployee:d=>{(d||e)&&t(me(`/e/${d||(e==null?void 0:e.id)}`))},showEmployeeModal:(d,m)=>{d&&s.show({id:d,title:m||a($.profile,{capitalize:!0})||V.EMPTY_STRING})},toEmployeeList:()=>{t(me(_[v.Employees]))},toDistribBalanceHistory:()=>{var m;const d=(m=e==null?void 0:e.distrib_account)==null?void 0:m.id;d?t(me(_[v.AccountOperations].replace(":id",d.toString()))):console.warn("Account id was not found in employee",e)},toSelfBalanceHistory:()=>{var m;const d=(m=e==null?void 0:e.self_account)==null?void 0:m.id;d?t(me(_[v.AccountOperations].replace(":id",d.toString()))):console.warn("Account id was not found in employee",e)}}},el="/assets/default_profile-utCvmf8F.png",tl="/assets/bonuts_sm-CrLwtGAu.png",$n=el,Ut=tl,Ot=e=>n.jsx(Es,{...e}),Aa=({title:e,onClick:t=T})=>n.jsx(Ot,{color:"info",title:e,label:e,sx:{maxWidth:150},onClick:t}),vn=3,nl=({employee:e,onGoToEmployeeClick:t,isLoading:s,className:a})=>{var c,l,d,m;const{t:r}=y(),o=pe(),i=re(o.breakpoints.down("sm"));return n.jsx(w,{flexDirection:"row",className:a,children:s?n.jsx(en,{color:"inherit"}):n.jsxs(n.Fragment,{children:[n.jsx(dn,{defaultImage:((c=e==null?void 0:e.user_avatar)==null?void 0:c.url)||$n}),n.jsx(w,{flexDirection:"column",justifyContent:"space-between",sx:{width:"100%"},children:n.jsxs(w,{flexDirection:"column",gap:2,children:[n.jsx(k,{variant:"h4",children:e==null?void 0:e.name}),n.jsxs(w,{flexDirection:"row",alignItems:"baseline",children:[n.jsx(k,{children:e==null?void 0:e.position}),n.jsx(Ke,{variant:"outlined",onClick:t,className:"ml-2",children:r(on.go_to)})]}),n.jsxs(w,{direction:"row",justifyContent:"center",alignItems:{sm:"center",xs:"center"},flexWrap:"wrap",spacing:1,gap:1,className:"ml-2 mt-2",children:[(l=e==null?void 0:e.circles)==null?void 0:l.filter((h,p)=>p<vn||!i).map(h=>n.jsx(Aa,{title:h.name})),i&&((d=e==null?void 0:e.circles)!=null&&d.length)&&((m=e==null?void 0:e.circles)==null?void 0:m.length)>vn?n.jsx(We,{title:e.circles.filter((h,p)=>p>=vn).map(h=>h.name).join(", "),children:n.jsx(Yr,{className:"pointer",onClick:t})}):null]})]})})]})})},sl=L(nl,{})(()=>({padding:"2px"})),al=({id:e,close:t=T,setModalLoading:s=T})=>{const{isLoading:a,employee:r}=Hn(e),{showEmployee:o}=Ze(r);u.useEffect(()=>{s(a)},[a]);const i=()=>{r!=null&&r.id&&(o(r==null?void 0:r.id),t())};return n.jsx(sl,{employee:r,onGoToEmployeeClick:i,isLoading:a})},Wn=ae.enhanceEndpoints({addTagTypes:["Circles"],endpoints:{postCircles:{invalidatesTags:Ct("Circles")},getCircles:{providesTags:nn("Circles")},getCirclesById:{providesTags:He("Circles")},patchCirclesById:{invalidatesTags:He("Circles")},deleteCirclesById:{invalidatesTags:["Circles"]}}}),{useGetCirclesByIdQuery:rl}=Wn,Gn=()=>ie(ye),ol=()=>{const{usePostCirclesMutation:e}=Wn,[t]=e(),s=Gn(),{showNotification:a}=ke();return{createCircle:(o,i)=>{const{name:c}=o;if(s&&c)t({body:{tenant:s,name:c.toString()}}).unwrap().then(l=>{var d;(d=i==null?void 0:i.onSuccess)==null||d.call(i,l),a(E.created)});else throw new Error("empty tenant or name")}}},il=()=>({fields:[{image:!1,size:A.xs,name:"name",label:"name",required:!0,type:D.text}]}),Ia=({onSubmit:e,hasInitial:t=!1,circle:s})=>{const{fields:a}=il(),r={fields:a,formId:"create-circle",groupGap:0},o=i=>{e(i)};return n.jsx(Oe,{...r,onSubmit:o,initialValues:s,hasInitial:t})},cl=({onSubmit:e})=>n.jsx(P,{sx:{m:3,minHeight:"80px",minWidth:"300px"},children:n.jsx(Ia,{onSubmit:e})}),ll=({close:e=T})=>{const{createCircle:t}=ol(),s=a=>t(a,{onSuccess:e});return n.jsx(cl,{onSubmit:s})};var Na=(e=>(e.yes="yes",e))(Na||{});const dl=({text:e,onSubmit:t,close:s=T})=>{const{t:a}=y(),r=()=>{t(),s()};return n.jsx(P,{sx:{m:1},children:n.jsxs(w,{children:[n.jsx("div",{className:"flex-grow pl-2",children:e}),n.jsxs(w,{alignItems:"center",justifyContent:"center",flexDirection:"row",gap:4,className:"mt-2",children:[n.jsx(Ge,{color:"error",onClick:()=>s(),children:a(E.cancel)}),n.jsx(Ge,{color:"success",onClick:r,children:a(Na.yes)})]})]})})},ul=({onSubmit:e,circle:t})=>n.jsx(P,{sx:{m:3,minHeight:"80px",minWidth:"300px"},children:n.jsx(Ia,{onSubmit:e,circle:t,hasInitial:!0})}),Da=()=>{const[e]=Vi(),[t]=Ui(),{profile:s}=Ie();return{patchCircle:async(o,i,c)=>{var d;const{name:l}=i;if(s!=null&&s.tenant&&l){const m=await e({id:o.toString(),body:{name:l,tenant:s==null?void 0:s.tenant}});return Object.getOwnPropertyDescriptor(m,"data")&&((d=c==null?void 0:c.onSuccess)==null||d.call(c,m.data)),m}},deleteCircle:async(o,i)=>{var c;if(s!=null&&s.tenant&&o){const l=await t({id:o.toString(),tenant:s==null?void 0:s.tenant});return Object.getOwnPropertyDescriptor(l,"data")&&((c=i==null?void 0:i.onSuccess)==null||c.call(i,l.data)),l}}}},ml=e=>{const{data:t}=e;return t?t.map(s=>{const{attributes:a,id:r}=s;return{...a,id:Number(r)}}):[]},hl=e=>{if(!e)return;const{data:t}=e;if(!t)return;const{attributes:s,id:a}=t;return{...s,id:Number(a)}},pl=e=>{const t=ie(ye),{data:s,error:a,isLoading:r,refetch:o}=rl({id:e,tenant:t||void 0},{skip:!e});return{circle:hl(s),isLoading:r,error:a,refetch:o}},gl=({close:e=T,circleId:t})=>{const{circle:s}=pl(t),{patchCircle:a}=Da(),r=o=>a(t,o,{onSuccess:e});return n.jsx(ul,{onSubmit:r,circle:s})},xl="transferDonuts",Vn=()=>{const[e]=Wi(),[t]=Gi(),s=Gn(),{profile:a,invalidateDistribBalance:r}=Ie(),{showNotification:o}=ke(),{openLoader:i,closeLoader:c}=K(xl,!1);return{transferMyDonuts:(m,h)=>{const{amount:p,comment:f,ids:x}=m;s&&(i(),e({body:{tenant:s,amount:p,from_profile_id:a==null?void 0:a.id,comment:f,burn_old:!1,to_self_account:!0,to_profile_ids:x||[],share_for_all:!1}}).unwrap().then(g=>{var b;(b=h==null?void 0:h.onSuccess)==null||b.call(h,g),r(),o(se.transferred)}).catch(g=>{var b;return(b=h==null?void 0:h.onError)==null?void 0:b.call(h,g.data.message)}).finally(()=>{c()}))},adminDeposit:(m,h)=>{const{amount:p,comment:f=V.EMPTY_STRING,ids:x,toSelfAccount:g}=m;s&&(i(),t({body:{tenant:s,amount:p,comment:f,to_profile_ids:x||[],account_type:g?"self":"distrib"}}).unwrap().then(b=>{var j;(j=h==null?void 0:h.onSuccess)==null||j.call(h,b),o(se.transferred)}).finally(()=>{c()}))}}},fl=()=>({fields:[{image:!1,size:A.xs,type:D.number,name:"amount",label:"amount",xs:12,required:!0},{disabled:!1,image:!1,size:A.xs,name:"comment",label:"comment",xs:12},{image:!1,size:A.md,name:"toSelfAccount",label:"user can spend in store",disabledLabel:"to can transfer to others",placeholder:"type",type:D.switch,xs:12}]}),bl=({profileIds:e,onSuccess:t})=>{const{adminDeposit:s}=Vn(),{fields:a}=fl(),r=o=>{const{amount:i,toSelfAccount:c,comment:l}=o;s({amount:i,toSelfAccount:c,comment:l,ids:e},{onSuccess:t})};return n.jsx(Oe,{formId:"admin-deposit",onSubmit:r,fields:a})},yl=({close:e=T,id:t})=>n.jsx(P,{sx:{m:3,minHeight:"250px"},children:n.jsx(bl,{profileIds:[t],onSuccess:e})}),jl=e=>{const{translate:t}=y();return{formSchema:pt().shape({amount:e?wn().transform((a,r)=>r===""?void 0:a).required(t("Required")).nullable().min(1,`${t($e.min_amount_is,{capitalize:!0})} 1`).max(e,`${t($e.max_amount_is,{capitalize:!0})} ${e}`):wn().min(1),comment:xe().required(t("Required"))})}},vl=e=>{const{maxAmount:t}=e,{formSchema:s}=jl(t),a=gt(s);return{fields:u.useMemo(()=>[{image:!1,size:A.xs,type:D.number,name:"amount",label:"amount",maxValue:t,minValue:1,xs:12,required:!0},{disabled:!1,image:!1,size:A.xs,name:"comment",label:"comment",placeholder:"comment",type:D.textarea,required:!0,xs:12}],[t]),resolver:a}},wl=e=>{if(!e)return;const{data:t}=e;if(!t)return;const{attributes:s,id:a}=t;return{...s,id:Number(a)}},Tt=e=>{const t=ie(ye),{data:s,error:a,isLoading:r,refetch:o}=Uc({id:e,tenant:t},{skip:!e||!t});return{account:wl(s),isLoading:r,error:a,refetch:o}};function Ve(){var U;const e=Ae(),{authenticate:t}=Mn,s=ie(H=>H.auth),[a,r]=u.useState(!0),[o,{isLoading:i,error:c}]=uc(),[l,{isLoading:d,error:m}]=dc(),[h]=mc(),{data:p}=oa({tenant:s.tenant||""},{skip:a||!s.tenant}),{getValue:f,setValue:x}=sn,[g,b]=u.useState(!0);u.useEffect(()=>{s.token?r(!1):r(!0)},[s.token]);const j=()=>({token:f("auth_token")||"",tenant:f("tenant")||""}),C=async H=>!!H.token,R=async H=>{var z;try{const le={body:{email:H.body.email.trim(),password:H.body.password}},ee=await o(le).unwrap();let I="";ee.currentTenant?I=ee.currentTenant:ee.tenants.length===1&&(I=((z=ee.tenants[0])==null?void 0:z.name)||""),x("auth_token",ee.auth_token),x("tenant",I)}catch(le){console.log(le)}},N=async()=>{var H;try{const z=await l().unwrap();let le="";z.currentTenant?le=z.currentTenant:z.tenants.length===1&&(le=((H=z.tenants[0])==null?void 0:H.name)||""),x("auth_token",z.auth_token),x("tenant",le)}catch(z){console.log(z)}},W=async()=>{x("auth_token",null),x("tenant",null),h().finally(()=>{e(me("/login")),e(ae.util.resetApiState())})},J=async()=>{b(!0);try{const H=j();return H.token?await C(H)?(e(t(H)),!0):(x("auth_token",""),e(me("/login")),!1):!1}finally{b(!1)}};return{isLogging:i||d,isAuthLoading:g,authError:c||m,signIn:R,demoSignIn:N,signOut:W,getAuth:j,checkAuth:J,auth:s,setTenant:H=>{x("tenant",H),J()},profile:p,currentRoles:(U=s.profile)==null?void 0:U.roles}}const Sl=({id:e,onSuccess:t})=>{var m,h;const{auth:s}=Ve(),{account:a}=Tt((h=(m=s.profile)==null?void 0:m.distrib_account)==null?void 0:h.id),{transferMyDonuts:r}=Vn(),{t:o}=y(),{fields:i,resolver:c}=vl({maxAmount:a==null?void 0:a.balance}),l=(p,f)=>{const{amount:x,comment:g}=p;r({amount:x,comment:g,ids:[e]},{onSuccess:t,onError:f})},d=u.useMemo(()=>({amount:1,comment:""}),[]);return n.jsx(Oe,{formId:"transfer-donuts",onSubmit:l,fields:i,resolver:c,submitCaption:o(se.transfer_donuts),hasInitial:!0,initialValues:d})},Cl=({close:e=T,id:t})=>{const s=pe(),a=re(s.breakpoints.down("sm"));return n.jsx(P,{sx:{m:3,minHeight:"400px",minWidth:a?void 0:"450px"},children:n.jsx(Sl,{id:t,onSuccess:e})})},ge={cardPrivate:"card-private",cardContent:"card-content",liked:"liked",cardActions:"card-actions",cardDateCaption:"card-date-caption",expand:"expand",expandOpened:"expand-opened",iconCaption:"icon-caption"};function _l(e,t,s){return ae.util.updateQueryData(e,t,a=>{var i;const r=(i=s==null?void 0:s.data)==null?void 0:i.data,o=Array.isArray(r)?r:[r];Array.isArray(o)&&o.forEach(c=>{if(a.data){const l=a.data.find(d=>d.id===c.id);l&&Object.assign(l,c)}})})}const ot=ft.enhanceEndpoints({addTagTypes:["Event"],endpoints:{getEvents(e){e.providesTags=["Event"],e.transformResponse=(t,s)=>(t.paginator=Pa(s),t)},putEventsById:{async onQueryStarted(e,{dispatch:t,queryFulfilled:s,getState:a}){const r=await s;ot.util.selectInvalidatedBy(a(),["Event"]).forEach(i=>{const{endpointName:c,originalArgs:l}=i;c==="getEvents"&&t(_l(c,l,r))})}},getEventsById:{providesTags:He("Event")}}}),{useGetEventsByIdQuery:Tl}=ot,Ma=()=>{const[e]=Qi(),[t]=Ki(),s=Ae(),a=ie(ye);return{toggleLike:async c=>{a&&(await e({id:c.id.toString(),body:{like:!0,tenant:a}}),s(ot.util.invalidateTags(_t("Event",c.id))))},updateEvent:async(c,l)=>{if(a){if("error"in await e({id:c.id.toString(),body:{...l,like:!1,tenant:a}}))throw Error();s(ot.util.invalidateTags(_t("Event",c.id)))}},createComment:async(c,l)=>{if(a){if("error"in await t({id:c.id.toString(),body:{text:l,tenant:a}}))throw Error();s(ot.util.invalidateTags(_t("Event",c.id)))}}}},kl=e=>{if(e){e.focus();const t=e.value;e.value="",e.value=t}},Ra=e=>n.jsx(Qr,{...e}),La=e=>n.jsx(Kr,{...e}),Pl=e=>{const{DetailedEvent:t}=je();return{showDetailedPost:()=>{t.show({post:e})}}},tt=(e,t,s,a,r,o)=>{if(!e)return V.EMPTY_STRING;try{const i=new Date(e),c=a?{locale:a}:{locale:Jr};let l=t?"dd MMMM":"dd.MM.yyyy";if((s||r)&&(l=r?"HH:mm":`${l} HH:mm`),r&&o){const d=new Date;return d.setHours(i.getUTCHours()),d.setMinutes(i.getUTCMinutes()),Zr(d,l)}return As(i,l,c)}catch{return V.EMPTY_STRING}},El=L(Is,{})(({theme:e})=>({backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.default),position:"relative",paddingBottom:"15px",marginBottom:"5px","&::after":{content:'""',position:"absolute",bottom:"0",height:"1px",right:"15px",width:"calc(100% - 30px)",backgroundColor:e.palette.neutral.main}})),_e={operationText:"operation-text",amountText:"amount-text",plusText:"plus-text",minusText:"minus-text",operationContainer:"operation-container"};var st=(e=>(e.RefundRequest="refund_request",e.Buy="buy",e.Share="share",e.Transfer="transfer",e.Purchase="purchase",e.Refund="refund",e))(st||{});const Al=({operation:e,onToProfileClick:t=rt,onFromProfileClick:s=rt,onPurchaseClick:a=rt,className:r,showDateTime:o})=>{const{to_profile:i,direction:c,deal_type:l,from_profile:d,created_at:m,created_at_utc:h}=e,{translate:p}=y(),f=Q({[_e.operationText]:!0,[_e.amountText]:!0,[_e.plusText]:e&&c&&c>0,[_e.minusText]:e&&c&&c<0}),x=()=>{t(e)},g=()=>{s(e)},b=()=>{a(e)};return n.jsx("div",{className:r,children:e!=null&&n.jsxs(S,{container:!0,className:_e.operationContainer,children:[n.jsxs("span",{className:f,children:[e.direction===1?"+":"",e.amount," "]}),i&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:_e.operationText,children:n.jsx(Me,{variant:"body2",children:p("for")})}),n.jsx(lt,{profile:i,onClick:x})]}),d&&n.jsxs(n.Fragment,{children:[n.jsx("span",{className:_e.operationText,children:p("from")}),n.jsx(lt,{profile:d,onClick:g})]}),o&&m!==void 0&&m!==null&&n.jsx("span",{className:_e.operationText,children:n.jsx(Me,{variant:"body2",children:tt(h,!1,!0)})}),(e.deal_type===st.Buy||e.deal_type===st.RefundRequest)&&n.jsx(te,{onClick:b,children:p(l===st.RefundRequest?st.Refund:st.Purchase)})]})})},Ba=L(Al,{})(({theme:e})=>({[M(_e.operationText)]:{display:"inline-flex",margin:"auto 2px",padding:2,whiteSpace:"pre-wrap",wordBreak:"break-word"},[M(_e.amountText)]:{fontSize:20,fontWeight:"bold"},[M(_e.plusText)]:{color:e.palette.primary.light},[M(_e.minusText)]:{color:e.palette.error.light},[M(_e.operationContainer)]:{padding:0,margin:0}})),Il=({post:e,className:t,preventNewModal:s})=>{var I;const{profile:a,public:r,title:o,content:i,commentable:c,likeable:l,comments_count:d,likes:m,liked:h,editable:p,date_string_utc:f}=e,{user_name:x,user_avatar:g,position:b}=a,{t:j}=Xt(),C=u.useRef(null),[R,N]=u.useState(!1),{toggleLike:W,updateEvent:J}=Ma(),{showEmployeeModal:X}=Ze(),{showDetailedPost:U}=Pl(e),H=B=>{J(e,{content:B.target.content.value}),N(!1),B.preventDefault()},z=()=>W(e),le=s?T:U,ee=B=>{B.preventDefault(),N(()=>!R)};return u.useEffect(()=>{if(R&&(C!=null&&C.current)){const B=setTimeout(()=>{kl(C.current)},100);return()=>{clearTimeout(B)}}},[R]),n.jsxs(ce,{className:t,children:[n.jsx(El,{avatar:n.jsxs(n.Fragment,{children:[r&&n.jsx(Ye,{src:((I=g==null?void 0:g.thumb)==null?void 0:I.url)||void 0,alt:x||void 0}),!r&&n.jsx(Ye,{children:n.jsx(Ns,{})})]}),action:n.jsx(We,{title:j(r?oe.ONLY_YOU_CAN_SEE_IT:oe.PROFILE),children:n.jsx(fe,{"aria-label":j(r?oe.PROFILE:oe.ONLY_YOU_CAN_SEE_IT)||oe.PROFILE,children:!r&&n.jsx(Xr,{})})}),title:r?o:"Сервис бот",subheader:r&&b}),n.jsxs(Ra,{className:ge.cardContent,children:[e.operation&&n.jsx(Ba,{operation:e.operation,onFromProfileClick:()=>{var B,Y;return X((Y=(B=e.operation)==null?void 0:B.from_profile)==null?void 0:Y.id)},onToProfileClick:()=>{var B,Y;return X((Y=(B=e.operation)==null?void 0:B.to_profile)==null?void 0:Y.id)}}),!R&&n.jsx(k,{variant:"body2",isPreformatted:!0,children:i}),R&&n.jsxs(De,{component:"form",onSubmit:H,sx:{"& .MuiTextField-root":{m:1,width:"90%"}},noValidate:!0,autoComplete:"off",children:[n.jsx(we,{autoFocus:!0,margin:"dense",id:"content_value",name:"content",defaultValue:i,fullWidth:!0,multiline:!0,inputRef:C}),n.jsx(te,{type:"submit",color:"primary",children:j("Submit")})]})]}),n.jsxs(La,{disableSpacing:!0,className:ge.cardActions,children:[l&&n.jsxs(n.Fragment,{children:[n.jsx(fe,{"aria-label":"Add to favorites",onClick:z,className:Q({[ge.liked]:h}),children:n.jsx(eo,{})}),n.jsx(P,{className:Q(ge.iconCaption,{[ge.liked]:h}),children:m.length>0&&m.length})]}),c&&n.jsxs(n.Fragment,{children:[n.jsx(fe,{"aria-label":"Comment",onClick:le,children:n.jsx(to,{})}),n.jsx(P,{className:Q(ge.iconCaption),children:d!==void 0&&d!==0&&d})]}),p&&n.jsx(fe,{onClick:ee,"aria-label":"edit",children:n.jsx(no,{})}),n.jsx(Me,{variant:"caption",component:"div",className:ge.cardDateCaption,children:tt(f,!1,!0)})]})]})},Nl="16px",qa=L(Il,{})(({theme:e,bodyMaxHeight:t=300,maxWidth:s=700})=>({width:"100%",backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.default),maxWidth:s,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),[M(ge.cardContent)]:{maxHeight:t,overflow:"auto"},[M(ge.cardPrivate)]:{backgroundColor:e.palette.info.light},[M(ge.liked)]:{color:e.palette.info.light},[M(ge.iconCaption)]:{width:"10px",paddingTop:"4px",fontSize:Nl,color:e.palette.grey.A700},[M(ge.cardActions)]:{display:"flex",marginRight:"5px"},[M(ge.cardDateCaption)]:{marginLeft:"auto"},[M(ge.expand)]:{transform:"rotate(0deg)",transition:e.transitions.create("transform",{duration:e.transitions.duration.shortest})},[M(ge.expandOpened)]:{transform:"rotate(180deg)"}})),Oa=e=>{const{data:t}=e;return t?t.map(s=>{const{attributes:a,id:r}=s;return{...a,id:Number(r),commentable:!0,likeable:!0}}):[]},za=e=>{if(!e||!e.data)return null;const{attributes:t,id:s}=e.data;return{...t,logo:t.logo,id:Number(s),commentable:!0,likeable:!0}},Dl=e=>{const{data:t}=e;return t?t.map(s=>{const{attributes:a,id:r}=s;return{...a,enabled:!!(a!=null&&a.enabled),profile:Rn({attributes:a==null?void 0:a.profile,id:a==null?void 0:a.profile.id.toString()}),id:Number(r)}}):[]},Ml=e=>{const{data:t}=e||{};return t?t.map(s=>{const{attributes:a,id:r}=s;return{...a,created_at_utc:(a==null?void 0:a.created_at_utc)||a.created_at,id:Number(r)}}):[]},Fa=e=>{const{attributes:t,id:s}=e;return{...t,caption:t.caption||void 0,id:Number(s)}},Ha=e=>{if(!e)return;const{data:t}=e;if(t)return Fa(t)},Un=e=>{if(!e)return[];const{data:t}=e;return(t==null?void 0:t.filter(s=>s).map(s=>Fa(s)))||[]},$a=e=>{const{data:t}=e;return t?t.map(s=>{const{attributes:a,id:r}=s;return{...a,id:Number(r)}}):[]},Wa=e=>{var a;const{attributes:t,id:s}=e||{};return{...t,id:Number(s),name:(t==null?void 0:t.name)||void 0,comment:(t==null?void 0:t.comment)||void 0,day:(t==null?void 0:t.day)||void 0,weekday:(t==null?void 0:t.weekday)||void 0,every:(t==null?void 0:t.every)||void 0,execute_time:(t==null?void 0:t.execute_time)||void 0,timezone:(t==null?void 0:t.timezone)||void 0,time_in_seconds:(t==null?void 0:t.time_in_seconds)||void 0,burn_old:(t==null?void 0:t.burn_old)||!1,profile:t!=null&&t.profile?Rn({attributes:{...t==null?void 0:t.profile},id:(a=t==null?void 0:t.profile)==null?void 0:a.id.toString()}):void 0}},Ga=e=>{const{data:t}=e;return t?t.map(s=>Wa(s)):[]},Rl=e=>{if(!e)return;const{data:t}=e;if(t)return Wa(t)},Ll=e=>e||[],Va=e=>{var a,r,o,i,c;const{attributes:t,id:s}=e;return{...t,id:Number(s),commentable:!0,likeable:!0,profile:{id:t.profile_id,first_name:"",last_name:"",user_name:t.user_name,position:t.position,admin:!1,user_avatar:t.user_avatar},title:t.user_name,extra_content:t.extra_content||"",operation:{...t.operation,id:(a=t.operation)==null?void 0:a.id,deal_type:(r=t.operation)==null?void 0:r.deal_type,created_at:((o=t.operation)==null?void 0:o.created_at)||e.attributes.date_string,created_at_utc:((i=t.operation)==null?void 0:i.created_at_utc)||((c=t.operation)==null?void 0:c.created_at)||e.attributes.date_string}}},Bl=e=>{if(e!=null&&e.data)return Va(e.data)},ql=e=>{if(!e)return[];const{data:t}=e;return t?t.map(s=>Va(s)):[]},Et={toPosts:ql,toPost:Bl,toDonuts:Oa,toDonut:za,toRequests:Dl,toOperations:Ml,toTenant:Ha,toTenants:Un,toInvitations:$a,toSchedulers:Ga,toScheduler:Rl,toPies:Ll},Ol=e=>{const t=ie(ye),{data:s,error:a,isLoading:r}=Tl({id:(e==null?void 0:e.toString())||"",tenant:t||void 0},{skip:!e,refetchOnMountOrArgChange:!0});return{post:s?Et.toPost(s):void 0,isLoading:r,error:a}},zl=L(Is,{})(({theme:e})=>({backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.default),position:"relative",paddingBottom:"15px",marginBottom:"5px","&::after":{content:'""',position:"absolute",bottom:"0",height:"1px",right:"15px",width:"calc(100% - 30px)",backgroundColor:e.palette.neutral.main}})),Fl=({comment:e,className:t})=>{var c,l;const{profile:s,content:a,date_string_utc:r}=e,{employee:o}=Hn(s==null?void 0:s.id),{t:i}=y();return n.jsxs(ce,{className:Q(t),children:[n.jsx(zl,{avatar:n.jsxs(n.Fragment,{children:[(s==null?void 0:s.user_avatar)&&n.jsx(Ye,{src:((l=(c=s==null?void 0:s.user_avatar)==null?void 0:c.thumb)==null?void 0:l.url)||void 0,alt:s.user_name||void 0}),!(s!=null&&s.user_avatar)&&n.jsx(Ye,{children:n.jsx(Ns,{})})]}),action:n.jsx(We,{title:i(oe.PROFILE),children:n.jsx(fe,{"aria-label":i(oe.PROFILE)||oe.PROFILE})}),title:o==null?void 0:o.user_name,subheader:o==null?void 0:o.position}),n.jsx(Ra,{children:n.jsx(k,{variant:"body2",isPreformatted:!0,children:a})}),n.jsx(La,{disableSpacing:!0,children:n.jsx(w,{direction:"row",justifyContent:"flex-end",className:"width-100",children:n.jsx(Me,{variant:"caption",component:"div",children:tt(r,!1,!0)})})})]})},Hl=L(Fl,{})(({theme:e})=>({width:"100%",backgroundColor:e.palette.background.paper,color:e.palette.getContrastText(e.palette.background.default),maxWidth:700,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})})),$l=({comments:e,className:t})=>n.jsx(w,{direction:"column",className:t,alignItems:"center",gap:1,children:e.map(s=>n.jsx(Hl,{comment:s},s.id))}),Wl=({onSubmit:e,className:t})=>{const{translate:s}=y(),{register:a,reset:r,handleSubmit:o}=xt({shouldUseNativeValidation:!1}),i=async c=>{const{comment:l}=c;try{await e(l)}catch{return}r()};return n.jsxs(De,{component:"form",className:t,onSubmit:o(i),noValidate:!0,sx:{mt:1},children:[n.jsx(we,{multiline:!0,minRows:4,maxRows:8,className:"width-100",placeholder:s(E.comment,{capitalize:!0}),...a("comment",{required:s(E.comment)})}),n.jsx(w,{flexDirection:"row",justifyContent:"flex-end",children:n.jsx(te,{type:"submit",variant:"contained",sx:{minWidth:150,mt:2},children:s(O.send)})})]})},Ua=({postId:e})=>{const{post:t,isLoading:s}=Ol(e),{createComment:a}=Ma(),r=pe(),o=re(r.breakpoints.down("sm"));return K(ne.DetailedEvent,s),t?n.jsxs(w,{direction:"column",className:"width-100 p-2",alignItems:"center",maxWidth:600,width:o?void 0:500,children:[n.jsx(qa,{post:t,preventNewModal:!0,bodyMaxHeight:700,maxWidth:o?void 0:600}),n.jsx(Wl,{onSubmit:i=>a(t,i),className:"width-100"}),n.jsx($l,{comments:t.comments,className:"width-100 m-1 mt-3"})]}):null},Gl=({post:e})=>{const t=pe(),s=re(t.breakpoints.down("sm"));return n.jsx(P,{sx:{width:s?"100%":600,minHeight:400},children:n.jsx(Ua,{postId:e.id})})},Vl=["DoughNutIcon","CirclesIcon","BonutsCurrency","BetaSvgIcon","BonutOutlined","QrCode"],Ul="/assets/icons/",ln=e=>Vl.reduce((t,s)=>({...t,[s]:()=>n.jsx(so,{src:`${Ul}${s}.svg`,beforeInjection:e?a=>{a.classList.add(`svg-icon-${s}`),a.setAttribute("style",`width: ${e.width}; height: ${e.height}`)}:T})}),{}),Yl=({data:e})=>{const{t}=y(),{QrCode:s}=ln({width:"300px"});return n.jsxs(P,{className:"d-flex flex-column align-items-center",children:[n.jsx(k,{children:n.jsxs(w,{direction:"row",children:[t(se.telegram_code),e.tg_code]})}),n.jsx(P,{children:n.jsx(s,{})})]})},Ql={items:{ConnectTelegramModal:{renderItem:e=>n.jsx(Yl,{...e})}}},Tn={items:{SimpleTextModal:{renderItem:e=>n.jsx("div",{children:e.data})},ConfirmationModal:{renderItem:(e,t)=>n.jsx(dl,{onSubmit:e.data.onSubmit,text:e.data.text,...t}),title:e=>e.title||E.confirmation,hasTopMenu:!0},ImageModal:{renderItem:e=>n.jsx($c,{url:e.data.url}),title:e=>e.title||V.EMPTY_STRING,hasTopMenu:!0},CreateDonut:{renderItem:(e,t)=>n.jsx(Xc,{...t}),hasTopMenu:!0,title:e=>e.title||V.EMPTY_STRING,preventCloseOnBackDropClick:!0},ViewEmployee:{renderItem:(e,t)=>{var s;return n.jsx(al,{id:(s=e.data)==null?void 0:s.id,...t})},title:e=>e.title||V.EMPTY_STRING,hasTopMenu:!0},CreateCircle:{renderItem:(e,t)=>n.jsx(ll,{...t}),hasTopMenu:!0,title:e=>e.title||V.EMPTY_STRING,preventCloseOnBackDropClick:!0},EditCircle:{renderItem:(e,t)=>n.jsx(gl,{...t,circleId:e.data.circleId}),hasTopMenu:!0,title:e=>e.title||V.EMPTY_STRING,preventCloseOnBackDropClick:!0},AdminDepositModal:{renderItem:(e,t)=>n.jsx(yl,{id:e.data.id,...t}),hasTopMenu:!0,title:e=>e.title||"admin deposit",preventCloseOnBackDropClick:!0},TransferModal:{renderItem:(e,t)=>n.jsx(Cl,{id:e.data.id,...t}),hasTopMenu:!0,title:e=>e.title||"Transfer",preventCloseOnBackDropClick:!0},DetailedEvent:{renderItem:(e,t)=>n.jsx(Gl,{post:e.data.post,...t}),hasTopMenu:!0,title:e=>e.post.title,getPath:e=>`event/${e.post.id}`,isTop:!0},...Ql.items}},je=()=>{const e=u.useContext(Ca),t=u.useContext(On),s=u.useCallback(()=>{Object.keys(Tn.items).forEach(r=>{t(r,r)})},[t]),a=u.useMemo(()=>Object.keys(Tn.items).reduce((r,o)=>{const i=o;return r[i]={name:i,show:c=>{e(i,c)},hide:()=>t(i,i)},r},{}),[t,e]);return{showModal:e,closeAll:s,...a}},Kl="0.2",Jl="0.14",Zl="0.12",Xl={big:{boxShadow:` 0 9px 46px 8px rgba(0, 0, 0, ${Jl}),    0 11px 15px -7px rgba(0, 0, 0,${Zl}),    0 24px 38px 3px rgba(0, 0, 0,${Kl})`}},ed=L("div")(e=>({display:"inline-block",margin:"10px",overflow:"hidden",textAlign:"center",verticalAlign:"middle",maxWidth:"100%",height:"fit-content",...Xl.big,...e.round&&{borderRadius:"50%",maxWidth:"100px"},"& img":{display:"block",objectFit:"contain",maxWidth:"100%",maxHeight:"100%"},"&:hover":{cursor:"zoom-in"}})),dn=({image:e,avatar:t,defaultImage:s,className:a,onClick:r})=>{const{ImageModal:o}=je(),i=e||t||s,c=()=>{o.show({url:i})};return n.jsx(ed,{round:!!t,className:a,onClick:r||c,children:n.jsx("img",{src:i,alt:"..."})})},ps=L(ao)(({theme:e})=>({"& .MuiBadge-badge":{right:-3,top:5,fontSize:"8pt",border:`2px solid ${e.palette.background.paper}`,padding:"0"}})),Be=e=>{const{tooltip:t,customIcon:s,children:a,badgeContent:r,badgeColor:o,...i}=e,[c,l]=u.useState(!1);u.useEffect(()=>{l(!1)},[t]);const{t:d}=y(),m=s?n.jsx(fe,{...i,children:n.jsx(ps,{badgeContent:r,color:o,invisible:!r,children:n.jsx(Ds,{children:a})})}):n.jsx(fe,{...i,children:n.jsx(ps,{badgeContent:r,color:o,invisible:!r,children:a})});return t?n.jsx(We,{placement:"bottom-start",title:d(t),open:c,disableHoverListener:!0,onMouseEnter:()=>l(!0),onMouseLeave:()=>l(!1),children:m}):m},gs=({handleFileInputChange:e})=>{const t=et.useRef(null),s=()=>{t.current&&t.current.click()};return n.jsxs(he,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:[n.jsx("input",{accept:"image/*",style:{display:"none"},id:"raised-button-file",name:"uploaded_file",multiple:!0,type:"file",ref:t,onChange:e}),n.jsx(P,{sx:{textAlign:"center",width:"100%"},className:"pr-2",children:n.jsx(Be,{onClick:s,tooltip:oe.EDIT,children:n.jsx(ro,{})})})]})},td=e=>{const{field:t,value:s}=e,{name:a}=t,{onChange:r}=Pt(),{translate:o}=y(),[i,c]=u.useState("");u.useEffect(()=>{if(s){const p=s==null?void 0:s.url;c(p||"")}},[s]);const l=p=>{const f=new FileReader,x=p[0];f.onloadend=()=>{c(f.result)},f.readAsDataURL(x),r(a.toString(),x)},d=p=>{p.preventDefault(),p.target.files&&p.target.files.length>0&&l(p.target.files)},m=p=>{p.preventDefault()},h=p=>{p.preventDefault(),p.dataTransfer.files&&p.dataTransfer.files.length>0&&l(p.dataTransfer.files)};return n.jsx("div",{children:i?n.jsxs(n.Fragment,{children:[n.jsx(dn,{defaultImage:i,onClick:()=>{var p;be.isEmpty(i)||(p=t.onClick)==null||p.call(t,i)}}),n.jsx(gs,{handleFileInputChange:d})]}):n.jsxs(P,{sx:{border:"dashed 2px #aaa",borderRadius:5,cursor:"pointer",padding:"1em",textAlign:"center"},onDragOver:m,onDrop:h,component:"div",children:[n.jsx("p",{children:o("Drag and drop an image here or click to select a file")}),n.jsx(gs,{handleFileInputChange:d})]})})},nd=({field:e,id:t})=>{const s=Ms({name:e.name.toString()});return e.type===D.tags?n.jsx(zc,{id:t,field:e,value:s}):e.type===D.imageUpload?n.jsx(td,{field:e,value:s}):e.type===D.textarea?n.jsx(Mc,{name:e.name.toString(),id:t,placeholder:e.placeholder,label:e.label,value:s,maxRows:e.maxRows,minRows:e.minRows,rows:e.rows,disabled:e.disabled,required:e.required}):e.type===D.date?n.jsx(Lc,{name:e.name.toString(),disabled:e.disabled,required:e.required,label:e.label}):e.type===D.switch?n.jsx(Bc,{name:e.name.toString(),disabled:e.disabled,label:e.label,disabledLabel:e.disabledLabel}):e.type===D.radio?n.jsx(qc,{field:e}):n.jsx(n.Fragment,{children:n.jsx(Oc,{name:e.name.toString(),id:t,placeholder:e.placeholder,label:e.label,type:e.type,value:s,rows:e.rows,disabled:e.disabled,readOnly:e.readOnly,required:e.required,maxValue:e.maxValue,minValue:e.minValue})})},sd=({field:e,id:t})=>{var i,c;const s=e.xs?e.xs:12,a=e.sm?e.sm:s,r=e.md?e.md:a,o=e.lg?e.lg:r;return n.jsxs(n.Fragment,{children:[n.jsx(Wt,{offset:(i=e.offset)==null?void 0:i.offsetBeforeElement}),n.jsx(S,{item:!0,xs:s,sm:a,md:r,lg:o,children:n.jsx(Sn,{required:e.required,style:{width:"100%"},children:n.jsx(nd,{id:t,field:e})})}),n.jsx(Wt,{offset:(c=e.offset)==null?void 0:c.offsetAfterElement})]})},Ya=({fields:e,formId:t})=>n.jsx(n.Fragment,{children:e&&e.map(s=>{const a=`${t}|${String(s.name)}`;return n.jsx(sd,{id:a,field:s},a)})}),Qa=({fields:e,formId:t,hasInitial:s,groups:a,groupGap:r})=>n.jsx(S,{container:!0,gap:r,children:a.map(o=>{var b,j,C;const{xs:i,sm:c,lg:l,md:d,gap:m,id:h,padding:p,sx:f,...x}=o,g=(e==null?void 0:e.filter(R=>R.group===h||R.group===void 0&&h===0))||[];return n.jsxs(u.Fragment,{children:[n.jsx(Wt,{offset:(b=o.offset)==null?void 0:b.offsetBeforeElement}),u.createElement(S,{item:!0,xs:i,sm:c,lg:l,md:d,gap:m,...x,key:h,sx:R=>{var N;return{p:2,...p,...(N=o.sx)==null?void 0:N.call(o,R)}}},((j=o==null?void 0:o.groups)==null?void 0:j.length)&&n.jsx(Qa,{formId:t,groups:o.groups,fields:e,hasInitial:s,groupGap:o.gap}),g.length>0&&n.jsx(S,{container:!0,spacing:2,children:n.jsx(Ya,{formId:t,hasInitial:s,fields:g})})),n.jsx(Wt,{offset:(C=o.offset)==null?void 0:C.offsetAfterElement})]},o.id)})}),Yn=({onCancelClick:e,visible:t=!1,submitCaption:s})=>{const{translate:a}=y();return n.jsx(he,{direction:"row",justifyContent:"center",alignItems:"center",spacing:2,children:t&&n.jsxs(n.Fragment,{children:[n.jsx(Ge,{color:"secondary",onClick:e,children:a(E.cancel)}),n.jsx(Ge,{type:"submit",children:s||a(O.save)})]})})},ad=({fields:e,groups:t,groupGap:s,hasInitial:a,initialValues:r,formId:o,submitCaption:i,children:c,values:l,onDiscard:d,error:m,keepValuesOnSubmit:h=!0})=>{const{reset:p}=In(),f=Rs(),{isDirty:x,isSubmitSuccessful:g}=f;u.useEffect(()=>{g&&p(r,{keepValues:h})},[g]);const b=()=>{d(),p(r)};return n.jsxs(P,{className:"position-relative",children:[n.jsx(S,{container:!0,spacing:2,className:"mb-3",children:n.jsx(Dc,{values:l,initialValues:r,children:n.jsxs(n.Fragment,{children:[c,t!=null&&t.length?n.jsx(Qa,{groupGap:s,formId:o,groups:t,hasInitial:a,fields:e}):n.jsx(Ya,{formId:o,hasInitial:a,fields:e})]})})}),n.jsx(Yn,{visible:!!(x||m),onCancelClick:b,submitCaption:i})]})},Ka=u.createContext(Cn),rd=()=>u.useContext(Ka),Oe=({fields:e,groups:t,groupGap:s,hasInitial:a,initialValues:r,formId:o,submitCaption:i,onSubmit:c,children:l,keepValuesOnSubmit:d,resolver:m})=>{const[h,p]=u.useState({}),[f,x]=u.useState(),[g,b]=u.useState(void 0),j=rd();u.useEffect(()=>{if(r){const W=be.mapValues(r,(J,X)=>{var H;const U=e==null?void 0:e.find(z=>z.name===X);return U!=null&&U.valueToOption?(H=U==null?void 0:U.valueToOption)==null?void 0:H.call(U,J):J});Object.keys(h).length||p(W||{}),b(W)}},[r,e]);const C=W=>{x(W)},R=async W=>{const J=Object.entries(W).reduce((X,[U,H])=>{const z=e==null?void 0:e.find(le=>le.name===U);if(z!=null&&z.optionToValue){const le=be.isArray(H)?H.map(ee=>{var I;return(I=z==null?void 0:z.optionToValue)==null?void 0:I.call(z,ee)}):z.optionToValue(H);return{...X,[U]:le}}return{...X,[U]:H}},W);f&&x(void 0);try{const X=await(c==null?void 0:c(J,C));X&&!X.error&&b(W)}catch{x("saving error")}},N=()=>{x(void 0),p(g||{})};return!g&&a?null:n.jsx("div",{children:n.jsx(Ls.DateFnsProvider,{adapterLocale:j,children:n.jsx(Nn,{defaultValues:g,onSuccess:R,resolver:m,children:n.jsx(ad,{fields:e,groups:t,groupGap:s,values:h,formId:o,hasInitial:a,keepValuesOnSubmit:d,initialValues:g,submitCaption:i,onDiscard:N,error:f,children:l})})})})};var Je=(e=>(e.donut="donut",e.coin="coin",e))(Je||{});const od=()=>{const{t:e}=y();return{fields:[{image:!1,size:A.xs,type:D.number,name:"amount",label:"amount",xs:12,required:!0},{disabled:!1,image:!1,size:A.xs,name:"comment",label:"comment",placeholder:"comment",type:D.textarea,required:!0,xs:12},{image:!1,required:!0,size:A.md,name:"type",label:e(se.transfer_type,{capitalize:!0}),source:[{key:Je.donut,label:e(ue.donuts)},{key:Je.coin,label:e(E.coins)}],type:D.radio,xs:12}]}},id=({onSuccess:e})=>{const{fields:t}=od(),{t:s}=y(),a=r=>{e==null||e(r)};return n.jsx(Oe,{formId:"transfer-donuts",onSubmit:a,fields:t,submitCaption:s(kt.ok)})},cd=({profiles:e,back:t=T,next:s=T})=>{const{t:a}=y();return n.jsx(n.Fragment,{children:n.jsxs(P,{className:"m-4",children:[n.jsx(w,{direction:"row",alignItems:"center",justifyContent:"flex-start",className:"mt-4 mb-4",children:n.jsxs(Ke,{variant:"outlined",onClick:t,children:["< ",a(Se.back)]})}),n.jsx(S,{className:"mb-4",container:!0,columnSpacing:2,rowSpacing:2,children:n.jsx(S,{item:!0,xs:12,children:n.jsx(P,{sx:{maxHeight:"200px"},className:"scroll",children:n.jsx(_n,{profiles:e||[],onClick:T,hideSearch:!0})})})}),n.jsx(id,{onSuccess:s})]})})},ld=e=>{const{config:t}=e,{steps:s,initialValues:a,onSubmit:r}=t,[o,i]=u.useState(0),c=Object.keys(s)[o],[l,d]=u.useState({}),m=s[c],h=()=>{i(0),d({})},p={wizardState:l,initialValues:a,back:()=>{o>0&&i(f=>f-1)},next:f=>{d(x=>({...x,[c]:f})),o<Object.keys(s).length-1?i(x=>x+1):r({...l,[c]:f,onSuccess:h})}};return n.jsx(P,{children:m.renderItem(p)})},dd=()=>{const{adminDeposit:e}=Vn(),s={initialValues:void 0,onSubmit:async a=>{const{Step1:r,Step2:o,onSuccess:i}=a;if(r&&o){const{profiles:c}=r,{amount:l,comment:d,type:m}=o;e({amount:l,comment:d,toSelfAccount:m===Je.coin,ids:c.map(h=>h.id)},{onSuccess:i})}},steps:{Step1:{renderItem:a=>{var r;return n.jsx(Nc,{next:a.next,initialProfiles:(r=a.wizardState.Step1)==null?void 0:r.profiles})}},Step2:{renderItem:a=>{var r;return n.jsx(cd,{profiles:(r=a.wizardState.Step1)==null?void 0:r.profiles,back:a.back,next:a.next})}}}};return n.jsx(ld,{config:s})},ud=()=>n.jsx(dd,{}),md=L(oo,{})(()=>({[M("MuiBreadcrumbs-li")]:{overflow:"hidden !important"}})),hd=L(Es,{shouldForwardProp:e=>e!=="hasLink"})(({theme:e,hasLink:t})=>{const s=e.palette.mode==="light"?e.palette.grey[100]:e.palette.grey[800];return{maxWidth:"100%",backgroundColor:s,height:e.spacing(3),color:e.palette.grey[800],fontWeight:e.typography.fontWeightRegular,[M("MuiBreadcrumbs-li")]:{overflow:"hidden !important","& >span":{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap",flex:1}},"&:hover, &:focus":{backgroundColor:t&&rs(s,.06),cursor:t?"pointer":"auto"},"&:active":{boxShadow:e.shadows[1],backgroundColor:rs(s,.12)}}}),Ue=({items:e,className:t})=>{const{translate:s}=y();return n.jsx("div",{children:n.jsx(md,{className:t,separator:n.jsx(co,{fontSize:"small",color:"action"}),children:e.map(a=>{const{onClick:r=rt,link:o,label:i,icon:c,key:l,noTranslation:d}=a,m={...o&&{component:io,to:o}},h=d?i:s(i,{capitalize:!0});return u.createElement(hd,{...m,onClick:a.onClick?()=>r(a):void 0,label:n.jsx(We,{title:h,children:n.jsx("span",{children:h})}),icon:n.jsx(Ds,{children:c}),key:l,hasLink:!!o})})})})},ze=({children:e,className:t,onClick:s})=>n.jsx("div",{className:t,onClick:s,children:e}),Pe=({children:e,className:t,transparent:s})=>n.jsx(ce,{className:Q(t,"mt-2 height-100"),sx:{background:s?"transparent":void 0},children:n.jsx(ze,{className:"height-100",children:e})}),pd=()=>{const e=ie(ye),{data:t,error:s,isLoading:a,refetch:r}=oc({tenant:e||void 0},{skip:!e});return{tenant:Ha(t),isLoading:a,error:s,refetch:r}};var kn=(e=>(e.welcome_donuts="welcome donuts",e.welcome_points="welcome points",e))(kn||{});const gd=()=>{const{ImageModal:e}=je(),{t}=y(),s=o=>{e.show({url:o||V.EMPTY_STRING,title:t($.preview,{capitalize:!0})})},a=[{id:1,md:5,lg:3,xs:12,padding:{pt:4}},{id:2,md:5,lg:5,xs:12,padding:{pt:4}}];return{fields:[{image:!0,size:A.xs,name:"logo",label:"Logo",type:D.imageUpload,xs:12,md:12,group:1,onClick:o=>s(o==null?void 0:o.toString())},{image:!1,readOnly:!0,size:A.xs,name:"name",label:"name",xs:12,required:!0,group:2},{image:!1,size:A.xs,name:"caption",label:"caption",xs:12,required:!0,group:2},{disabled:!1,type:D.text,image:!1,size:A.xs,name:"domain",label:ue.domain,required:!1,xs:12,group:2},{disabled:!1,type:D.number,image:!1,size:A.xs,name:"welcome_donuts",label:kn.welcome_donuts,required:!0,xs:12,sm:6,lg:4,group:2},{disabled:!1,type:D.number,image:!1,size:A.xs,name:"welcome_points",label:kn.welcome_points,required:!0,xs:12,sm:6,lg:4,offset:{offsetAfterElement:{lg:4}},group:2},{disabled:!1,type:D.number,image:!1,size:A.xs,name:"birthday_donuts",label:Se.birthday_donuts,required:!1,xs:12,sm:6,lg:4,group:2},{disabled:!1,type:D.number,image:!1,size:A.xs,name:"birthday_points",label:Se.birthday_points,required:!1,xs:12,sm:6,lg:4,group:2},{disabled:!1,type:D.switch,image:!1,size:A.xs,name:"email_notification",label:q.email_notification,required:!1,xs:12,group:2},{disabled:!1,type:D.text,image:!1,size:A.xs,name:"birthday_message",label:Se.birthday_message,required:!1,xs:12,group:2}],groups:a}},xd=ft.enhanceEndpoints({addTagTypes:["Tenant","Tenants"],endpoints:{getTenantCurrent:{providesTags:["Tenant"]},getTenants:{providesTags:["Tenants"]},getTenantsAccessible:{providesTags:["Tenants"]}}}),Qn=xd.injectEndpoints({endpoints:e=>({updateCurrentTenantFormData:e.mutation({invalidatesTags:["Tenant"],query(t){return zn("/tenant/current","PUT",t)}})})}),fd=()=>{const e=ie(ye),[t]=Qn.useUpdateCurrentTenantFormDataMutation(),{showNotification:s}=ke();return{updateTenant:async(r,o)=>{var i;if(e){const{logo:c}=r,l=c&&!Object.getOwnPropertyDescriptor(c,"url")?c:void 0,d=await t({body:{...r,...l&&{logo:l},tenant:e}}),m={data:void 0,...d};return m.data&&((i=o==null?void 0:o.onSuccess)==null||i.call(o,m.data),s(O.settings_updated)),d}}}},bd=()=>{const{tenant:e}=pd(),{updateTenant:t}=fd(),s=gd(),a=r=>t(r);return n.jsx(Oe,{formId:"current_tenant",hasInitial:!0,initialValues:e,...s,onSubmit:a})},yd=()=>{var t,s,a,r,o,i,c,l,d,m,h,p;const e=[{key:"settings",link:(t=F.routes[v.Settings])==null?void 0:t.path,label:((s=F.routes[v.Settings])==null?void 0:s.navbarName)||"settings",icon:(a=F.routes[v.Settings])==null?void 0:a.icon},{key:((i=(o=(r=F.routes[v.Settings])==null?void 0:r.children)==null?void 0:o.Tenant)==null?void 0:i.path)||"tenant",label:((d=(l=(c=F.routes[v.Settings])==null?void 0:c.children)==null?void 0:l.Tenant)==null?void 0:d.navbarName)||V.EMPTY_STRING,icon:(p=(h=(m=F.routes[v.Settings])==null?void 0:m.children)==null?void 0:h.Tenant)==null?void 0:p.icon}];return n.jsxs(w,{direction:"column",sx:{height:"100%",overflow:"hidden"},children:[n.jsx(Ue,{items:e}),n.jsx(Pe,{className:"flex-grow scroll p-4",children:n.jsx(bd,{})})]})},jd=()=>n.jsx(yd,{}),Ja=ae.enhanceEndpoints({addTagTypes:["Plugins"],endpoints:{getPlugins:{providesTags:nn("Plugins")},postPluginsByIdActivate:{invalidatesTags:Ct("Plugins")},postPluginsByIdDeactivate:{invalidatesTags:Ct("Plugins")},patchPluginsById:{invalidatesTags:Ct("Plugins")}}}),{useGetPluginsQuery:tg,usePatchPluginsByIdMutation:vd,usePostPluginsByIdActivateMutation:wd,usePostPluginsByIdDeactivateMutation:Sd}=Ja,Cd=e=>{const{data:t}=e;return t||[]},_d=()=>Re({endpoint:Ja.endpoints.getPlugins,translator:Cd});function Td(){const[e]=wd(),[t]=Sd(),s=ie(ye),{showNotification:a}=ke();return{setActivatePlugin:u.useCallback((o,i)=>{s&&(i?e:t)({id:o,tenant:s}).unwrap().then(()=>{a(O.settings_updated)})},[e,s,t,a])}}function kd(){const[e]=vd(),t=ie(ye),{showNotification:s}=ke();return{updatePlugin:u.useCallback(async r=>{const{id:o,settings:i}=r;i&&t&&(await e({id:o,body:{plugin_settings:i,tenant:t}}).unwrap(),s(O.settings_updated))},[t,e,s])}}const Pd=L(ce,{})(({theme:e})=>({"&:hover":{cursor:"pointer",outline:"2px solid",outlineColor:e.palette.primary.light,"& img":{transform:"translate3d(0, -3px, 2px)",transition:"all 500ms cubic-bezier(0.34, 1.61, 0.7, 1)"}},display:"flex",paddingLeft:12,justifyContent:"flex-start",alignItems:"center",minHeight:80})),Za=({plugin:e})=>{const{t}=y();return n.jsxs(w,{direction:"row",gap:4,justifyContent:"space-between",sx:{width:"100%"},children:[n.jsx(P,{sx:{flexGrow:1},children:e.name||t(Z.no_name,{capitalize:!0})}),e.active?n.jsx(lo,{color:"success"}):null,n.jsx(P,{children:n.jsx(k,{variant:"caption2"})})]})},Ed=({plugin:e,preventEdit:t,openEdit:s})=>n.jsx(Pd,{raised:!0,onClick:()=>{t||s()},children:n.jsx(Za,{plugin:e})}),Ad=e=>n.jsx(Bs,{...e}),Id=({onSubmit:e=T,onCancel:t=T,plugin:s,submitCaption:a,className:r,onSetActive:o=T})=>{const{t:i}=y(),c=xt({defaultValues:s}),{control:l,formState:{isDirty:d},reset:m}=c,{fields:h}=uo({control:l,name:"settings"}),p=async x=>{await e(x),m(x)},f=u.useCallback((x,g)=>{o(s.id,g)},[o,s]);return n.jsxs(ce,{className:r,sx:{paddingTop:2,paddingLeft:2},children:[n.jsx(Za,{plugin:s}),s.active?n.jsxs(Nn,{formContext:c,onSuccess:p,onError:x=>console.error(x),children:[h.map((x,g)=>n.jsx(Gt,{margin:"normal",fullWidth:!0,required:!0,name:`settings.${g}.value`,label:x.name,autoFocus:!0},x.id)),d?n.jsx(Yn,{visible:!0,onCancelClick:t,submitCaption:a}):null]}):null,n.jsx(mo,{children:n.jsx(qs,{labelPlacement:"end",control:n.jsx(Ad,{onChange:f,checked:s.active}),label:s.active?i(ue.deactivate):i(G.activate)})})]})},Nd=L(w,{})(({theme:e})=>({maxWidth:500,[e.breakpoints.down("md")]:{maxWidth:"100%"},gap:12,padding:24})),Dd=()=>{const{objects:e,isLoading:t}=_d(),[s,a]=u.useState(),{updatePlugin:r}=kd(),{setActivatePlugin:o}=Td();return K(ne.Schedulers,t),n.jsx(Nd,{children:e.map(i=>{const c=s===i.id;return n.jsx("div",{children:c?n.jsx(Id,{plugin:i,onCancel:()=>a(void 0),onSubmit:r,onSetActive:o}):n.jsx(Ed,{plugin:i,openEdit:()=>a(i.id)})},i.id)})})},Md=()=>{var t,s,a,r,o,i,c,l,d,m,h,p;const e=[{key:"settings",link:(t=F.routes[v.Settings])==null?void 0:t.path,label:((s=F.routes[v.Settings])==null?void 0:s.navbarName)||"settings",icon:(a=F.routes[v.Settings])==null?void 0:a.icon},{key:((i=(o=(r=F.routes[v.Settings])==null?void 0:r.children)==null?void 0:o.Plugins)==null?void 0:i.path)||"plugins",label:((d=(l=(c=F.routes[v.Settings])==null?void 0:c.children)==null?void 0:l.Plugins)==null?void 0:d.navbarName)||V.EMPTY_STRING,icon:(p=(h=(m=F.routes[v.Settings])==null?void 0:m.children)==null?void 0:h.Plugins)==null?void 0:p.icon}];return n.jsxs(w,{direction:"column",sx:{height:"100%",overflow:"hidden"},children:[n.jsx(Ue,{items:e}),n.jsx(Pe,{className:"flex-grow scroll",children:n.jsx(Dd,{})})]})},Kn=ae.enhanceEndpoints({addTagTypes:["Schedulers"],endpoints:{postDonutsSchedulers:{invalidatesTags:Ct("Schedulers")},getDonutsSchedulers:{providesTags:nn("Schedulers")},getDonutsSchedulersById:{providesTags:He("Schedulers")},patchDonutsSchedulersById:{invalidatesTags:He("Schedulers")},deleteDonutsSchedulersById:{invalidatesTags:["Schedulers"]}}}),{useGetDonutsSchedulersByIdQuery:ng,useGetDonutsSchedulersQuery:sg,usePostDonutsSchedulersMutation:ag,useDeleteDonutsSchedulersByIdMutation:rg,usePatchDonutsSchedulersByIdMutation:og}=Kn,Rd=()=>{const{usePostDonutsSchedulersMutation:e,usePatchDonutsSchedulersByIdMutation:t,useDeleteDonutsSchedulersByIdMutation:s}=Kn,[a]=e(),[r]=t(),[o]=s(),i=Gn(),{showNotification:c}=ke();return{createScheduler:(h,p)=>{const{name:f,amount:x,every:g,comment:b}=h;if(i&&f&&x&&g&&b)a({body:{tenant:i,...h,name:f.toString(),amount:x,every:g,comment:b,execute_time:h.execute_time?As(new Date(h.execute_time),"yyyy-MM-dd HH:mm"):"2000-01-01 00:00"}}).unwrap().then(j=>{var C;(C=p==null?void 0:p.onSuccess)==null||C.call(p,j),c(O.scheduler_created)});else throw new Error("empty tenant or name")},updateScheduler:(h,p)=>{const{name:f,amount:x,every:g,comment:b,id:j}=h;if(i&&f&&x&&g&&b&&j)r({id:j==null?void 0:j.toString(),body:{tenant:i,...h,name:f.toString()}}).unwrap().then(C=>{var R;(R=p==null?void 0:p.onSuccess)==null||R.call(p,C),c(O.scheduler_updated)});else throw new Error("empty tenant or name")},deleteScheduler:(h,p)=>{if(i&&h)o({id:h==null?void 0:h.toString(),tenant:i}).unwrap().then(f=>{var x;(x=p==null?void 0:p.onSuccess)==null||x.call(p,f),c(O.scheduler_deleted)});else throw new Error("empty tenant or name")}}},Ld=()=>Re({endpoint:Kn.endpoints.getDonutsSchedulers,translator:Ga}),un=e=>n.jsx(Os,{...e}),Xa=()=>[{id:1,label:"monday"},{id:2,label:"tuesday"},{id:3,label:"wednesday"},{id:4,label:"thursday"},{id:5,label:"friday"},{id:6,label:"saturday"},{id:7,label:"sunday"}],er=e=>{const t=new Date;return t.setHours(0),t.setMinutes(0),t.setSeconds(0),e?ho(t,e).toISOString():t.toISOString()},Bd=L(ce,{})(({theme:e})=>({"&:hover":{cursor:"pointer",outline:"2px solid",outlineColor:e.palette.primary.light,"& img":{transform:"translate3d(0, -3px, 2px)",transition:"all 500ms cubic-bezier(0.34, 1.61, 0.7, 1)"}},display:"flex",paddingTop:12,paddingLeft:12,justifyContent:"flex-start",minHeight:100}));var Yt=(e=>(e.daily="daily",e.weekly="weekly",e))(Yt||{});const qd=({scheduler:e,preventEdit:t,openEdit:s})=>{var r;const{t:a}=y();return n.jsx(Bd,{raised:!0,onClick:()=>{t||s()},children:n.jsx(ze,{children:n.jsxs(w,{direction:"column",children:[n.jsx(P,{children:e.name||a(Z.no_name,{capitalize:!0})}),n.jsx(P,{children:n.jsxs(k,{variant:"caption2",children:[`${e.amount}  ${a("donut",{count:e.amount})} `,`${e.every===Yt.weekly?a(q.every_week):a(q.every_month)}`]})}),n.jsx(P,{children:n.jsx(k,{variant:"caption2",children:n.jsxs(n.Fragment,{children:[`${e.every===Yt.weekly?a((r=Xa().find(o=>o.id===e.weekday))==null?void 0:r.label):`${e.day}  ${a(ue.day)}`}`,` ${tt(er(e.time_in_seconds),!1,!0,void 0,!0,!1)} ${e.timezone?`[${e.timezone}]`:V.EMPTY_STRING}`]})})})]})})})},Od=()=>({"Pacific/Midway":"Midway Island, Samoa","Pacific/Honolulu":"Hawaii","America/Juneau":"Alaska","America/Boise":"Mountain Time","America/Dawson":"Dawson, Yukon","America/Chihuahua":"Chihuahua, La Paz, Mazatlan","America/Phoenix":"Arizona","America/Chicago":"Central Time","America/Regina":"Saskatchewan","America/Mexico_City":"Guadalajara, Mexico City, Monterrey","America/Belize":"Central America","America/Detroit":"Eastern Time","America/Bogota":"Bogota, Lima, Quito","America/Caracas":"Caracas, La Paz","America/Santiago":"Santiago","America/St_Johns":"Newfoundland and Labrador","America/Sao_Paulo":"Brasilia","America/Tijuana":"Tijuana","America/Montevideo":"Montevideo","America/Argentina/Buenos_Aires":"Buenos Aires, Georgetown","America/Godthab":"Greenland","America/Los_Angeles":"Pacific Time","Atlantic/Azores":"Azores","Atlantic/Cape_Verde":"Cape Verde Islands",GMT:"UTC","Europe/London":"Edinburgh, London","Europe/Dublin":"Dublin","Europe/Lisbon":"Lisbon","Africa/Casablanca":"Casablanca, Monrovia","Atlantic/Canary":"Canary Islands","Europe/Belgrade":"Belgrade, Bratislava, Budapest, Ljubljana, Prague","Europe/Sarajevo":"Sarajevo, Skopje, Warsaw, Zagreb","Europe/Brussels":"Brussels, Copenhagen, Madrid, Paris","Europe/Amsterdam":"Amsterdam, Berlin, Bern, Rome, Stockholm, Vienna","Africa/Algiers":"West Central Africa","Europe/Bucharest":"Bucharest","Africa/Cairo":"Cairo","Europe/Helsinki":"Helsinki, Riga, Sofia, Tallinn, Vilnius","Europe/Kyiv":"Kyiv","Europe/Athens":"Athens","Asia/Jerusalem":"Jerusalem","Africa/Harare":"Harare, Pretoria","Europe/Moscow":"Moscow, St. Petersburg, Volgograd ","Europe/Minsk":"Minsk ","Europe/Istanbul":"Istanbul ","Asia/Kuwait":"Kuwait, Riyadh","Africa/Nairobi":"Nairobi","Asia/Baghdad":"Baghdad","Asia/Tehran":"Tehran","Asia/Dubai":"Abu Dhabi, Muscat","Asia/Baku":"Baku, Tbilisi, Yerevan","Asia/Kabul":"Kabul","Asia/Yekaterinburg":"Ekaterinburg","Asia/Tashkent":"Tashkent","Asia/Karachi":"Islamabad, Karachi","Asia/Kolkata":"Chennai, Kolkata, Mumbai, New Delhi","Asia/Kathmandu":"Kathmandu","Asia/Astana":"Astana","Asia/Dhaka":"Dhaka","Asia/Colombo":"Sri Jayawardenepura","Asia/Novosibirsk":"Novosibirsk","Asia/Almaty":"Almaty","Asia/Rangoon":"Yangon Rangoon","Asia/Bangkok":"Bangkok, Hanoi, Jakarta","Asia/Krasnoyarsk":"Krasnoyarsk","Asia/Shanghai":"Beijing, Chongqing, Hong Kong SAR, Urumqi","Asia/Kuala_Lumpur":"Kuala Lumpur, Singapore","Asia/Taipei":"Taipei","Australia/Perth":"Perth","Asia/Irkutsk":"Irkutsk, Ulaanbaatar","Asia/Seoul":"Seoul","Asia/Tokyo":"Osaka, Sapporo, Tokyo","Asia/Yakutsk":"Yakutsk","Australia/Darwin":"Darwin","Australia/Adelaide":"Adelaide","Australia/Sydney":"Canberra, Melbourne, Sydney","Australia/Brisbane":"Brisbane","Australia/Hobart":"Hobart","Asia/Vladivostok":"Vladivostok","Pacific/Guam":"Guam, Port Moresby","Asia/Magadan":"Magadan, Solomon Islands, New Caledonia","Asia/Kamchatka":"Kamchatka, Marshall Islands","Pacific/Fiji":"Fiji Islands","Pacific/Auckland":"Auckland, Wellington","Pacific/Tongatapu":"Nuku'alofa"});function tr(){const{t:e}=y(),t=u.useMemo(()=>{const r=Od();return Object.entries(r).map(c=>{var l,d,m,h;try{const p=gn.now(c[0]),f=p.isDST()?"daylight":"standard",x=p.timezone(),g=po(c[0]),b=(d=(l=g==null?void 0:g[0])==null?void 0:l[f])==null?void 0:d.abbr,j=(h=(m=g==null?void 0:g[0])==null?void 0:m[f])==null?void 0:h.name,C=x.current.offset*60,R=`${C/60^0}:${C%60===0?"00":Math.abs(C%60)}`,N=c[1].split(",").map(X=>e(X.trim())).join(", "),J=`${`(GMT${R.includes("-")?R:`+${R}`}) ${N}`} (${b})`;return{value:x.name,label:J,offset:x.current.offset,abbrev:b,altName:j}}catch{return null}}).filter(c=>!!c).sort((c,l)=>(c.offset||0)-(l.offset||0))},[]),s=r=>{let o;try{o=gn.now(r)}catch{o=gn.now("GMT")}return t.filter(i=>i.offset===o.timezone().current.offset).map(i=>{let c=0;return o.timezones[i.value.toLowerCase()]&&!!o.timezones[i.value.toLowerCase()].dst===o.timezone().hasDst?(i.value.toLowerCase().indexOf(o.tz.substring(o.tz.indexOf("/")+1))!==-1&&(c+=8),i.label.toLowerCase().indexOf(o.tz.substring(o.tz.indexOf("/")+1))!==-1&&(c+=4),i.value.toLowerCase().indexOf(o.tz.substring(0,o.tz.indexOf("/")))&&(c+=2),c+=1):i.value==="GMT"&&(c+=1),{tz:i,score:c}}).sort((i,c)=>c.score-i.score)[0].tz};return{options:t,parseTimezone:r=>{if(r){if(typeof r=="object"&&r.value&&r.label)return r;if(typeof r=="string")return t.find(o=>o.value===r)||r.indexOf("/")!==-1&&s(r);if(r.value&&!r.label)return t.find(o=>o.value===r.value)}}}}const zd=e=>{if(!e)return 0;const t=new Date(e);return t.setHours(0),t.setMinutes(0),t.setSeconds(0),go(t,new Date(e))},Fd=e=>{const{timezoneValue:t,time:s,...a}=e;return{...a,timezone:t?t.value:void 0,time_in_seconds:zd(s)}},Hd=()=>{const{translate:e}=y();return{formSchema:pt().shape({name:xe().required(e(Z.name_is_required,{capitalize:!0})),amount:wn().min(1,`${e($e.min_amount_is)} 1`).max(1e4,`${e($e.max_amount_is)} 10000`),comment:xe().required(e(E.comment_is_required,{capitalize:!0})),time:xe().required(e(se.time_is_required,{capitalize:!0}))})}},$d=()=>[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31],xs=()=>$d().map(e=>({id:e,label:e})),Wd=u.forwardRef((e,t)=>{const{stringLabel:s,placeholder:a,className:r,...o}=e,{options:i,parseTimezone:c}=tr(),{translate:l}=y();return n.jsx(xo,{autocompleteProps:{isOptionEqualToValue:(d,m)=>d.value===m.value,value:e!=null&&e.value?c(e==null?void 0:e.value):void 0,className:r},...o,label:l(s),options:i,textFieldProps:{variant:"standard",placeholder:l(a)},ref:t})}),Pn=e=>{const{translate:t}=y(),{stringLabel:s,label:a,...r}=e;return n.jsx(fo,{...r,variant:"standard",label:a||t(s),inputProps:{placeholder:t(s),label:t(s),variant:"standard"}})},Gd=e=>{const{maxWidth:t="300px",...s}=e,{t:a}=y(),r=u.useMemo(()=>Xa().map(o=>({id:o.id,label:a(o.label,{capitalize:!0})})),[]);return n.jsx(Pn,{...s,options:r,style:{maxWidth:t}})},nr=u.createContext(void 0),Vd=()=>u.useContext(nr),Ud=u.forwardRef((e,t)=>{const{translate:s}=y(),a=Vd(),{stringLabel:r,fullWidth:o,...i}=e;return n.jsx(bo,{...i,localeText:a,inputProps:{fullWidth:o,placeholder:s(r),label:s(r),variant:"standard"},ref:t})});var En=(e=>(e.daily="daily",e.weekly="weekly",e))(En||{});const Yd=()=>{var i,c;const{t:e}=y(),{errors:t}=Rs(),s=pe(),a=re(s.breakpoints.down("sm")),r=Ms({name:"every"}),o=u.useMemo(()=>[{id:En.daily,label:e(q.every_month)},{id:En.weekly,label:e(q.every_week)}],[]);return n.jsxs(S,{container:!0,children:[n.jsx(S,{item:!0,xs:12,sm:12,lg:8,children:n.jsx(Gt,{margin:"normal",fullWidth:!0,error:!!t,helperText:(i=t.name)==null?void 0:i.message,required:!0,name:"name",label:e(Z.name,{capitalize:!0}),autoFocus:!0})}),n.jsx(S,{item:!0,xs:12,sm:6,children:n.jsx(Pn,{fullWidth:!0,name:"every",options:o,required:!0,label:e(E.choose_type),placeholder:e(E.choose_type)})}),r==="daily"?n.jsx(S,{item:!0,xs:12,sm:6,children:n.jsx(Pn,{className:a?void 0:"pl-2",fullWidth:!0,name:"day",options:xs(),label:e(E.choose_day),SelectProps:{MenuProps:{style:{maxHeight:400}}}})}):n.jsx(S,{item:!0,xs:12,sm:5,children:n.jsx(Gd,{maxWidth:"400px",fullWidth:!0,className:a?void 0:"pl-2",name:"weekday",options:xs(),label:e(E.choose_day),SelectProps:{MenuProps:{style:{maxHeight:400}}}})}),n.jsxs(S,{item:!0,xs:12,sm:6,className:"mt-2",children:[n.jsx(Ud,{stringLabel:E.choose_time,name:"time",ampm:!1,format:"HH:mm",required:!0,fullWidth:!0}),n.jsxs(w,{direction:"row",className:"pt-1",gap:1,children:[n.jsx(We,{title:e(se.tooltip_scheduler_time,{capitalize:!0}),children:n.jsx(yo,{color:"secondary",sx:{height:16,width:16}})}),n.jsx(k,{variant:"caption",children:e(G.approximate_action_time,{capitalize:!0})})]})]}),n.jsx(S,{item:!0,xs:12,sm:6,className:"mt-2",children:n.jsx(Wd,{className:"pl-2",name:"timezoneValue",fullWidth:!0,stringLabel:E.choose_timezone})}),n.jsx(S,{item:!0,xs:12,children:n.jsx(Gt,{margin:"normal",fullWidth:!0,error:!!t,helperText:(c=t.amount)==null?void 0:c.message,required:!0,name:"amount",stringLabel:G.amount,type:"number"})}),n.jsx(S,{item:!0,xs:12,className:"mt-2",children:n.jsx(wa,{name:"comment",required:!0,fullWidth:!0,placeholder:G.add_comment,stringLabel:E.comment,rows:6})}),n.jsx(S,{item:!0,xs:12,className:"mt-2",children:n.jsx(Sa,{name:"burn_old",stringLabel:Se.burn_unused_donuts})})]})},fs={amount:0,comment:"",timezone:Intl.DateTimeFormat().resolvedOptions().timeZone,weekday:1,name:"new scheduler",every:Yt.daily,day:1},sr=({onSubmit:e=T,onCancel:t=T,defaultValue:s=fs,submitCaption:a,className:r})=>{const{translate:o}=y(),{parseTimezone:i}=tr(),{formSchema:c}=Hd(),l=xt({shouldUseNativeValidation:!1,resolver:gt(c),defaultValues:{...s,name:s.id?s.name:o(Z.new_scheduler),time:er(s.time_in_seconds),timezoneValue:i(s.timezone||fs.timezone)}}),d=m=>{e(Fd(m))};return n.jsx("div",{className:r,children:n.jsxs(Nn,{formContext:l,onSuccess:d,onError:m=>console.error(m),children:[n.jsx(Yd,{}),n.jsx(Yn,{visible:!0,onCancelClick:t,submitCaption:a})]})})},Qd=({scheduler:e,onSubmit:t,closeEdit:s,onDelete:a=T})=>{const{t:r}=y(),o=i=>{t==null||t(i),s()};return n.jsxs(ce,{className:Q("p-2"),raised:!0,children:[e.profile&&n.jsxs(w,{direction:"row",justifyContent:"space-between",children:[n.jsxs(w,{justifyContent:"flex-start",direction:"row",alignItems:"center",gap:2,children:[n.jsx(k,{variant:"caption2",children:r(G.author,{capitalize:!0})}),n.jsx(lt,{profile:e.profile,onClick:T})]}),n.jsx(P,{children:n.jsx(fe,{onClick:a,sx:{width:40},children:n.jsx(zs,{})})})]}),n.jsx(sr,{defaultValue:e,onCancel:s,onSubmit:o})]})},Kd=L(w,{})(()=>({maxWidth:700,paddingTop:8,paddingRight:4,paddingLeft:8,paddingBottom:24})),Jd=({schedulers:e,createMode:t,className:s,closeCreateMode:a=T,onCreate:r,onUpdate:o,onDelete:i=T})=>{const[c,l]=u.useState(),{t:d}=y();return u.useEffect(()=>{c!==void 0&&t&&l(void 0)},[t]),n.jsxs(Kd,{direction:"column",className:s,gap:2,children:[t&&n.jsx(sr,{onSubmit:r,onCancel:a,submitCaption:d(E.create)}),t&&n.jsx(un,{}),e==null?void 0:e.map(m=>{const h=c===m.id;return n.jsx("div",{children:h?n.jsx(Qd,{scheduler:m,onSubmit:o,onDelete:()=>i(m.id),closeEdit:()=>{m.id===c&&l(void 0)}}):n.jsx(qd,{scheduler:m,openEdit:()=>{a(),l(m.id)}})},m.id)})]})},Zd=({onClick:e})=>{const{t}=y();return n.jsxs(cn,{startIcon:n.jsx(Fs,{}),onClick:e,sx:{maxWidth:700},children:[t(G.add_new_scheduler,{capitalize:!0})," "]})},Xd=()=>{const{objects:e,isLoading:t}=Ld(),{createScheduler:s,updateScheduler:a,deleteScheduler:r}=Rd(),[o,i]=u.useState(!1),{ConfirmationModal:c}=je(),l=pe(),d=re(l.breakpoints.down("sm")),{t:m}=y();K(ne.Schedulers,t);const h=f=>{s(f,{onSuccess:()=>i(!1)})},p=f=>{c.show({title:m(O.scheduler_delete,{capitalize:!0}),text:m(G.are_you_sure_to_delete,{capitalize:!0}),onSubmit:()=>r(f)})};return n.jsxs(w,{direction:"column",sx:{height:"100%",overflow:"hidden"},className:d?void 0:"ml-4",children:[o?null:n.jsx(Zd,{onClick:()=>i(!0)}),n.jsx(Pe,{className:"flex-grow scroll",transparent:!0,children:n.jsx(Jd,{schedulers:e,createMode:o,closeCreateMode:()=>i(!1),onCreate:h,onUpdate:a,onDelete:p})})]})},eu=()=>{var t,s,a,r,o,i,c,l,d,m,h,p;const e=[{key:"settings",link:(t=F.routes[v.Settings])==null?void 0:t.path,label:((s=F.routes[v.Settings])==null?void 0:s.navbarName)||"settings",icon:(a=F.routes[v.Settings])==null?void 0:a.icon},{key:((i=(o=(r=F.routes[v.Settings])==null?void 0:r.children)==null?void 0:o.Schedulers)==null?void 0:i.path)||"schedulers",label:((d=(l=(c=F.routes[v.Settings])==null?void 0:c.children)==null?void 0:l.Schedulers)==null?void 0:d.navbarName)||V.EMPTY_STRING,icon:(p=(h=(m=F.routes[v.Settings])==null?void 0:m.children)==null?void 0:h.Schedulers)==null?void 0:p.icon}];return n.jsxs(w,{direction:"column",sx:{height:"100%",overflow:"hidden"},children:[n.jsx(Ue,{items:e}),n.jsx(Pe,{className:"flex-grow scroll",children:n.jsx(Xd,{})})]})},tu=({employee:e})=>{const t=[{key:_[v.Employees],link:_[v.Employees],label:q.employees,icon:n.jsx(Hs,{})},{key:(e==null?void 0:e.id.toString())||"employee",label:(e==null?void 0:e.user_name)||"",icon:n.jsx($s,{}),noTranslation:!0}];return n.jsx(Ue,{items:t,className:"mb-2"})},Bt=({name:e,value:t,className:s})=>{const{translate:a}=y();return n.jsxs(he,{direction:"row",alignItems:"baseline",className:Q(s,"mt-2"),children:[n.jsxs(k,{display:"block",color:"neutral.main",children:[a(e).toLowerCase(),":"]}),n.jsx(k,{display:"block",className:"ml-4",children:t})]})},At=e=>{const{BonutsCurrency:t}=ln(e||{width:"20px",height:"20px"});return{BonutsCurrency:t}},nu=({onAdminDepositClick:e=T,onEditClick:t=T,onTransferClick:s=T,onActivateClick:a=T,onDisableClick:r=T,allowAdminDeposit:o,allowDisable:i,allowActivate:c,allowEdit:l})=>{const{translate:d}=y(),{BonutsCurrency:m}=At();return n.jsxs(w,{direction:"row",className:"mr-4",justifyContent:"flex-end",children:[n.jsx(Be,{color:"primary",tooltip:d(se.transfer_donuts),onClick:s,children:n.jsx(Ws,{})}),l&&n.jsx(Be,{customIcon:!0,tooltip:`${d(q.edit)}`,onClick:t,children:n.jsx(Gs,{color:"secondary"})}),o&&n.jsx(Be,{customIcon:!0,tooltip:`${d(se.transfer_points)}`,onClick:e,children:n.jsx(m,{})}),i&&n.jsx(Be,{color:"error",tooltip:`${d(ue.disable_account)}`,onClick:r,children:n.jsx(jo,{})}),c&&n.jsx(Be,{color:"primary",tooltip:`${d(G.activate)}`,onClick:a,children:n.jsx(vo,{})})]})},Te={admin:"admin",moderator:"moderator",store_admin:"store_admin"},su=({disabled:e})=>({roleField:{disabled:e,image:!1,size:A.md,name:"roles",label:"Roles",placeholder:"Roles",source:[{key:Te.admin,label:Te.admin},{key:Te.store_admin,label:Te.store_admin},{key:Te.moderator,label:Te.moderator}],type:D.tags,optionToValue:s=>s.key?s.key:s,xs:12}}),ar=()=>Re({endpoint:Wn.endpoints.getCircles,translator:ml}),bs={Space:" ",Empty:""},au=(e,t)=>`${e}${e?bs.Space:bs.Empty}${t}`,ru=e=>{var t;return e&&(((t=e==null?void 0:e.roles)==null?void 0:t.includes(Te.admin))||(e==null?void 0:e.admin))||!1},ys={isAdmin:ru,getUserName:au},ou=()=>{const e=ie(ha),{roleField:t}=su({disabled:!ys.isAdmin(e)}),{objects:s,isLoading:a}=ar(),r=i=>({key:i.id,label:i.name});return{fields:[{readOnly:!ys.isAdmin(e),image:!1,size:A.xs,name:"email",label:"Email",xs:12,required:!0},{disabled:!1,image:!1,size:A.xs,name:"first_name",label:"Name",xs:12,md:6},{disabled:!1,image:!1,size:A.md,name:"last_name",label:"Surname",xs:12,md:6},{image:!1,size:A.xs,name:"contact",label:"Contact",xs:12,required:!0},{disabled:!1,image:!1,size:A.md,name:"position",label:"Position",xs:12},t,{image:!1,size:A.xs,name:"birthdate",label:"Date of birth",type:D.date,md:6,sm:12,xs:12},{image:!1,size:A.xs,name:"in_date",label:q.employment_date,type:D.date,md:6,sm:12,xs:12},{image:!1,size:A.md,name:"circles",label:"Circles",placeholder:"Circles",source:s.map(r),valueToOption:i=>i.map(c=>({key:c.id,label:c.name})),optionToValue:i=>i.key,type:D.tags,loading:a,xs:12},{image:!1,size:A.md,name:"bio",label:G.about_myself,placeholder:G.about_myself,type:D.textarea,maxRows:7,minRows:5,rows:6,xs:12}]}},rr=({profile:e,isLoading:t=!1,error:s,updateProfile:a})=>{const{fields:r}=ou(),o={fields:r,formId:"user-profile"},i=e;K(ne.Profile,t&&!s);const c=l=>{if(e)return a(e,{...l,active:!0})};return n.jsx(Oe,{hasInitial:!0,initialValues:i,...o,onSubmit:c})},iu=ft.injectEndpoints({endpoints:e=>({updateAvatars:e.mutation({query(t){return zn("/avatars","POST",t)}})})}),cu=()=>{const e=ie(ye),[t]=iu.useUpdateAvatarsMutation(),{showNotification:s}=ke();return{postAvatar:async(r,o)=>{var l;const{id:i,file:c}=r;if(e){const d=await t({body:{id:i,uploaded_image:c,tenant:e}}),m={data:void 0,...d};return m.data&&((l=o==null?void 0:o.onSuccess)==null||l.call(o,m.data),s($t.updated)),d}}}},or=({profile:e})=>{const{postAvatar:t}=cu(),{ImageModal:s}=je(),a=l=>{s.show({url:l||V.EMPTY_STRING,title:e==null?void 0:e.name})},o={fields:[{image:!0,size:A.xs,name:"user_avatar",label:"Avatar",type:D.imageUpload,xs:12,onClick:l=>a(l==null?void 0:l.toString())}],formId:"user-profile"},i=e,c=l=>{if(e&&e.tenant&&e.id){const d=l.user_avatar;return t({file:d,id:e.id})}};return n.jsx(Oe,{hasInitial:!0,initialValues:i,...o,onSubmit:c})},lu=()=>{const{profile:e,isLoading:t,error:s,updateProfile:a}=Ie();return n.jsxs(xn,{container:!0,spacing:2,className:"p-2",children:[n.jsx(xn,{size:{xs:12,sm:6,lg:4},children:n.jsx(or,{profile:e})}),n.jsx(xn,{size:{xs:12,sm:6,lg:6},children:n.jsx(rr,{profile:e,isLoading:t,error:s,updateProfile:a})})]})},du=({profile:e,onClose:t=T})=>{const{updateProfile:s}=Ea(),{translate:a}=y();return n.jsxs(n.Fragment,{children:[n.jsx(w,{direction:"row",justifyContent:"flex-end",children:n.jsx(Be,{customIcon:!0,tooltip:`${a(E.close)}`,onClick:t,children:n.jsx(it,{})})}),n.jsxs(S,{container:!0,spacing:2,className:"p-2",children:[n.jsx(S,{item:!0,xs:12,sm:6,lg:4,children:n.jsx(or,{profile:e})}),n.jsx(S,{item:!0,xs:12,sm:6,lg:6,children:n.jsx(rr,{profile:e,updateProfile:s})})]})]})},uu=({employee:e,onImageClick:t=T,onAdminDepositClick:s=T,onTransferClick:a=T,onActivateClick:r=T,onDisableClick:o=T,allowAdminDeposit:i,allowActivate:c,allowDisable:l,allowEdit:d})=>{var g,b;const m=pe(),{translate:h}=y(),p=re(m.breakpoints.down("sm")),[f,x]=u.useState(!1);return n.jsxs(w,{direction:"column",className:"height-100",children:[n.jsxs(w,{direction:"column",children:[n.jsx(tu,{employee:e}),n.jsx(ce,{className:"width-100 mb-1",children:n.jsx(nu,{allowDisable:l,allowActivate:c,allowAdminDeposit:i,allowEdit:d,onAdminDepositClick:s,onTransferClick:a,onEditClick:()=>x(!0),onDisableClick:o,onActivateClick:r})})]}),n.jsx(ce,{className:"flex-grow scroll",children:n.jsx(ze,{className:"m-2 p-2",children:f?n.jsx(du,{profile:e,onClose:()=>x(!1)}):n.jsx(n.Fragment,{children:n.jsxs(S,{container:!0,justifyItems:"flex-start",spacing:4,children:[n.jsxs(S,{item:!0,xs:12,sm:8,md:4,lg:4,xl:3,className:Q("",{"text-align-center":p}),children:[n.jsx(dn,{defaultImage:$n,image:(g=e==null?void 0:e.user_avatar)==null?void 0:g.url,className:"ml-3",onClick:t}),n.jsx(he,{direction:"row",justifyContent:"center",alignItems:{sm:"center",xs:"center"},flexWrap:"wrap",spacing:1,gap:1,className:"ml-4 mt-4",children:(b=e==null?void 0:e.circles)==null?void 0:b.map(j=>n.jsx(Aa,{title:j.name}))})]}),n.jsxs(S,{item:!0,xs:12,sm:12,md:5,lg:6,order:{xs:3,md:2},children:[n.jsxs(he,{direction:{sm:"row",xs:"column"},alignItems:{sm:"center",xs:"flex-start"},spacing:2,children:[n.jsx(k,{variant:"h4",display:"block",children:e==null?void 0:e.user_name}),n.jsxs(he,{direction:{sm:"column",md:"row",xs:"column"},spacing:2,children:[(e==null?void 0:e.admin)&&n.jsx(Ot,{color:"primary",icon:n.jsx(wo,{}),label:h(G.admin)}),e&&!(e!=null&&e.active)&&n.jsx(Ot,{color:"error",icon:n.jsx(So,{}),label:h(Z.not_active)}),(e==null?void 0:e.store_admin)&&n.jsx(Ot,{color:"warning",icon:n.jsx(Co,{}),label:h(O.store_admin)})]})]}),n.jsx(k,{variant:"h5",display:"block",className:"mb-4",children:e==null?void 0:e.position}),n.jsx(Bt,{name:"email",value:e==null?void 0:e.email,className:"mb-3"}),n.jsx(Bt,{name:E.contact,value:e==null?void 0:e.contact,className:"mb-3"}),n.jsx(Bt,{name:Se.birthday,value:tt(e==null?void 0:e.birthdate,!0),className:"mb-3"}),n.jsx(Bt,{name:qe.in_date,value:tt(e==null?void 0:e.in_date),className:"mb-3"}),n.jsx(un,{className:"mt-4 mb-4"}),n.jsx(P,{children:n.jsx(k,{isPreformatted:!0,children:e==null?void 0:e.bio})})]})]})})})})]})},mu=L(uu,{})(({theme:e})=>({})),ir=()=>{const{AdminDepositModal:e,TransferModal:t}=je(),{t:s}=y();return{showAdminDeposit:o=>{e.show({id:o,title:s(G.admin_deposit,{capitalize:!0})})},showTransfer:o=>{t.show({id:o,title:s(se.transfer_donuts,{capitalize:!0})})}}},hu=()=>{const{usePostProfilesByIdSetActivityMutation:e}=ma,[t]=e(),{authTenant:s}=Ie(),{showNotification:a}=ke(),{ConfirmationModal:r}=je(),{t:o}=y(),i=(l,d)=>{const{id:m,active:h}=l;s&&t({id:m,body:{tenant:s,active:h}}).unwrap().then(p=>{var f;(f=d==null?void 0:d.onSuccess)==null||f.call(d,p),a(ue.disabled)}).catch(p=>{var f;return(f=d==null?void 0:d.onError)==null?void 0:f.call(d,p.data.message)})};return{setActivity:i,setActivityWithConfirmation:(l,d)=>{r.show({text:o(G.are_you_sure,{capitalize:!0}),title:o(E.confirmation,{capitalize:!0}),onSubmit:()=>i(l,d)})}}},pu=()=>{const{id:e}=nt(),{employee:t,isLoading:s,error:a}=Hn(e),{ImageModal:r}=je(),{profile:o}=Ie(),{showAdminDeposit:i,showTransfer:c}=ir(),{setActivityWithConfirmation:l,setActivity:d}=hu();K(ne.EmployeePreview,s&&!a);const m=()=>{var g,b;(g=t==null?void 0:t.user_avatar)!=null&&g.url&&r.show({url:((b=t==null?void 0:t.user_avatar)==null?void 0:b.url)||""})},h=()=>{t&&i(t.id)},p=()=>{t&&c(t.id)},f=()=>{t&&d({id:t.id,active:!0})},x=()=>{t&&l({id:t.id,active:!1})};return n.jsx(mu,{employee:t,onImageClick:m,allowAdminDeposit:o==null?void 0:o.admin,allowDisable:o==null?void 0:o.admin,allowEdit:o==null?void 0:o.admin,allowActivate:o==null?void 0:o.admin,onAdminDepositClick:h,onTransferClick:p,onActivateClick:f,onDisableClick:x})},gu=()=>n.jsx(pu,{}),cr=e=>{const t=ie(ye),{data:s,error:a,isLoading:r,refetch:o}=Yi({id:e||"",tenant:t||void 0});return{donut:za(s),isLoading:r,error:a,refetch:o}},xu=()=>{const{ImageModal:e}=je(),{t}=y(),s=o=>{e.show({url:o||V.EMPTY_STRING,title:t($.preview,{capitalize:!0})})},a=[{id:1,md:5,lg:3,xs:12,padding:{pt:0}},{id:2,md:7,lg:9,xs:12,padding:{pt:0},groups:[{id:3,xs:12,lg:8,offset:{offsetAfterElement:{lg:4}},padding:{p:1},sx:()=>({borderBottom:1,boxShadow:2,mb:4})}]}];return{fields:[{image:!0,size:A.xs,name:"logo",label:"Logo",type:D.imageUpload,xs:12,md:12,group:1,onClick:o=>s(o==null?void 0:o.toString())},{image:!1,size:A.xs,name:"name",label:"name",xs:12,required:!0,group:3},{disabled:!1,type:D.switch,image:!1,size:A.xs,name:"active",label:G.active,required:!1,xs:12,group:3},{disabled:!1,type:D.number,image:!1,size:A.xs,name:"price",label:"price",required:!0,xs:12,sm:6,lg:4,group:2},{disabled:!1,type:D.date,image:!1,size:A.xs,name:"expiration_date",label:q.expiration_date,required:!1,xs:12,sm:6,lg:4,offset:{offsetAfterElement:{lg:4}},group:2},{disabled:!1,type:D.number,image:!1,size:A.xs,name:"on_stock",label:kt.on_stock,required:!1,xs:12,md:6,lg:2,group:2},{disabled:!1,type:D.number,image:!1,size:A.xs,name:"supply_days",label:ue.delivery_days,required:!1,xs:12,md:6,lg:2,offset:{offsetAfterElement:{lg:4}},group:2},{disabled:!1,type:D.textarea,image:!1,size:A.xs,name:"description",label:ue.description,required:!1,xs:12,lg:8,group:2}],groups:a}},fu=({onSubmit:e,donut:t})=>{const{fields:s,groups:a}=xu(),o={fields:s,formId:"edit-donut",groups:a,groupGap:0,onSubmit:i=>e(i),initialValues:t};return n.jsx("div",{className:"p-8",children:n.jsx(Oe,{hasInitial:!0,...o})})},bu=()=>{const[e]=Vc(),t=Ae(),{profile:s}=Ie();return{putDonut:async(r,o,i)=>{var c;if(s!=null&&s.tenant){const{id:l,logo:d,created_at:m,likes:h,liked:p,comments:f,commentable:x,likeable:g,...b}=o,j=d&&!Object.getOwnPropertyDescriptor(d,"url")?d:void 0,C=await e({id:r.toString(),body:{...b,...j&&{logo:j},tenant:s==null?void 0:s.tenant}});return t(Fn.util.invalidateTags(["Donuts"])),"data"in C&&((c=i==null?void 0:i.onSuccess)==null||c.call(i,C.data)),C}}}},yu=()=>{const{id:e}=nt(),{donut:t,isLoading:s,refetch:a}=cr(e),{putDonut:r}=bu();K(ne.DonutPreview,s);const o=[{key:"shop",link:_.Store,label:oe.DONUTS,icon:n.jsx(Vs,{})},{key:e||"donut",label:(t==null?void 0:t.name)||"",icon:n.jsx(Us,{})}],i=c=>{if(t)return r(t==null?void 0:t.id,{...c},{onSuccess:()=>a()})};return n.jsxs(n.Fragment,{children:[n.jsx(Ue,{items:o,className:"mb-3"}),n.jsx(ce,{children:n.jsx(ze,{className:"m-3 p-3",children:t?n.jsx(fu,{donut:t,onSubmit:i}):null})})]})},ju=()=>n.jsx(yu,{}),mn=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"60 10 110 80",...e},u.createElement("g",{id:"layer101",fill:"#474f55",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"M 242,556 C 139,522 77,433 76,320 75,54 429,-23 539,220 c 70,153 -35,332 -203,346 -28,2 -70,-2 -94,-10 z M 348,364 c 41,-29 19,-94 -33,-94 -21,0 -55,32 -55,51 0,13 42,59 54,59 6,0 22,-7 34,-16 z",id:"path2"})),u.createElement("g",{id:"layer102",fill:"#8b7849",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"m 219,507 c -29,-16 -54,-40 -74,-72 -26,-42 -30,-58 -30,-121 0,-64 3,-77 30,-115 113,-160 349,-99 381,98 13,82 -46,187 -123,220 -51,21 -133,17 -184,-10 z M 374,388 c 40,-35 43,-78 11,-116 -22,-26 -34,-32 -66,-32 -80,0 -115,77 -63,139 32,39 80,42 118,9 z",id:"path5"})),u.createElement("g",{id:"layer103",fill:"#45b980",stroke:"none",style:{fill:"#226e13",fillOpacity:1},transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"M 219,507 C 136,463 90,346 120,255 157,143 290,81 398,125 c 168,71 168,319 0,390 -55,22 -127,19 -179,-8 z M 373,390 c 50,-39 42,-117 -15,-146 -60,-31 -128,13 -128,83 0,71 85,109 143,63 z",id:"path8",style:{fill:"#226e13",fillOpacity:1}})),u.createElement("g",{id:"layer104",fill:"#b2b24f",stroke:"none",style:{fill:"#e5b54f",fillOpacity:1},transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"m 418,489 c 37,-37 72,-98 72,-127 0,-24 -41,-62 -67,-62 -13,0 -24,-8 -28,-20 -4,-11 -20,-27 -37,-36 -40,-21 -97,-6 -127,33 -21,26 -29,73 -12,73 5,0 16,11 25,25 12,18 -2,11 -46,-25 -34,-27 -68,-50 -75,-50 -18,0 -16,-17 6,-65 49,-105 183,-157 269,-105 42,26 89,100 97,153 3,23 11,52 17,64 20,40 -33,128 -96,160 l -31,15 z",id:"path11",style:{fill:"#e5b54f",fillOpacity:1}}),u.createElement("path",{d:"m 382,459 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path13",style:{fill:"#e5b54f",fillOpacity:1}}),u.createElement("path",{d:"m 210,430 c 0,-5 11,-10 25,-10 14,0 25,5 25,10 0,6 -11,10 -25,10 -14,0 -25,-4 -25,-10 z",id:"path15",style:{fill:"#e5b54f",fillOpacity:1}}),u.createElement("path",{d:"m 436,391 c -7,-11 22,-23 36,-15 6,4 5,10 -3,15 -18,11 -26,11 -33,0 z",id:"path17",style:{fill:"#e5b54f",fillOpacity:1}})),u.createElement("g",{id:"layer105",fill:"#f8bf37",stroke:"none",style:{fill:"#f88b12",fillOpacity:1},transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"m 448,463 c 16,-21 35,-55 42,-75 13,-44 36,-53 25,-10 -8,35 -48,93 -76,110 -17,11 -15,6 9,-25 z",id:"path20",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 382,459 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path22",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 210,430 c 0,-5 11,-10 25,-10 14,0 25,5 25,10 0,6 -11,10 -25,10 -14,0 -25,-4 -25,-10 z",id:"path24",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 436,391 c -7,-11 22,-23 36,-15 6,4 5,10 -3,15 -18,11 -26,11 -33,0 z",id:"path26",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 174,327 c -18,-15 -39,-27 -47,-27 -13,0 -13,-7 -4,-42 20,-79 112,-148 200,-148 77,0 167,100 167,185 v 36 l -26,-20 c -15,-12 -32,-21 -40,-21 -7,0 -27,-14 -44,-31 -27,-28 -36,-31 -72,-26 -59,8 -92,36 -98,82 l -5,38 z",id:"path28",style:{fill:"#f88b12",fillOpacity:1}})),u.createElement("g",{id:"layer106",fill:"#a3ddc1",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"m 382,459 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path31"}),u.createElement("path",{d:"m 210,430 c 0,-5 11,-10 25,-10 14,0 25,5 25,10 0,6 -11,10 -25,10 -14,0 -25,-4 -25,-10 z",id:"path33"}),u.createElement("path",{d:"m 436,391 c -7,-11 22,-23 36,-15 6,4 5,10 -3,15 -18,11 -26,11 -33,0 z",id:"path35"}),u.createElement("path",{d:"m 455,256 c -11,-8 -14,-15 -8,-19 6,-4 16,0 23,8 17,21 8,28 -15,11 z",id:"path37"}),u.createElement("path",{d:"m 160,250 c 0,-5 9,-10 20,-10 11,0 20,5 20,10 0,6 -9,10 -20,10 -11,0 -20,-4 -20,-10 z",id:"path39"}),u.createElement("path",{d:"m 332,179 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path41"})),u.createElement("g",{id:"layer107",fill:"#fde7b1",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"m 220,430 c 0,-5 7,-10 15,-10 8,0 15,5 15,10 0,6 -7,10 -15,10 -8,0 -15,-4 -15,-10 z",id:"path44"}),u.createElement("path",{d:"m 455,256 c -11,-8 -14,-15 -8,-19 6,-4 16,0 23,8 17,21 8,28 -15,11 z",id:"path46"}),u.createElement("path",{d:"m 160,250 c 0,-5 9,-10 20,-10 11,0 20,5 20,10 0,6 -9,10 -20,10 -11,0 -20,-4 -20,-10 z",id:"path48"}),u.createElement("path",{d:"m 332,179 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path50"})),u.createElement("g",{id:"layer108",fill:"#f6f9f1",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,50.849569,24.284117)"},u.createElement("path",{d:"m 220,430 c 0,-5 7,-10 15,-10 8,0 15,5 15,10 0,6 -7,10 -15,10 -8,0 -15,-4 -15,-10 z",id:"path53"}),u.createElement("path",{d:"m 165,250 c 3,-5 13,-10 21,-10 8,0 14,5 14,10 0,6 -9,10 -21,10 -11,0 -17,-4 -14,-10 z",id:"path55"})),u.createElement("text",{style:{fontStyle:"normal",fontWeight:"normal",fontSize:"60.1239px",lineHeight:1.25,fontFamily:"sans-serif",fill:"#333333",fillOpacity:1,stroke:"none",strokeWidth:.313145},x:24.391485,y:66.192505,id:"text4629",transform:"scale(0.94388028,1.0594564)"},u.createElement("tspan",{id:"tspan4627",style:{fontSize:"60.1239px",fill:"#333333",strokeWidth:.313145},x:24.391485,y:66.192505},"b")),u.createElement("text",{style:{fontStyle:"normal",fontWeight:"normal",fontSize:"50.8px",lineHeight:1.25,fontFamily:"sans-serif",fill:"#333333",fillOpacity:1,stroke:"none",strokeWidth:.264583},x:101.37981,y:69.966354,id:"text9151"},u.createElement("tspan",{id:"tspan9149",style:{fontSize:"50.8px",fill:"#333333",strokeWidth:.264583},x:101.37981,y:69.966354},"nuts"))),bt=()=>{const e=Ae();return{navigateToLogin:()=>{e(me(_[v.Login]))},navigateToSignUp:()=>{e(me(_[v.Registration]))},navigateToRoot:()=>{e(me("/"))},navigateToRestorePassword:()=>{e(me(_[v.RequestRecover]))}}},vu=e=>{const{data:t,isLoading:s}=lc({token:e},{skip:!e}),[a]=cc(),[r]=ia(),{showNotification:o}=ke(),{translate:i}=y(),{navigateToRoot:c}=bt(),{setValue:l}=sn;return{confirm:()=>{e&&a({body:{token:e}}).then(m=>{"data"in m&&(o(i(E.confirmed,{capitalize:!0})),l("auth_token",m.data.auth_token),r().finally(()=>c()))})},user:t==null?void 0:t.data,isLoading:s}},wu="_box_um1te_1",Su={box:wu},Cu=()=>{var i;const{token:e}=nt(),{user:t,confirm:s,isLoading:a}=vu(e),{navigateToLogin:r}=bt(),{translate:o}=y();return K(ne.ConfirmEmail,a),n.jsxs(P,{className:Su.box,sx:{mt:8},children:[n.jsx(mn,{style:{width:"110px",height:"50px"}}),(i=t==null?void 0:t.attributes)!=null&&i.email?n.jsxs(n.Fragment,{children:[n.jsx(k,{children:`${o(q.email_confirmation,{capitalize:!0})}:  ${t.attributes.email}`}),n.jsx(te,{variant:"contained",sx:{mt:3,mb:2},onClick:s,children:o(E.confirm)})]}):n.jsxs(n.Fragment,{children:[n.jsx(k,{children:o(Z.not_found,{capitalize:!0})}),n.jsx(te,{variant:"contained",sx:{mt:3,mb:2},onClick:r,children:o(E.close)})]})]})},_u=()=>({fields:[{image:!1,size:A.xs,name:"email",label:"Email",xs:12,required:!0},{disabled:!1,image:!1,size:A.xs,name:"first_name",label:"Name",xs:12,md:6,required:!0},{disabled:!1,image:!1,size:A.md,name:"last_name",label:"Surname",xs:12,md:6,required:!0}]}),yt="Invitations",lr=ae.enhanceEndpoints({addTagTypes:[yt],endpoints:{getInvitationsMy:{providesTags:[yt]},postInvitationsByIdAccept:{invalidatesTags:[yt]},postInvitationsByIdDecline:{invalidatesTags:[yt]},postInvitations:{invalidatesTags:[yt]}}}),{useGetInvitationsMyQuery:ig,usePostInvitationsByIdAcceptMutation:Tu,usePostInvitationsByIdDeclineMutation:ku}=lr,Pu="invitationLogic",dr=e=>{const[t]=Tu(),[s]=ku(),[a]=Ji(),{showNotification:r}=ke(),{openLoader:o,closeLoader:i}=K(Pu),{checkAuth:c,auth:l}=Ve();return{accept:()=>{if(e){const{id:p}=e;o(),t({id:p.toString()}).then(()=>c()).finally(()=>{i()})}},decline:()=>{if(e){const{id:p}=e;o(),s({id:p.toString()}).then(()=>c()).finally(()=>{i()})}},create:(p,f)=>{const{tenant:x}=l;p&&x&&(p!=null&&p.email)&&p.first_name&&p.last_name&&(o(),a({body:{first_name:p.first_name,last_name:p.last_name,email:p.email,tenant:x}}).then(g=>{"error"in g||(r(Z.new_invitation_was_created),r(Z.new_invitation_email_was_sent),f==null||f())}).finally(()=>{i()}))}}},Jn=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,}$/i,Eu=()=>{const{translate:e}=y();return{formSchema:pt().shape({first_name:xe().required(e(dt.first_name)),last_name:xe().required(e(ut.last_name)),email:xe().required(e(q.email_address_must_be_valid,{capitalize:!0})).matches(Jn,e(q.email_address_must_be_valid,{capitalize:!0})).email(e(q.email_address_must_be_valid,{capitalize:!0}))})}},Au=()=>{const{fields:e}=_u(),{create:t}=dr(),{t:s}=y(),{formSchema:a}=Eu(),r=gt(a),o={fields:e,formId:"create-invitation",resolver:r},i=c=>{t(c)};return n.jsx("div",{className:"p-5",children:n.jsxs(w,{maxWidth:400,border:1,borderRadius:2,padding:2,children:[n.jsx(k,{variant:"h6",children:s(Z.new_invitation,{capitalize:!0})}),n.jsx(Oe,{...o,onSubmit:i})]})})},Iu=()=>n.jsx(w,{direction:"column",className:"height-100",children:n.jsx(Pe,{className:"flex-grow scroll",children:n.jsx(Au,{})})}),Nu=()=>{const{id:e}=nt();return n.jsx(w,{direction:"column",className:"height-100 width-100",alignItems:"center",children:n.jsx(Ua,{postId:e})})},js=(e,t,s,a)=>{const r=aa(e.getValue(t),s);return a({itemRank:r}),r.passed},Du=({column:e,table:t})=>{var i;const s=t.getPreFilteredRowModel().flatRows.length,a=(i=t.getPreFilteredRowModel().flatRows[0])==null?void 0:i.getValue(e.id),{translate:r}=y(),o=e.getFilterValue();return typeof a=="number"?n.jsxs(he,{direction:"row",className:"bnt-table-filter",gap:2,children:[n.jsx(qt,{type:"number",value:(o==null?void 0:o[0])??"",onChange:c=>e.setFilterValue(l=>[c.target.value,l==null?void 0:l[1]]),placeholder:"Min",variant:"standard"}),n.jsx(qt,{type:"number",value:(o==null?void 0:o[1])??"",onChange:c=>e.setFilterValue(l=>[l==null?void 0:l[0],c.target.value]),placeholder:"Max",variant:"standard"})]}):n.jsx(qt,{className:"bnt-table-filter",value:o??"",onChange:c=>e.setFilterValue(c.target.value),placeholder:`${r(O.search,{capitalize:!0})}...${s} ${r(de.records,{count:s})}`,variant:"standard",shouldTranslate:!1})},Mu=({columns:e,data:t,className:s,pageSize:a=5,isVirtual:r=!1,estimateSize:o,hasNext:i=!1,isFetching:c=!1,fetchNext:l=T,virtualOverscan:d=100,noHeaders:m=!1})=>{const[h,p]=u.useState([]),[f,x]=u.useState(""),[g,b]=u.useState([]),j=et.useRef(null),C=pe(),R=re(C.breakpoints.down("sm")),N=Ti({data:t,columns:e,filterFns:{fuzzy:js},initialState:{pagination:{pageSize:a,pageIndex:0}},state:{columnFilters:h,globalFilter:f,sorting:g},onColumnFiltersChange:p,onGlobalFilterChange:x,globalFilterFn:js,getCoreRowModel:Mi(),getFilteredRowModel:Di(),getSortedRowModel:Ni(),getPaginationRowModel:r?void 0:Ii(),getFacetedRowModel:Ai(),getFacetedUniqueValues:Ei(),getFacetedMinMaxValues:Pi(),onSortingChange:b}),{translate:W}=y(),J=[5,10,20,25,50,100],{rows:X}=N.getRowModel(),U=ki({getScrollElement:()=>j==null?void 0:j.current,count:X.length,overscan:d,estimateSize:()=>o||(R?200:100),rangeExtractor:I=>Ri({...I,startIndex:I.startIndex%2===0?I.startIndex:Math.max(0,I.startIndex-1)})}),H=et.useCallback(I=>{if(I){const{scrollHeight:B,scrollTop:Y,clientHeight:Le}=I;B-Y-Le<300&&!c&&i&&l()}},[l,c,i]);et.useEffect(()=>{H(j.current)},[]);const z=U.getVirtualItems(),[le,ee]=z.length>0?[z[0].start,U.getTotalSize()-z[z.length-1].end]:[0,0];return n.jsxs(_o,{sx:{boxShadow:"none",height:"100%",overflow:"auto"},className:s,onScroll:I=>H(I.target),ref:j,children:[n.jsxs(To,{stickyHeader:!0,children:[m?null:n.jsx(ko,{children:N.getHeaderGroups().map((I,B)=>n.jsx(Dt,{children:I.headers.map(Y=>n.jsxs(Mt,{component:"th",scope:"row",colSpan:Y.colSpan,className:Q("bnt-table-th bnt-table-header",`-sort-${Y.column.getIsSorted()}`,{"-cursor-pointer":I.headers.length-1!==B}),children:[Y.isPlaceholder?null:n.jsxs(he,{direction:"row",alignItems:"center",gap:2,className:"sorter",onClick:Y.column.getToggleSortingHandler(),children:[ms(Y.column.columnDef.header,Y.getContext()),Y.column.getCanSort()&&n.jsxs(he,{className:Q(`sort-${Y.column.getIsSorted()}`),children:[n.jsx(Po,{className:Q("sort-icon","sort-icon__asc")}),n.jsx(Eo,{className:Q("sort-icon","sort-icon__desc")})]})]}),Y.column.getCanFilter()?n.jsx("div",{children:n.jsx(Du,{column:Y.column,table:N})}):null]},Y.id))},I.id))}),n.jsxs(Ao,{children:[le>0&&n.jsx(Dt,{children:n.jsx(Mt,{style:{height:`${le}px`}})}),z.map((I,B)=>{const Y=X[I.index];return n.jsx(Dt,{ref:r?U.measureElement:void 0,"data-index":B,className:Q("bnt-table-tr",{"bnt-table-tr-odd":B%2===0},{"bnt-table-tr-even":B%2===1}),children:Y.getVisibleCells().map(Le=>n.jsx(Mt,{children:ms(Le.column.columnDef.cell,Le.getContext())},Le.id))},Y.id)}),ee>0&&n.jsx(Dt,{children:n.jsx(Mt,{style:{height:`${ee}px`}})})]})]}),t.length&&!r?n.jsx("div",{className:"bnt-table-footer",children:n.jsxs(he,{direction:"row",gap:2,justifyContent:"space-between",alignItems:"stretch",flexWrap:{xs:"wrap",sm:"nowrap"},children:[n.jsx(Ge,{disabled:!N.getCanPreviousPage(),className:"bnt-navigation-button",onClick:()=>N.previousPage(),children:W($.previous,{capitalize:!0})}),n.jsxs(S,{container:!0,gap:2,justifyContent:"center",children:[n.jsx(S,{item:!0,xs:12,sm:5,md:4,children:n.jsx(Sn,{fullWidth:!0,children:n.jsx(os,{value:N.getState().pagination.pageIndex,onChange:I=>{N.setPageIndex(Number(I.target.value))},inputProps:{name:"pageSelect",id:"page-select"},variant:"standard",children:N.getPageOptions().map((I,B)=>n.jsxs(is,{value:I,children:[W("Page")," ",B+1]},I))})})}),n.jsx(S,{item:!0,xs:12,sm:5,md:4,children:n.jsx(Sn,{fullWidth:!0,children:n.jsx(os,{value:N.getState().pagination.pageSize,onChange:I=>{N.setPageSize(Number(I.target.value))},inputProps:{name:"numberOfRows",id:"number-of-rows"},variant:"standard",children:J.map(I=>n.jsxs(is,{value:I,children:[I," ",W("rows")]},I))})})})]}),n.jsx(Ge,{disabled:!N.getCanNextPage(),className:"bnt-navigation-button",onClick:()=>N.nextPage(),children:W(Z.next,{capitalize:!0})})]})}):null]})},hn=L(Mu,{})(({theme:e})=>({overflowX:"unset","& table":{border:0},"& tbody":{border:0},"& td":{border:0,...e.typography.body2,paddingTop:4,paddingBottom:4,paddingLeft:0,paddingRight:0,fontSize:"1.1rem",color:e.palette.grey[800]},"& tr":{border:0},"& input":{border:0},[M("bnt-table-th")]:{minWidth:"60px",padding:"4px"},[M("bnt-table-filter")]:{width:"100%"},[M("bnt-table-tr-even")]:{background:e.palette.grey[100]},[M("bnt-table-tr")]:{[Hc]:{background:e.palette.grey[200]}},[M("bnt-navigation-button")]:{width:"50%",[e.breakpoints.down("sm")]:{width:"100%"}},[M("bnt-table-header")]:{border:0,borderColor:e.palette.grey[400],...e.typography.h6,marginBottom:"24px","& input":{width:"100%"},"& .sorter":{"&:hover":{color:e.palette.primary.dark,cursor:"pointer"}},"& .sort-icon":{opacity:.2},"& .sort-asc":{"& .sort-icon__asc":{color:e.palette.primary.dark,opacity:1}},"& .sort-desc":{"& .sort-icon__desc":{color:e.palette.primary.dark,opacity:1}}},[M("bnt-table-footer")]:{marginTop:"24px",paddingLeft:"16px"}}));var Qt=(e=>(e.CellString="CellString",e.CellNumber="CellNumber",e.CellAction="CelleAction",e))(Qt||{}),Kt=(e=>(e.StringHeader="StringHeader",e.ActionHeader="ActionHeader",e))(Kt||{}),Fe=(e=>(e.Edit="Edit",e.Accept="Accept",e.Decline="Decline",e.Create="Create",e.Delete="Delete",e))(Fe||{});const Ru=({value:e})=>n.jsx("div",{className:"pl-3",children:e}),Lu=e=>e.cell?e.cell:s=>{const{getValue:a}=s;switch(e.cellType){default:return n.jsx(Ru,{value:a()})}},Bu=(e,t)=>{var a,r;const s=t||(o=>o);return(a=e.header)!=null&&a.value?be.isString((r=e.header)==null?void 0:r.value)?s(e.header.value):e.header.value:s(e.accessor)},qu=e=>{switch(e){case Fe.Accept:return n.jsx(Qs,{color:"primary"});case Fe.Decline:return n.jsx(Ys,{color:"error"});case Fe.Create:return n.jsx(Fs,{color:"primary"});case Fe.Delete:return n.jsx(zs,{});case Fe.Edit:return n.jsx(Gs,{});default:return n.jsx(tn,{})}},vs=({rowId:e,actions:t})=>n.jsx(he,{direction:"row",children:t.map(s=>n.jsx(fe,{onClick:()=>{var a;return(a=s.onClick)==null?void 0:a.call(s,e)},sx:e?{}:{border:"0.5px solid"},children:qu(s.actionType)}))}),ur=e=>{const t=Dn(),{translate:s}=y(),a=u.useMemo(()=>e.columns.map(i=>{const c=i.accessor;return t.accessor(c,{cell:Lu(i),header:()=>Bu(i,l=>s(l,{capitalize:!0})),enableSorting:i.enableSorting,enableColumnFilter:i.enableColumnFilter,...i.filterFn?{filterFn:i.filterFn}:null})}),[e,t]),r=u.useMemo(()=>{if(e.actions||e.headerActions){const i=e.actions||{},c=e.headerActions||{};return[t.accessor("actions",{cell:l=>n.jsx(vs,{rowId:l.row.original.id,actions:Object.values(i)}),header:Object.values(c).length?()=>n.jsx(vs,{actions:Object.values(c)}):"",enableSorting:!1,enableColumnFilter:!1})]}return[]},[e]);return{tableConfig:u.useMemo(()=>[...a,...r],[r,a]),columnsConfig:a,actionsConfig:r}},Ou=()=>{const{CreateCircle:e}=je(),{t}=y();return{showCreateCircleModal:()=>{e.show({title:t(Z.new_circle,{capitalize:!0})})}}},zu=()=>{const{translate:e}=y(),{showCreateCircleModal:t}=Ou(),{deleteCircle:s}=Da(),{ConfirmationModal:a,EditCircle:r}=je(),o=d=>{d&&a.show({text:e(G.are_you_sure_to_delete,{capitalize:!0}),onSubmit:()=>s(d),title:e(E.confirmation,{capitalize:!0})})},i=d=>{d&&r.show({title:e(q.edit,{capitalize:!0}),circleId:d})},c=u.useMemo(()=>({columns:[{accessor:"name",cellType:Qt.CellString,enableSorting:!0,enableColumnFilter:!0,header:{headerType:Kt.StringHeader,value:e(Z.name,{capitalize:!0})}}],actions:{edit:{onClick:d=>i(d),actionType:Fe.Edit},delete:{onClick:d=>o(d),actionType:Fe.Delete}},headerActions:{create:{onClick:t,actionType:Fe.Create}}}),[]),{tableConfig:l}=ur(c);return{tableConfig:l}},Fu=({circles:e})=>{var a,r,o,i,c,l,d,m,h,p,f,x;const{tableConfig:t}=zu(),s=[{key:"settings",link:(a=F.routes[v.Settings])==null?void 0:a.path,label:((r=F.routes[v.Settings])==null?void 0:r.navbarName)||"settings",icon:(o=F.routes[v.Settings])==null?void 0:o.icon},{key:((l=(c=(i=F.routes[v.Settings])==null?void 0:i.children)==null?void 0:c.Circles)==null?void 0:l.path)||"circles",label:((h=(m=(d=F.routes[v.Settings])==null?void 0:d.children)==null?void 0:m.Circles)==null?void 0:h.navbarName)||V.EMPTY_STRING,icon:(x=(f=(p=F.routes[v.Settings])==null?void 0:p.children)==null?void 0:f.Circles)==null?void 0:x.icon}];return n.jsxs(w,{direction:"column",sx:{height:"100%",overflow:"hidden"},children:[n.jsx(Ue,{items:s}),n.jsx(Pe,{className:"flex-grow scroll",children:n.jsx(hn,{data:e,columns:t})})]})},Hu=()=>{const{objects:e,isLoading:t}=ar();return K(ne.Circles,t),n.jsx(Fu,{circles:e})},$u=()=>n.jsx(Hu,{}),Wu=ft.enhanceEndpoints({addTagTypes:["Request"],endpoints:{}}),Gu=({archive:e,active:t,incoming:s,my:a})=>Re({endpoint:Wu.endpoints.getRequests,args:{page:1,archive:e,active:t,incoming:s,my:a},pollingInterval:1e4,translator:Et.toRequests}),Vu=({donut:e,onClick:t})=>{var s,a;return n.jsx(Ge,{onClick:t,disableRipple:!0,startIcon:n.jsx(Ye,{src:((a=(s=e.logo)==null?void 0:s.thumb)==null?void 0:a.url)||void 0,alt:`${e.name} `}),children:n.jsx(Me,{variant:"body2",children:e.name&&n.jsx("span",{children:e.name})})})},Uu=()=>({getFormattedDate:u.useCallback(t=>t,[])}),Yu=({profile:e,donut:t,datetime:s})=>{const{translate:a}=y(),r=pe(),o=re(r.breakpoints.down("sm")),{getFormattedDate:i}=Uu();return n.jsxs(S,{container:!0,className:o?"pl-3":"pl-1",children:[n.jsx(S,{item:!0,children:n.jsxs(w,{direction:"row",alignItems:"center",children:[t&&n.jsx(Vu,{donut:t,onClick:T}),n.jsx(k,{variant:"body2",color:"grey.dark",className:o?"pl-3":V.EMPTY_STRING,children:a(se.to)})]})}),n.jsx(S,{item:!0,children:n.jsxs(w,{direction:"row",alignItems:"center",children:[e&&n.jsx(lt,{profile:e,onClick:T}),n.jsx(k,{variant:"body2",color:"grey",className:o?"pl-3":V.EMPTY_STRING,children:s?i(s):null})]})})]})},Qu=({onCheckClick:e,onRollbackClick:t,hideCheck:s,hideRollback:a,checkTooltip:r,rollbackTooltip:o})=>n.jsxs(he,{direction:"row",children:[!s&&n.jsx(We,{title:r,hidden:!r,children:n.jsx(fe,{onClick:()=>e(),children:n.jsx(Qs,{color:"primary"})})}),!a&&n.jsx(We,{title:o,hidden:!o,children:n.jsx(fe,{onClick:()=>t(),children:n.jsx(Ys,{color:"error"})})})]}),Ku=(e,t,s,a)=>{var o,i;const r=aa(`${(o=e.original.donut)==null?void 0:o.name} ${(i=e.original.profile)==null?void 0:i.name} ${e.original.created_at}`,s);return a({itemRank:r}),r.passed},Ju=e=>{const{onRollback:t=T,onCheck:s=T,hideActions:a=!1,checkRollbackEnabled:r,checkCheckEnabled:o,checkTooltip:i,rollbackTooltip:c}=e,{translate:l}=y(),d=Dn();return{tableConfig:u.useMemo(()=>[d.accessor("donut.name",{cell:h=>n.jsx(Yu,{donut:h.row.original.donut,profile:h.row.original.profile,datetime:h.row.original.created_at}),header:l(de.requests,{capitalize:!0}),footer:h=>h.column.id,enableSorting:!0,filterFn:Ku}),d.accessor("actions",{cell:h=>{const p=r&&!r(h.row.original),f=o&&!o(h.row.original);return n.jsx(Qu,{checkTooltip:i,rollbackTooltip:c,hideCheck:!s||a||f,hideRollback:!t||a||p,onCheckClick:()=>s(h.row.original.id),onRollbackClick:()=>t(h.row.original.id)})},header:"",enableSorting:!1,enableColumnFilter:!1})],[])}},It=({active:e,archive:t,incoming:s,my:a,onRollback:r=T,onCheck:o=T,hideActions:i=!1,checkRollbackEnabled:c,checkCheckEnabled:l,hideBreadCrumbs:d,rollbackTooltip:m,checkTooltip:h})=>{const{objects:p,isLoading:f,refetch:x}=Gu({active:e,archive:t,incoming:s,my:a}),g=W=>{r(W,{onSuccess:x})},b=W=>{o(W,{onSuccess:x})},{tableConfig:j}=Ju({onCheck:b,onRollback:g,hideActions:i,checkRollbackEnabled:c,checkCheckEnabled:l,rollbackTooltip:m,checkTooltip:h});K(ne.Requests,f);const C=t?E.closed_requests:e?G.activated:qe.incoming,R=t?n.jsx(Ks,{}):e?n.jsx(Js,{}):n.jsx(zt,{}),N=[{key:de.requests,link:_.Requests,label:de.requests,icon:n.jsx(zt,{})},{key:C,label:C,icon:R}];return n.jsxs(w,{direction:"column",sx:{height:"100%",overflow:"hidden"},children:[!d&&n.jsx(Ue,{items:N}),n.jsx(Pe,{className:"flex-grow scroll",children:n.jsx(hn,{columns:j,data:p,isVirtual:!0,estimateSize:100})})]})},pn=()=>{const{authTenant:e,invalidateSelfBalance:t,profile:s}=Ie(),[a]=ec(),[r]=tc(),[o]=nc(),[i]=ac(),[c]=sc(),{showNotification:l}=ke();return{createRequest:async(x,g)=>{const{donut:b}=x;e&&a({body:{donut_id:b==null?void 0:b.id,tenant:e}}).unwrap().then(j=>{var C;(C=g==null?void 0:g.onSuccess)==null||C.call(g,j),t(),l(de.request_added)})},activateRequest:(x,g)=>{r({body:{id:x,tenant:e}}).unwrap().then(b=>{var j;(j=g==null?void 0:g.onSuccess)==null||j.call(g,b),l(de.request_been_set_active)})},refundRequest:(x,g)=>{o({body:{id:x,tenant:e}}).unwrap().then(b=>{var j,C;(j=g==null?void 0:g.onSuccess)==null||j.call(g,b),(C=b==null?void 0:b.data)!=null&&C.some(R=>{var N;return((N=R==null?void 0:R.attributes)==null?void 0:N.profile.id)===(s==null?void 0:s.id)})&&t(),l(de.request_has_been_refunded)})},closeRequest:(x,g)=>{i({body:{id:x,tenant:e}}).unwrap().then(b=>{var j;(j=g==null?void 0:g.onSuccess)==null||j.call(g,b),l(de.request_been_set_closed)})},rollbackRequest:(x,g)=>{c({body:{id:x,tenant:e}}).unwrap().then(b=>{var j;(j=g==null?void 0:g.onSuccess)==null||j.call(g,b),l(de.request_been_set_incoming)})}}},Zu=()=>{const{rollbackRequest:e,closeRequest:t}=pn();return n.jsx(It,{onRollback:e,onCheck:t,active:!0})},Xu=()=>n.jsx(Zu,{}),Zn=e=>n.jsx(Io,{...e}),em=(e,t)=>({id:`bnt-tab${t?`-${t}`:V.EMPTY_STRING}-${e}`,"aria-controls":`bnt-tab-panel${t?`-${t}`:V.EMPTY_STRING}-${e}`}),mt=({prefix:e,tabValue:t,...s})=>n.jsx(No,{...s,...em(t,e)}),ht=e=>{const{children:t,value:s,index:a,boxClassName:r,...o}=e;return n.jsx("div",{role:"tabpanel",hidden:s!==a,id:`bnt-tabpanel-${a}`,"aria-labelledby":`bnt-tab-${a}`,...o,children:s===a&&n.jsx(P,{component:"div",className:r,children:t})})},tm=()=>{const{refundRequest:e}=pn(),{t}=y();return n.jsx(It,{active:!0,incoming:!0,my:!0,onRollback:e,checkRollbackEnabled:s=>s.status===0,checkCheckEnabled:()=>!1,hideBreadCrumbs:!0,rollbackTooltip:t(E.cancel,{capitalize:!0})})},nm=()=>n.jsx(It,{archive:!0,my:!0,hideActions:!0,hideBreadCrumbs:!0}),sm=()=>{const{translate:e}=y(),[t,s]=u.useState(0),a=(r,o)=>{s(o)};return n.jsxs(w,{direction:"column",className:"height-100",children:[n.jsxs(Zn,{value:t,onChange:a,indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"requests tabs",children:[n.jsx(mt,{label:e(G.active_request),tabValue:0}),n.jsx(mt,{label:e(E.closed_requests),tabValue:1})]}),n.jsxs(Pe,{className:"flex-grow scroll",children:[n.jsx(ht,{value:t,index:0,children:n.jsx(tm,{})}),n.jsx(ht,{value:t,index:1,children:n.jsx(nm,{})})]})]})},am=()=>n.jsx(sm,{}),rm=()=>n.jsx(It,{archive:!0,hideActions:!0}),om=()=>n.jsx(rm,{}),im=()=>{const{refundRequest:e,activateRequest:t}=pn();return n.jsx(It,{onRollback:e,onCheck:t,incoming:!0})},cm=()=>n.jsx(im,{}),lm=L(Me,{shouldForwardProp:()=>!0})(({theme:e})=>({display:"block",color:e.palette.grey.A700,fontSize:"14px",fontWeight:"bold"})),dm=L(Me,{shouldForwardProp:()=>!0})(()=>({fontSize:"18px",fontWeight:"bold"})),um=({donut:e})=>{const{createRequest:t}=pn(),{t:s}=y(),{BonutsCurrency:a}=At(),r=()=>{t({donut:e})};return n.jsxs(ce,{raised:!0,children:[n.jsx(dm,{className:"ml-5 mt-2",children:n.jsxs(w,{direction:"row",children:[e.price," ",n.jsx(a,{})]})}),e.on_stock?n.jsxs(lm,{className:"ml-5",children:[s(kt.on_stock),": ",e.on_stock]}):null,e.on_stock===0&&e.supply_days?n.jsxs(k,{children:[s(oe.Delivery_days),": ",e.supply_days," "]}):null,(e==null?void 0:e.has_remains)&&n.jsx("div",{className:"m-5",children:n.jsx(xa,{onClick:r,className:"width-100",children:s(oe.Buy)})})]})},mm=()=>{var d,m;const{id:e}=nt(),t=pe(),s=re(t.breakpoints.down("sm")),{donut:a,isLoading:r}=cr(e),{translate:o}=y(),{ImageModal:i}=je();K(ne.DonutPreview,r);const c=()=>{var h;i.show({url:((h=a==null?void 0:a.logo)==null?void 0:h.url)||Ut,title:a==null?void 0:a.name})},l=[{key:_[v.Donuts],link:_[v.Donuts],label:oe.DONUTS,icon:n.jsx(Do,{})},{key:e||"donut",label:(a==null?void 0:a.name)||"",icon:n.jsx(Us,{})}];return n.jsxs(n.Fragment,{children:[n.jsx(Ue,{items:l,className:"mb-3"}),n.jsx(ce,{children:n.jsx(ze,{className:"m-3 p-3",children:n.jsxs(S,{container:!0,justifyContent:"space-between",children:[n.jsx(S,{item:!0,xs:12,sm:8,md:4,lg:3,xl:2,className:Q("",{"text-align-center":s}),children:n.jsx(dn,{defaultImage:(d=a==null?void 0:a.logo)!=null&&d.url?void 0:Ut,image:(m=a==null?void 0:a.logo)==null?void 0:m.url,className:"ml-3",onClick:c})}),n.jsxs(S,{item:!0,xs:12,sm:12,md:5,lg:7,order:{xs:3,md:2},children:[n.jsx(k,{sx:{overflowWrap:"break-word"},variant:"h5",display:"block",children:a==null?void 0:a.name}),n.jsx(k,{className:"mb-2 mt-2",variant:"subtitle2",children:o(oe.Description)}),n.jsx(k,{paragraph:!0,isPreformatted:!0,children:a==null?void 0:a.description})]}),n.jsx(S,{item:!0,xs:12,sm:4,md:3,lg:2,order:{xs:2,md:3},children:a&&n.jsx(um,{donut:a})})]})})})]})},hm=()=>n.jsx(mm,{}),pm=()=>{const{translate:e}=y(),t=Dn(),{showEmployeeModal:s}=Ze();return{tableConfig:u.useMemo(()=>[t.accessor("to_profile.name",{cell:r=>r?n.jsx(Ba,{className:"pl-2",operation:r==null?void 0:r.row.original,showDateTime:!0,onFromProfileClick:o=>{o.from_profile&&s(o.from_profile.id)},onToProfileClick:o=>{o.to_profile&&s(o.to_profile.id)}}):n.jsx("div",{}),header:e(Bn.history,{capitalize:!0}),footer:r=>r.column.id,enableSorting:!1,enableColumnFilter:!1})],[])}};function gm(e,t,s,a){const r=Ae(),o=ie(ee=>ee.api.queries),{page:i,...c}=t,[l,d]=u.useState(c),[m,h]=u.useState([]),[p,f]=u.useState([]),[x,g]=u.useState(),[b,j]=u.useState(0),[C,R]=u.useState(!1),[N,W]=u.useState(!1),{data:J,isLoading:X,isSuccess:U}=e.useQuery({...t,page:1},{pollingInterval:0,refetchOnMountOrArgChange:!0,skip:a});u.useEffect(()=>{var ee,I;if(J){const B=J,Y=(ee=B==null?void 0:B.paginator)!=null&&ee.perPage?B.paginator.perPage:1,Le=((I=B==null?void 0:B.paginator)==null?void 0:I.total)||0;W(b<Le/Y)}},[b,J]),u.useEffect(()=>{j(t.page||0)},[]),u.useEffect(()=>()=>{p.forEach(ee=>ee.unsubscribe())},[p]);const H=u.useCallback(()=>{j(b+1)},[j,b]);u.useEffect(()=>{if(b>1){const ee=r(e.initiate({...t,page:b}));f([...p,ee])}},[b]),u.useEffect(()=>{if(b>1){const ee=an.getState(),I={};for(let B=2;B<=b;B++){const{data:Y}=e.select({...t,page:B})(ee);if(!Y)break;if(J){const Le=Y;Mo(m[B],Le)||(I[B]=Le)}}Object.keys(I).length&&h({...m,...I})}},[o,p,t]),u.useEffect(()=>{U&&(!Object.keys(p).length||!be.isEqual(c,l)?(d(c),j(1),h({1:J})):h({...m,1:J}))},[J,U]),u.useEffect(()=>{x||R(!1)},[x]);const z=u.useCallback(()=>{x&&(j(1),h([x]),g(void 0))},[m,x]),le=u.useMemo(()=>m,[m]);return{endpoint:e,pages:m,paginatedPages:le,isLoading:X&&b===1,isFetching:X,fetchNext:H,currentPage:b,hasNew:C,applyUpdates:z,hasNext:N}}const mr=e=>{const{endpoint:t,args:s,pollingInterval:a=1e3,translator:r=j=>j,skip:o}=e,[i,c]=u.useState([]),l=ie(ye),{hasNext:d,pages:m,isLoading:h,fetchNext:p,hasNew:f,applyUpdates:x,isFetching:g}=gm(t,{...s,tenant:l},a,o);u.useEffect(()=>{m||c(()=>[]);const j=Object.values(m).reduce((C,R)=>(C.push(r(R)),C),[]);be.isEqual(i,j)||c(j)},[m]);const b=u.useMemo(()=>i.reduce((j,C)=>[...j,...C],[]),[i]);return{hasNext:d,pages:i,isLoading:h,fetchNext:p,hasNew:f,applyUpdates:x,flatData:b,isFetching:g}},xm=e=>{const{id:t}=e;return mr({endpoint:Vt.endpoints.getAccountOperations,args:{accountId:t.toString(),page:1},skip:!t,pollingInterval:1e4,translator:Et.toOperations})},fm=({accountId:e})=>{const{tableConfig:t}=pm(),{hasNext:s,flatData:a,isLoading:r,fetchNext:o,isFetching:i}=xm({id:e});return K(ne.Events,r),n.jsx(hn,{columns:t,data:a,isVirtual:!0,estimateSize:100,fetchNext:o,isFetching:i,hasNext:s})},bm=()=>{const{id:e}=nt(),t=Number(e);return n.jsx(w,{direction:"column",sx:{height:"100%",overflow:"hidden"},children:n.jsx(Pe,{className:"flex-grow scroll",children:n.jsx(fm,{accountId:t})})})},ym=({showMine:e=!1,searchText:t=void 0})=>mr({endpoint:ot.endpoints.getEvents,args:{showMine:e?"true":"false",searchText:t,page:1},pollingInterval:1e4,translator:Et.toPosts}),jm=()=>{var g;const{translate:e}=y(),t=re("(min-width:1980px)"),s=pe(),a=re(s.breakpoints.down("md")),[r,o]=u.useState(),[i,c]=u.useState(!1),{hasNext:l,pages:d,isLoading:m,fetchNext:h,hasNew:p,applyUpdates:f}=ym({showMine:i,searchText:r});K(ne.Events,m);const x=!((g=d[0])!=null&&g.length);return n.jsxs(w,{direction:"column",className:Q("height-100"),children:[n.jsx(w,{direction:"row",gap:2,justifyContent:"space-bwteen",alignItems:"center",children:d.length>0?n.jsxs(n.Fragment,{children:[n.jsx(rn,{setSearch:o,debounceDelay:500,className:"flex-grow"}),n.jsx(qs,{control:n.jsx(Bs,{}),label:e(O.show_only_mine),onChange:(b,j)=>{c(j)}})]}):null}),n.jsxs(P,{className:Q("flex-grow pb-2 mt-2",{"pr-3":!a,scroll:!x}),sx:{overflowY:a&&x?"hidden":void 0},children:[p&&n.jsx(te,{onClick:f,children:oe.REFRESH}),n.jsx(S,{container:!0,rowSpacing:{xs:2},columnSpacing:{xs:1,sm:2,md:3},children:d.length>0&&Object.values(d).map(b=>b&&b.map(j=>n.jsx(S,{item:!0,xs:12,sm:12,md:6,lg:t?4:6,children:n.jsx(qa,{post:j})},j.id)))}),x?n.jsxs(w,{alignItems:"center",justifyContent:"center",sx:{height:a?"300px":"40%",overflowY:a?"hidden":void 0},children:[n.jsx(Ro,{sx:{height:"100px",width:"100px"}}),n.jsx(k,{children:e(q.empty_events_placeholder,{capitalize:!0})})]}):null,l&&d.length>0&&n.jsx(w,{alignItems:"center",justifyContent:"center",className:"pt-2 overflow-hidden",children:n.jsx(Lo,{as:"div",onChange:b=>{b&&!m&&h()},children:n.jsx(en,{color:"primary"})})})]})]})},vm=L(ce,{shouldForwardProp:()=>!0})(({theme:e})=>({background:`linear-gradient(60deg, ${e.palette.secondary.light},${e.palette.secondary.veryLight})`})),hr=({title:e,value:t,lastOperation:s,name:a,balance:r,onClick:o})=>{const{t:i}=y();return n.jsxs(w,{children:[n.jsxs(w,{direction:"row",gap:1,children:[n.jsxs(k,{display:"block",color:"grey.700",children:[e,":"]}),n.jsxs(w,{direction:"row",children:[n.jsx(k,{display:"block",color:"grey.main",className:"mr-1",children:r}),t]})]}),n.jsx(te,{sx:{width:"fit-content"},onClick:o,children:n.jsx(k,{variant:"caption",color:"grey.700",textTransform:"none",children:n.jsx(w,{direction:"row",children:s?`${s==null?void 0:s.direction}${s==null?void 0:s.amount} ${a?i(a,{count:s.amount}):V.EMPTY_STRING} ${tt(s==null?void 0:s.date_utc,!1,!0)}`:"..."})})})]})},wm=({profile:e})=>{var c;const{t}=y(),s=(c=e==null?void 0:e.distrib_account)==null?void 0:c.id,{account:a,isLoading:r}=Tt(s),{toEmployeeList:o,toDistribBalanceHistory:i}=Ze(e);return n.jsxs(w,{gap:1,children:[n.jsx(hr,{title:t(qe.i_can_share,{capitalize:!0}),balance:a==null?void 0:a.balance,value:r?"...":n.jsxs(n.Fragment,{children:[t("donut",{count:a==null?void 0:a.balance}),"(",n.jsx(tn,{color:"primary"}),")"]}),name:"donut",lastOperation:a==null?void 0:a.last_operation,onClick:i}),n.jsx(P,{children:n.jsx(Ke,{variant:"contained",onClick:o,children:t(O.share,{capitalize:!0})})})]})},pr=e=>{const t=Ae(),{CreateDonut:s}=je(),{t:a}=y();return{showDonut:l=>{(l||e)&&t(me(`/d/${l||(e==null?void 0:e.id)}`))},editDonut:l=>{(l||e)&&t(me(`/donut_edit/${l||(e==null?void 0:e.id)}`))},showCreateDonutModal:()=>{s.show({title:a(Z.new_donut,{capitalize:!0})})},toStore:()=>{t(me(_[v.Donuts]))}}},Sm=({profile:e})=>{var l;const{t}=y(),{BonutsCurrency:s}=At(),a=(l=e==null?void 0:e.self_account)==null?void 0:l.id,{account:r,isLoading:o}=Tt(a),{toStore:i}=pr(),{toSelfBalanceHistory:c}=Ze(e);return n.jsxs(w,{gap:1,children:[n.jsx(hr,{title:t(qe.i_can_spend,{capitalize:!0}),balance:r==null?void 0:r.balance,value:o?"...":n.jsxs(n.Fragment,{children:[t("point",{count:r==null?void 0:r.balance}),"(",n.jsx(s,{}),")"]}),name:"point",lastOperation:r==null?void 0:r.last_operation,onClick:c}),n.jsx(P,{children:n.jsx(Ke,{variant:"contained",onClick:i,children:t(se.to_store,{capitalize:!0})})})]})},ws=({accountType:e})=>{const{profile:t}=Ie();return t?n.jsx(vm,{className:"p-2 width-100",sx:{maxWidth:700},children:e==="distrib"?n.jsx(wm,{profile:t}):n.jsx(Sm,{profile:t})}):null},Cm=()=>{const e=pe(),t=re(e.breakpoints.down("md"));return n.jsxs(S,{container:!0,flexDirection:t?"column-reverse":"row",gap:t?2:0,className:Q({"height-100":!t}),children:[n.jsx(S,{item:!0,xs:12,sm:12,md:8,lg:9,className:"height-100",children:n.jsx(jm,{})}),n.jsx(S,{item:!0,xs:12,sm:12,md:4,lg:3,children:n.jsx(w,{direction:"row",justifyContent:"flex-end",className:Q("width-100",{"pl-2":!t}),children:n.jsxs(w,{gap:2,className:"width-100",children:[n.jsx(ws,{accountType:"self"}),n.jsx(ws,{accountType:"distrib"})]})})})]})},St={sorterByName:(e,t)=>(e==null?void 0:e.name.toLowerCase())>(t==null?void 0:t.name.toLowerCase())?1:(e==null?void 0:e.name.toLowerCase())<(t==null?void 0:t.name.toLowerCase())?-1:0,sorterByPriceAsc:(e,t)=>((e==null?void 0:e.price)||0)-((t==null?void 0:t.price)||0),sorterByPriceDesc:(e,t)=>((t==null?void 0:t.price)||0)-((e==null?void 0:e.price)||0),sorterByDate:(e,t)=>new Date((t==null?void 0:t.created_at)||0).getTime()-new Date((e==null?void 0:e.created_at)||0).getTime()},_m=e=>Re({endpoint:Fn.endpoints.getDonuts,args:{all:e?"true":"false",page:1},translator:Oa}),Ne={donutCard:"donut-card",cardHover:"card-hover",cardHeaderHover:"card-header-hover",cardBody:"card-body",remains:"remains",logo:"logo",captions:"captions"},Xn=e=>n.jsx(Bo,{...e}),Tm=({donut:e,className:t,onDonutClick:s})=>{var d;const{translate:a}=y(),{BonutsCurrency:r}=At(),{on_stock:o=0,logo:i,price:c,name:l}=e;return n.jsx(ce,{raised:!0,className:Q(Ne.donutCard,t),children:n.jsx(Xn,{onClick:s,className:Ne.cardHover,children:n.jsxs(ze,{className:`${Ne.cardBody} m-10`,children:[n.jsxs(w,{direction:"column",justifyContent:"space-between",alignItems:"center",spacing:3,children:[n.jsx("div",{className:Ne.cardHeaderHover,children:n.jsx("img",{src:((d=i==null?void 0:i.thumb)==null?void 0:d.url)||Ut,alt:"...",className:Ne.logo})}),n.jsxs("div",{className:Ne.captions,children:[n.jsx(k,{variant:"body1",children:n.jsxs(w,{direction:"row",children:[a("Price"),": ",c,n.jsx(r,{})]})}),n.jsx(k,{children:l})]})]}),o>0&&n.jsxs("div",{className:Ne.remains,children:[a(kt.on_stock),": ",o]})]})})})},km=L(Tm,{})(({theme:e})=>({backgroundColor:e.palette.secondary.veryLight,maxWidth:300,color:e.palette.neutral.dark,margin:"auto","& img":{boxShadow:"0px 0px 48px rgba(255, 255, 255, 0.8)",maxHeight:"100px"},"&:hover":{outline:"2px solid",outlineColor:e.palette.primary.light,"& img":{transform:"translate3d(0, -3px, 2px)",transition:"all 500ms cubic-bezier(0.34, 1.61, 0.7, 1)"}},[M(Ne.remains)]:{position:"absolute",top:"5px",right:"5px",color:e.palette.error.main,backgroundColor:e.palette.secondary.light,borderRadius:"3px",boxShadow:"0 1px 4px 0 rgba(0, 0, 0, 0.14)"},[M(Ne.cardBody)]:{display:"flex",justifyContent:"center",minHeight:200},[M(Ne.captions)]:{display:"flex",flexDirection:"column",gap:"12px",alignItems:"center",textAlign:"center"},[M(Ne.cardHeaderHover)]:{display:"flex",flexDirection:"column",height:"100%",alignItems:"center",justifyContent:"center"}})),Pm=({donut:e})=>{const{showDonut:t}=pr(e),s=()=>{t()};return n.jsx(km,{donut:e,onDonutClick:s})},Em=({setSorter:e,setSearch:t,setFilter:s})=>{const a=[{name:Xe.PRICE_ASC,sorter:St.sorterByPriceAsc},{name:Xe.PRICE_DESC,sorter:St.sorterByPriceDesc},{name:Xe.SORT_BY_ALPHABET,sorter:St.sorterByName},{name:Xe.NEWEST,sorter:St.sorterByDate}];return n.jsx(rn,{setSearch:t,setFilter:s,setSorter:e,buttons:a})},Am=()=>{const[e,t]=u.useState(""),[s,a]=u.useState([]),[r,o]=u.useState(()=>St.sorterByName),{objects:i=[],isLoading:c}=_m(),l=h=>{a(h)},d=h=>{o(()=>h)};K(ne.Donuts,c);const m=u.useMemo(()=>i.filter(h=>h.name&&h.name.toLowerCase().indexOf(e.toLowerCase())>=0).sort(r),[e,s,i,r]);return n.jsxs(n.Fragment,{children:[n.jsx(Em,{setSearch:t,setFilter:l,setSorter:d}),n.jsx(S,{container:!0,rowSpacing:{xs:2},columnSpacing:{xs:1,sm:2,md:3},children:m.map(h=>n.jsx(S,{item:!0,xs:12,sm:12,md:6,lg:3,children:n.jsx(Pm,{donut:h})},h.id))})]})},Im=()=>n.jsx(Am,{}),Nm=()=>n.jsx(Me,{children:"Home"}),Dm=()=>{const e=Ae();return{showRegister:()=>{e(me(_.Registration))}}},gr=()=>{const[e,{isLoading:t,error:s}]=ic(),[a]=hc(),{showNotification:r}=ke(),{translate:o}=y(),{navigateToLogin:i}=bt();return{isPostingRegister:t,registerError:s,register:async d=>{const m={body:{...d.body,email:d.body.email.trim(),first_name:d.body.first_name.trim(),last_name:d.body.last_name.trim()}},h=await e(m);Object.hasOwn(h,"error")||(r(o(E.confirmation_email_was_sent_to,{capitalize:!0})),i())},sendConfirmEmail:async d=>{const m=await a({body:{email:d}});Object.hasOwn(m,"error")||(r(o(E.confirmation_email_was_sent_to,{capitalize:!0})),i())}}},Nt=()=>n.jsx("call-us-selector",{"phonesystem-url":"https://1696.3cx.cloud",party:"alexandertarasov"}),Mm="_box_um1te_1",Rm={box:Mm},Lm=()=>{const{signIn:e,demoSignIn:t,isLogging:s,authError:a}=Ve(),{showRegister:r}=Dm(),{translate:o}=y(),{sendConfirmEmail:i}=gr(),{navigateToRestorePassword:c}=bt(),[l,d]=u.useState({email:"",password:""}),m=async f=>{d({...l,[f.currentTarget.name]:f.currentTarget.value})},h=f=>{f.preventDefault(),e({body:l})};K(ne.Default,s);const p=u.useMemo(()=>{var f;if(a&&Object.hasOwn(a,"data"))return(f=a==null?void 0:a.data)==null?void 0:f.errorCode},[a]);return n.jsxs(De,{component:"div",className:Rm.box,sx:{mt:8},children:[n.jsx(Nt,{}),n.jsx(mn,{style:{width:"110px",height:"50px"}}),n.jsxs(De,{component:"form",onSubmit:h,noValidate:!0,sx:{mt:1},children:[n.jsx(we,{margin:"normal",required:!0,fullWidth:!0,id:"email",label:o(q.email_address,{capitalize:!0}),name:"email",autoComplete:"email",onChange:m,autoFocus:!0}),n.jsx(we,{margin:"normal",required:!0,fullWidth:!0,name:"password",label:o($.password,{capitalize:!0}),type:"password",id:"password",autoComplete:"current-password",onChange:m}),n.jsx(te,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2},children:o(O.sign_in)}),n.jsxs(S,{container:!0,children:[n.jsx(S,{item:!0,xs:!0,children:n.jsxs(te,{sx:{textTransform:"none"},onClick:t,children:[n.jsx(qo,{}),o(ue.demo,{capitalize:!0})]})}),n.jsx(S,{item:!0,children:n.jsxs(he,{flexDirection:{xs:"column",sm:"row"},gap:1,alignItems:"flex-start",children:[n.jsxs(te,{sx:{textTransform:"none"},onClick:c,children:[n.jsx(Oo,{color:"primary"}),o(de.restore_password,{capitalize:!0})]}),n.jsxs(te,{sx:{textTransform:"none"},onClick:r,children:[n.jsx(zo,{color:"primary"}),o(O.sign_up,{capitalize:!0})]})]})})]}),p===5e3&&n.jsx(te,{fullWidth:!0,color:"secondary",sx:{textTransform:"none",mt:4},onClick:()=>{be.isEmpty(l.email)||i(l.email)},children:o(O.send_confirmation_email,{capitalize:!0})})]})]})},Bm=()=>{const{signOut:e}=Ve(),{t}=Xt(),s=()=>{e()};return n.jsx(P,{sx:{mt:8,display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center"},children:n.jsxs(te,{type:"submit",fullWidth:!0,variant:"contained",sx:{mt:3,mb:2,width:"250px",display:"flex",justifyContent:"space-evenly"},onClick:s,children:[t(oe.SIGN_OUT),n.jsx(Ye,{sx:{m:1,bgcolor:"secondary.main"},children:n.jsx(Zs,{})})]})})},at={userPic:"user-pic",cardActions:"card-actions",cardBody:"card-body",captions:"captions"},qm=({employee:e,onCardClick:t=T,className:s,onTransferClick:a=T})=>{const{user_avatar:r,name:o}=e,{translate:i}=y();return n.jsx(ce,{raised:!0,className:Q(s),children:n.jsx(Xn,{onClick:t,className:at.cardActions,children:n.jsx(ze,{className:`${at.cardBody} mt-4 ml-10 mr-10 mb-4`,children:n.jsxs(w,{direction:"column",justifyContent:"space-between",alignItems:"center",spacing:3,children:[n.jsx("div",{className:at.userPic,children:n.jsx("img",{src:(r==null?void 0:r.url)||$n,alt:"..."})}),n.jsx("div",{className:at.captions,children:n.jsxs(w,{direction:"row",alignItems:"center",children:[n.jsx(k,{variant:"body1",className:"pt-1",children:o}),n.jsx(Be,{color:"primary",onClick:c=>{c.preventDefault(),c.stopPropagation(),a()},tooltip:i(se.transfer_donuts,{capitalize:!0}),children:n.jsx(Ws,{})})]})})]})})})})},Om=L(qm,{})(({theme:e})=>({backgroundColor:e.palette.secondary.veryLight,maxWidth:300,color:e.palette.neutral.dark,margin:"auto","& img":{width:"auto",height:"auto",maxHeight:"160px",maxWidth:"100%",verticalAlign:"middle",margin:"auto",border:"0",[e.breakpoints.down("xs")]:{maxHeight:"90px"},boxShadow:"0px 0px 48px rgba(255, 255, 255, 0.8)"},"&:hover":{outline:"2px solid",outlineColor:e.palette.primary.light,"& img":{transform:"translate3d(0, -3px, 2px)",transition:"all 500ms cubic-bezier(0.34, 1.61, 0.7, 1)"}},[M(at.cardBody)]:{display:"flex",justifyContent:"center",minHeight:200},[M(at.captions)]:{display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"}})),zm=({employee:e})=>{const{showEmployee:t}=Ze(e),{showTransfer:s}=ir();return n.jsx(Om,{employee:e,onCardClick:()=>t(),onTransferClick:()=>s(e.id)})},Fm=()=>{const{objects:e=[],isLoading:t}=Ln(),{filteredList:s,setSorter:a,setSearch:r}=ya(e,{searchField:"name"}),o=ga();return K(ne.Employees,t),n.jsx(n.Fragment,{children:n.jsxs(S,{container:!0,rowSpacing:{xs:2},columnSpacing:{xs:1,sm:2,md:3},children:[n.jsx(S,{item:!0,xs:12,children:n.jsx(rn,{setSearch:r,setFilter:T,setSorter:a,buttons:o})}),s.map(i=>n.jsx(S,{item:!0,xs:12,sm:12,md:6,lg:3,children:n.jsx(zm,{employee:i})},i.id))]})})},Hm=()=>n.jsx(Fm,{}),$m=()=>{const{profile:e,isLoading:t}=Ie(),{t:s}=Xt(),{ConnectTelegramModal:a}=je();return n.jsx(P,{className:"d-flex flex-column pl-4 pt-4 pr-4",children:n.jsxs(w,{direction:"row",justifyContent:"space-between",alignItems:"center",sx:{maxWidth:350,borderBottom:"1px dotted",paddingBottom:"4px"},children:[n.jsx(k,{variant:"caption2",children:"Telegram"}),n.jsxs(w,{direction:"row",alignItems:"center",children:[n.jsx(k,{variant:"caption2",children:s(Z.not_connected)}),n.jsxs(te,{sx:{maxWidth:200},disabled:t,onClick:()=>{t||a.show({tg_code:e==null?void 0:e.tg_code})},children:[s(E.connect)," "]})]})]})})},Wm=()=>{const{search:e}=Xs();return et.useMemo(()=>new URLSearchParams(e),[e])},Gm=()=>{const e=Wm(),{translate:t}=y(),[s,a]=u.useState(e.get("tab")==="integrations"?1:0),r=(o,i)=>{a(i)};return n.jsxs(n.Fragment,{children:[n.jsxs(w,{direction:"column",className:"height-100",children:[n.jsxs(Zn,{value:s,onChange:r,indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"profile tabs",children:[n.jsx(mt,{label:t($.profile),tabValue:0}),n.jsx(mt,{label:t(qe.integrations),tabValue:1})]}),n.jsxs(Pe,{className:"flex-grow scroll",children:[n.jsx(ht,{value:s,index:0,children:n.jsx(lu,{})}),n.jsx(ht,{value:s,index:1,children:n.jsx($m,{})})]})]}),n.jsx(Nt,{})]})},Vm="_box_h9afl_1",xr={box:Vm},Um=()=>{const{translate:e}=y();return{formSchema:pt().shape({email:xe().required(e(q.email_address_must_be_valid,{capitalize:!0})).matches(Jn,e(q.email_address_must_be_valid,{capitalize:!0})).email(e(q.email_address_must_be_valid,{capitalize:!0}))})}},Ym=({onSubmit:e})=>{var c;const{formSchema:t}=Um(),{register:s,handleSubmit:a,formState:{errors:r}}=xt({shouldUseNativeValidation:!1,resolver:gt(t)}),{translate:o}=y(),i=async l=>{const{...d}=l;e(d.email)};return n.jsx(De,{component:"div",sx:{mt:8},children:n.jsxs(De,{component:"form",onSubmit:a(i),noValidate:!0,sx:{mt:1},children:[n.jsx(we,{margin:"normal",error:!!r.email,helperText:(c=r.email)==null?void 0:c.message,required:!0,fullWidth:!0,...s("email",{required:o(q.email_address)}),label:o(q.email_address,{capitalize:!0})}),n.jsx(te,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:3,mb:2},children:o(de.restore_password,{capitalize:!0})})]})})},Qm=()=>{const{translate:e}=y();return{formSchema:pt().shape({password:xe().required(e($.password_is_required,{capitalize:!0})),passwordRepeat:xe().required(e($.password_confirm_is_required,{capitalize:!0})).oneOf([ea("password")],e($.passwords_do_not_math,{capitalize:!0}))})}},Km=({onSubmit:e})=>{var c,l;const{formSchema:t}=Qm(),{register:s,handleSubmit:a,formState:{errors:r}}=xt({shouldUseNativeValidation:!1,resolver:gt(t)}),{translate:o}=y(),i=async d=>{const{...m}=d;e(m.password)};return n.jsx(De,{component:"div",sx:{mt:8},children:n.jsxs(De,{component:"form",onSubmit:a(i),noValidate:!0,sx:{mt:1},children:[n.jsx(we,{margin:"normal",error:!!r.password,helperText:(c=r.password)==null?void 0:c.message,required:!0,fullWidth:!0,...s("password",{required:$.password}),label:o($.password,{capitalize:!0}),type:"password"}),n.jsx(we,{margin:"normal",error:!!r.passwordRepeat,helperText:(l=r.passwordRepeat)==null?void 0:l.message,required:!0,fullWidth:!0,label:o($.password_repeat,{capitalize:!0}),...s("passwordRepeat",{required:$.password_repeat}),type:"password"}),n.jsx(te,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:3,mb:2},children:o(O.set_password,{capitalize:!0})})]})})},Jm="auth_token",Zm=e=>{const[t]=gc(),[s]=xc(),[a]=ia(),{data:r,isLoading:o,isError:i,isSuccess:c}=pc({recoverToken:e},{skip:!e}),{showNotification:l}=ke(),{navigateToRoot:d}=bt(),{setValue:m}=sn,{translate:h}=y();return{sendRecoverEmail:x=>{t({body:{email:x}}).then(g=>{"data"in g&&l(h(de.recover_email_has_been_sent,{capitalize:!0}))})},changePassword:x=>{e&&s({body:{password:x,recover_token:e}}).then(g=>{"data"in g&&(l(h(E.confirmed,{capitalize:!0})),m(Jm,g.data.auth_token),a().finally(()=>d()))})},isError:i,isLoading:o,user:r,isSuccess:c}},Ss=()=>{const{token:e}=nt(),{sendRecoverEmail:t,changePassword:s,isLoading:a,isError:r}=Zm(e),{navigateToLogin:o}=bt();return u.useEffect(()=>{r&&o()},[r]),K(ne.Default,a),n.jsxs(n.Fragment,{children:[n.jsx(P,{className:xr.box,sx:{mt:8},children:e?n.jsx(Km,{onSubmit:s}):n.jsx(Ym,{onSubmit:t})}),n.jsx(Nt,{})]})},Xm=()=>{const{translate:e}=y();return{formSchema:pt().shape({password:xe().required(e($.password_is_required,{capitalize:!0})),passwordRepeat:xe().required(e($.password_confirm_is_required,{capitalize:!0})).oneOf([ea("password")],e($.passwords_do_not_math,{capitalize:!0})),first_name:xe().required(e(dt.first_name)),last_name:xe().required(e(ut.last_name)),email:xe().required(e(q.email_address_must_be_valid,{capitalize:!0})).matches(Jn,e(q.email_address_must_be_valid,{capitalize:!0})).email(e(q.email_address_must_be_valid,{capitalize:!0}))})}},eh=()=>{var l,d,m,h,p;const{formSchema:e}=Xm(),{register:t,handleSubmit:s,formState:{errors:a}}=xt({shouldUseNativeValidation:!1,resolver:gt(e)}),{isPostingRegister:r,register:o}=gr(),{translate:i}=y(),c=async f=>{const{passwordRepeat:x,...g}=f;await o({body:g})};return K(ne.Default,r),n.jsxs(n.Fragment,{children:[n.jsxs(De,{component:"div",className:xr.box,sx:{mt:8},children:[n.jsx(mn,{style:{width:"110px",height:"50px"}}),n.jsx(k,{variant:"h5",className:"mt-8 mb-2",children:i(O.sign_up,{capitalize:!0})}),n.jsxs(De,{component:"form",onSubmit:s(c),noValidate:!0,sx:{mt:1},children:[n.jsx(we,{margin:"normal",fullWidth:!0,error:!!a.first_name,helperText:(l=a.first_name)==null?void 0:l.message,required:!0,...t("first_name",{required:i(dt.first_name),pattern:/^\S+@\S+$/i}),label:i(dt.first_name,{capitalize:!0}),autoFocus:!0}),n.jsx(we,{margin:"normal",error:!!a.last_name,helperText:(d=a.last_name)==null?void 0:d.message,fullWidth:!0,required:!0,...t("last_name",{required:i(ut.last_name)}),label:i(ut.last_name,{capitalize:!0})}),n.jsx(we,{margin:"normal",error:!!a.email,helperText:(m=a.email)==null?void 0:m.message,required:!0,fullWidth:!0,...t("email",{required:i(q.email_address)}),label:i(q.email_address,{capitalize:!0})}),n.jsx(we,{margin:"normal",error:!!a.password,helperText:(h=a.password)==null?void 0:h.message,required:!0,fullWidth:!0,...t("password",{required:$.password}),label:i($.password,{capitalize:!0}),type:"password"}),n.jsx(we,{margin:"normal",error:!!a.passwordRepeat,helperText:(p=a.passwordRepeat)==null?void 0:p.message,required:!0,fullWidth:!0,label:i($.password_repeat,{capitalize:!0}),...t("passwordRepeat",{required:$.password_repeat}),type:"password"}),n.jsx(te,{type:"submit",variant:"contained",fullWidth:!0,sx:{mt:3,mb:2},children:i(O.sign_up)})]})]}),n.jsx(Nt,{})]})},An={menuCard:"menu-card",cardHeader:"card-header",actionArea:"action-area",cardBody:"card-body",cardTitle:"card-title"},jt=An,th=({route:e,onCardClick:t,className:s})=>{const{t:a}=y();return n.jsx(ce,{raised:!0,color:"primaryLight",className:Q(jt.menuCard,s),children:n.jsx(Xn,{onClick:t,className:jt.actionArea,children:n.jsxs(ze,{className:jt.cardBody,children:[n.jsx("div",{className:jt.cardHeader,children:e.icon}),n.jsx(k,{className:jt.cardTitle,children:a(e.navbarName)})]})})})},nh=L(th,{})(({theme:e})=>({backgroundColor:e.palette.primary.light,maxWidth:250,height:150,verticalAlign:"middle",margin:"auto",textAlign:"center","& svg":{width:"50px",height:"50px"},"&:hover":{outline:"2px solid",outlineColor:e.palette.primary.main,"& svg":{transform:"translate3d(0, -20px, 10px)",transition:"all 400ms cubic-bezier(0.34, 1.61, 0.7, 1)"}},[M(An.cardBody)]:{minHeight:200},[M(An.cardHeader)]:{paddingTop:"20px",height:"80px",display:"flex",justifyContent:"center",alignItems:"center"}})),es=()=>{const e=Ae(),{routes:t}=u.useContext(Qe);return{navigate:u.useCallback(a=>{e(me(a))},[e]),routes:t}},sh=({route:e})=>{const{navigate:t}=es(),s=u.useCallback(()=>{t(e.path)},[e,t]);return n.jsx(nh,{route:e,onCardClick:s})},ah=({routes:e,className:t})=>n.jsx(S,{className:t,container:!0,rowSpacing:{xs:3,lg:3},columnSpacing:{xs:2,lg:3,xl:4},children:e.map(s=>n.jsx(S,{item:!0,xs:12,sm:6,md:4,lg:3,xl:2,children:n.jsx(sh,{route:s})},s.path))}),rh=L(ah,{})(()=>({justifyContent:"center",alignItems:"center"})),fr=({routes:e=[]})=>n.jsx(rh,{routes:e}),Jt=e=>e?e.index!==void 0?e.index:10:0,br=e=>e!=null&&e.children?Object.values(e.children).sort((s,a)=>Jt(s)-Jt(a)).filter(s=>s&&!(s!=null&&s.hideInMenu)&&(s==null?void 0:s.navbarName))||[]:[],oh=()=>{const{routes:e}=es(),t=br(e.Requests);return n.jsx(fr,{routes:t})},ih=()=>{const{routes:e}=es(),t=br(e.Settings);return n.jsx(fr,{routes:t})},yr=ae.enhanceEndpoints({addTagTypes:["Ties"],endpoints:{getTies:{providesTags:["Ties"]}}}),{useGetTiesQuery:cg}=yr,ch=(e,t)=>{const s=e?new Date(e):void 0,a=t?new Date(t):void 0;return Re({endpoint:yr.endpoints.getTies,translator:Et.toPies,args:{dateFrom:s&&ls(s)?cs(s):void 0,dateTo:a&&ls(a)?cs(a):void 0}})},lh={canvas:{background:"#fff"},node:{fill:"#7CA0AB",activeFill:"#c44e0d",opacity:1,selectedOpacity:1,inactiveOpacity:.2,label:{color:"#2A6475",stroke:"#fff",activeColor:"#c44e0d"},subLabel:{color:"#ddd",stroke:"transparent",activeColor:"#1DE9AC"}},lasso:{border:"1px solid #55aaff",background:"rgba(75, 160, 255, 0.1)"},ring:{fill:"#D8E6EA",activeFill:"#c44e0d"},edge:{fill:"#D8E6EA",activeFill:"#c44e0d",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475",activeColor:"#c44e0d",fontSize:6}},arrow:{fill:"#D8E6EA",activeFill:"#c44e0d"},cluster:{stroke:"#D8E6EA",opacity:1,selectedOpacity:1,inactiveOpacity:.1,label:{stroke:"#fff",color:"#2A6475"}}},dh=()=>{const{objects:e=[]}=Ln(),[,t]=u.useState(),{t:s}=y(),[a,r]=u.useState(null),[o,i]=u.useState(null),c=u.useRef(null),{objects:l}=ch(a==null?void 0:a.toString(),o==null?void 0:o.toString()),d=u.useMemo(()=>e.filter(g=>g.user_id).map(g=>{var b,j,C;return{id:((b=g.user_id)==null?void 0:b.toString())||"",label:g.name||"",icon:((C=(j=g.user_avatar)==null?void 0:j.thumb)==null?void 0:C.url)||"/assets/icons/default_profile.png"}}),[e]),m=u.useMemo(()=>l.filter(g=>g.from_id&&g.to_id).map(g=>{var b,j;return{id:`${g.from_id}->${g.to_id}`,source:((b=g.from_id)==null?void 0:b.toString())||"",target:((j=g.to_id)==null?void 0:j.toString())||""}}),[l]),{selections:h,actives:p,onNodeClick:f,onCanvasClick:x}=Li({ref:c,nodes:d,pathSelectionType:"all"});return u.useEffect(()=>()=>{var g;return(g=c.current)==null?void 0:g.getControls().dispose()},[]),n.jsxs("div",{className:"d-flex  flex-column height-100",children:[n.jsxs("div",{className:"p-2 pl-4 pt-4 w-100 d-flex justify-content-evenly",children:[n.jsx(ds,{onChange:g=>r(g),slotProps:{textField:{variant:"standard",placeholder:s($.period_start,{capitalize:!0})}}}),n.jsx(ds,{onChange:g=>i(g),slotProps:{textField:{variant:"standard",placeholder:s($.period_end,{capitalize:!0})}}})]}),n.jsx("div",{className:"flex-grow position-relative",children:d.length>0?n.jsx(Bi,{theme:lh,layoutType:"circular2d",ref:c,onNodePointerOver:g=>t(g),labelFontUrl:"https://fonts.cdnfonts.com/s/56328/l_10646.woff",animated:!0,draggable:!0,selections:h,actives:p,onCanvasClick:x,onNodeClick:f,nodes:d,edges:m,edgeInterpolation:"curved",renderNode:({node:g,...b})=>n.jsx(qi,{...b,node:g,image:g.icon||"/assets/icons/default_profile.png"})}):void 0})]})},uh=({className:e})=>n.jsx(k,{className:e,variant:"caption2",color:"secondary",sx:{transform:"rotate(-20deg) translate(0,-60%)",fontSize:"8px",border:"1px solid",padding:"0 4px",borderRadius:"30%"},children:"beta"});var ve=(e=>(e.network_connections="network connections",e.total_donuts_received="donuts received",e.total_donuts_sent="donuts sent",e.dashboard="dashboard",e.balance="balance",e.employee_name="employee name",e.fullsize="fullsize",e))(ve||{});const mh=(e,t)=>{const{translate:s}=y(),{showEmployeeModal:a}=Ze(),{BonutsCurrency:r}=ln({width:"10px",height:"10px"}),o=u.useMemo(()=>({columns:[{accessor:"name",cellType:Qt.CellString,enableSorting:!1,enableColumnFilter:!1,cell:c=>c?n.jsx(lt,{profile:c.row.original,onClick:()=>a(c==null?void 0:c.row.original.id),className:"pl-4"}):n.jsx("span",{}),header:{headerType:Kt.StringHeader,value:s(ve.employee_name,{capitalize:!0})}},{accessor:"score_total",cellType:Qt.CellString,enableSorting:!1,enableColumnFilter:!1,cell:c=>c?n.jsx(Me,{variant:"body2",children:(c==null?void 0:c.row.original.score_total)!==void 0&&n.jsxs(w,{direction:"row",alignItems:"center",children:[c==null?void 0:c.row.original.score_total,t?t===Je.coin?n.jsx(r,{}):n.jsx(tn,{color:"primary",sx:{width:"16px"}}):null]})}):n.jsx("span",{}),header:{headerType:Kt.StringHeader,value:e}}]}),[e,t]),{tableConfig:i}=ur(o);return{tableConfig:i}},ts=({totalFieldName:e,data:t,isLoading:s=[],className:a,onFullScreenExit:r=T,onFullScreenOpen:o=T,fullscreen:i,currency:c,onlyHeader:l})=>{const{tableConfig:d}=mh(e,c),{t:m}=y();return n.jsxs(ce,{className:Q(a,"height-100 d-flex flex-column width-100 p-2",{pointer:l}),onClick:h=>{o(),h.stopPropagation()},children:[n.jsxs(P,{className:"d-flex width-100 flex-row justify-content-between pl-2",children:[n.jsx(k,{className:"p-1",color:"secondary",children:e}),!l&&n.jsx(Be,{tooltip:m(i?E.close:ve.fullsize),className:"p-1",onClick:h=>{i?r():o(),l||h.stopPropagation()},children:i?n.jsx(it,{}):n.jsx(Fo,{})})]}),n.jsx(ze,{className:"flex-grow overflow-hidden pl-2 pr-2",onClick:h=>h.stopPropagation(),children:s?n.jsx(en,{color:"inherit"}):n.jsx(P,{className:"height-100 scroll",children:n.jsx(hn,{columns:d,data:l?[]:t||[],isVirtual:!0,estimateSize:40,noHeaders:!0})})})]})},hh=ae.enhanceEndpoints({addTagTypes:["Reports"],endpoints:{getReportsProfiles:{providesTags:["Reports"]}}}),ns=(e={},t)=>{const{reportType:s,searchText:a}=e;return Re({endpoint:hh.endpoints.getReportsProfiles,translator:ua,skip:t,args:{reportType:s,searchText:a}})},ph=e=>{const{onlyHeader:t}=e,{objects:s=[],isLoading:a}=ns({reportType:"show_balance"},t),{t:r}=y();return n.jsx(ts,{totalFieldName:r(Se.balance,{capitalize:!0}),data:s,isLoading:a,currency:Je.coin,...e})},gh=e=>{const{onlyHeader:t}=e,{objects:s=[],isLoading:a}=ns({reportType:"show_sent"},t),{t:r}=y();return n.jsx(ts,{totalFieldName:r(ve.total_donuts_sent,{capitalize:!0}),data:s,isLoading:a,currency:Je.donut,...e})},xh=e=>{const{onlyHeader:t}=e,{objects:s=[],isLoading:a}=ns({reportType:"show_score"},t),{t:r}=y();return n.jsx(ts,{totalFieldName:r(ve.total_donuts_received,{capitalize:!0}),data:s,isLoading:a,currency:Je.donut,...e})},fh=()=>{const e=re(i=>i.breakpoints.up("md")),[t,s]=u.useState();u.useEffect(()=>{e&&s(void 0)},[e]);const a=i=>t!==i?{md:5,lg:4,sm:12,xs:12}:{md:12,lg:12,sm:12,xs:12},r=i=>e?t!==i?t?{position:"static",zIndex:50,opacity:"0.2",transition:"opacity 0.5s ease-out"}:{position:"static",zIndex:50}:{position:"absolute",width:"90%",left:"50%",transform:"translate(-50%, 0)",top:"20px",zIndex:100,transition:"max-width 0.5s ease-out,opacity 0.5s ease-out"}:{},o=i=>e?t===i?{maxHeight:"100%"}:{maxHeight:"40%"}:t===i?{minHeight:"200px"}:{maxHeight:"100px"};return n.jsxs("div",{className:"position-relative height-100",children:[n.jsxs(S,{container:!0,className:Q("p-2",{"height-100":e}),alignItems:"stretch",gap:4,sx:{position:"relative"},onClick:()=>s(void 0),children:[n.jsx(S,{item:!0,...a("balance"),sx:{...o("balance"),...r("balance")},children:n.jsx(ph,{onFullScreenOpen:()=>s("balance"),onFullScreenExit:()=>s(void 0),fullscreen:t==="balance",onlyHeader:!e&&t!=="balance"})}),n.jsx(S,{item:!0,...a("sent"),sx:{...o("sent"),...r("sent")},children:n.jsx(gh,{onFullScreenOpen:()=>s("sent"),onFullScreenExit:()=>s(void 0),fullscreen:t==="sent",onlyHeader:!e&&t!=="sent"})}),n.jsx(S,{item:!0,...a("score"),sx:{...o("score"),...r("score")},children:n.jsx(xh,{onFullScreenOpen:()=>s("score"),onFullScreenExit:()=>s(void 0),fullscreen:t==="score",onlyHeader:!e&&t!=="score"})})]}),t&&e?n.jsx(P,{onClick:()=>s(void 0),sx:{position:"absolute",width:"100%",height:"100%",zIndex:80,top:0,left:0}}):null]})},bh=()=>{const[e,t]=u.useState(0),{translate:s}=y(),a=(r,o)=>{t(o)};return n.jsxs(w,{direction:"column",className:"height-100",children:[n.jsxs(Zn,{value:e,onChange:a,indicatorColor:"primary",textColor:"primary",variant:"fullWidth","aria-label":"donuts tabs",children:[n.jsx(mt,{label:s(ve.dashboard),tabValue:0}),n.jsx(mt,{label:n.jsx("span",{className:"d-flex justify-content-center align-items-center width-100",children:n.jsxs("div",{className:"d-flex flex-grow justify-content-center align-items-center",children:[s(ve.network_connections),n.jsx(uh,{className:"ml-2"})]})}),tabValue:0})]}),n.jsxs(Pe,{className:"flex-grow scroll",children:[n.jsx(ht,{value:e,index:0,className:"height-100",boxClassName:"height-100",children:n.jsx(fh,{})}),n.jsx(ht,{value:e,index:1,className:"height-100",boxClassName:"height-100",children:n.jsx(dh,{})})]})]})},yh={translations:{[ve.network_connections]:"связи",[ve.dashboard]:"доска",[ve.total_donuts_received]:"получено от других всего",[ve.total_donuts_sent]:"отправлено другим всего",[ve.balance]:"баланс",[ve.employee_name]:"имя",[ve.fullsize]:"полный размер"}},jh=()=>n.jsx(w,{direction:"column",className:"height-100",children:n.jsx(Pe,{className:"flex-grow scroll",children:n.jsx(bh,{})})}),vh=()=>Re({endpoint:Qn.endpoints.getTenantsAccessible,translator:Un}),Ee={tenantCard:"tenant-card",tenantLogo:"tenant-logo",tenantDefaultLogo:"tenant-default-logo",cardHeaderHover:"card-header-hover",cardBody:"card-body",captions:"captions",error:"error"},wh=L(cn,{shouldForwardProp:()=>!0})(({theme:e})=>({fontSize:16,background:e.palette.secondary.light,color:e.palette.getContrastText(e.palette.primary.light),padding:"6px 12px","&:hover":{background:e.palette.secondary.main,color:e.palette.getContrastText(e.palette.secondary.light)}})),Sh=L(cn,{shouldForwardProp:()=>!0})(({theme:e})=>({fontSize:16,background:e.palette.error.light,color:e.palette.getContrastText(e.palette.primary.light),padding:"6px 12px","&:hover":{background:e.palette.error.main,color:e.palette.getContrastText(e.palette.secondary.light)}})),Ch=({tenant:e,submitActionName:t,onSubmitActionClick:s=T,cancelActionName:a,onCancelActionClick:r=T,className:o,errorText:i})=>{const{logo:c,caption:l}=e;return n.jsxs(ce,{raised:!0,className:Q(Ee.tenantCard,o),children:[n.jsx(ze,{className:`${Ee.cardBody} mt-4 ml-4 mr-4 mb-4`,children:n.jsxs(w,{direction:"column",justifyContent:"space-between",alignItems:"center",spacing:3,children:[n.jsx("div",{className:Q(Ee.tenantDefaultLogo,{[Ee.tenantLogo]:c==null?void 0:c.url}),children:n.jsx("img",{src:(c==null?void 0:c.url)||Ut,alt:"..."})}),n.jsxs("div",{className:Ee.captions,children:[n.jsx(k,{align:"center",variant:"subtitle1",children:l}),n.jsx(k,{className:Ee.error,align:"center",variant:"caption",children:i})]})]})}),n.jsxs(w,{direction:"row",justifyContent:"center",alignItems:"center",spacing:3,className:"mb-6",children:[t&&n.jsx(wh,{variant:"contained",onClick:s,noTransform:!0,children:t}),a&&n.jsx(Sh,{variant:"contained",onClick:r,noTransform:!0,children:a})]})]})},_h=L(Ch,{})(({theme:e})=>({backgroundColor:e.palette.primary.light,maxWidth:300,color:e.palette.neutral.dark,margin:"auto",[M(Ee.tenantDefaultLogo)]:{"& img":{width:"auto",height:"auto",maxHeight:"100px",maxWidth:"100%",verticalAlign:"middle",margin:"auto",border:"0",[e.breakpoints.down("xs")]:{maxHeight:"60px"}}},[M(Ee.tenantLogo)]:{"& img":{boxShadow:"0px 0px 48px rgba(255, 255, 255, 0.8)"}},"&:hover":{outline:"1px solid",outlineColor:e.palette.secondary.light},[M(Ee.cardBody)]:{display:"flex",justifyContent:"center",minHeight:150},[M(Ee.captions)]:{display:"flex",flexDirection:"column",gap:"12px",alignItems:"center"},[M(Ee.error)]:{color:e.palette.error.main},[M(Ee.cardHeaderHover)]:{display:"flex",flexDirection:"column",height:"100%",alignItems:"center",justifyContent:"center"}})),ss=e=>n.jsx(_h,{...e}),Th=e=>{const[t]=rc(),{setTenant:s}=Ve();return{joinTenant:()=>{e&&t({tenantName:e.name}).then(()=>{s(e.name)})}}},kh=({tenant:e})=>{const{t}=y(),{joinTenant:s}=Th(e);return n.jsx(ss,{tenant:e,submitActionName:t(qn.join,{capitalize:!0}),onSubmitActionClick:s})},as=({children:e,title:t})=>n.jsxs("div",{className:"mb-8",children:[n.jsx(k,{variant:"subtitle1",className:"ml-1",children:t}),n.jsx(un,{}),n.jsx(S,{container:!0,rowSpacing:{xs:2},columnSpacing:{xs:1,sm:2,md:3},className:"mt-1",children:e})]}),Ph=()=>{const{objects:e,isLoading:t}=vh(),{t:s}=y();return K(ne.AccessibleTenants,t),e!=null&&e.length?n.jsx(as,{title:s(se.teams_you_can_join,{capitalize:!0}),children:e.map(a=>n.jsx(S,{item:!0,xs:12,sm:12,md:6,lg:3,children:n.jsx(kh,{tenant:a})},a.id))}):null},Eh=()=>Re({endpoint:Qn.endpoints.getTenants,translator:Un}),Ah=({tenant:e})=>{const{t}=y(),{auth:s,setTenant:a}=Ve();return n.jsx(ss,{tenant:e,submitActionName:s.tenant!==e.name&&!e.deactivated?t(on.go_to,{capitalize:!0}):void 0,errorText:e.deactivated?t(Se.blocked,{capitalize:!0}):void 0,onSubmitActionClick:()=>a(e.name)})},Ih=()=>{const{objects:e,isLoading:t}=Eh(),{t:s}=y();return K(ne.MyTenants,t),e!=null&&e.length?n.jsx(as,{title:s($e.my_teams,{capitalize:!0}),children:e.map(a=>n.jsx(S,{item:!0,xs:12,sm:12,md:6,lg:3,children:n.jsx(Ah,{tenant:a})},a.id))}):null},Nh=()=>Re({endpoint:lr.endpoints.getInvitationsMy,translator:$a}),Dh=({invitation:e})=>{const{t}=y(),{accept:s,decline:a}=dr(e);return n.jsx(ss,{tenant:e,submitActionName:t(G.accept,{capitalize:!0}),onSubmitActionClick:s,cancelActionName:t(ue.decline,{capitalize:!0}),onCancelActionClick:a})},Mh=()=>{const{objects:e,isLoading:t}=Nh(),{t:s}=y();return K(ne.MyInvitations,t),e!=null&&e.length?n.jsx(as,{title:s(qe.invitations,{capitalize:!0}),children:e.map(a=>n.jsx(S,{item:!0,xs:12,sm:12,md:6,lg:3,children:n.jsx(Dh,{invitation:a})},a.id))}):null},Rh=()=>n.jsxs(n.Fragment,{children:[n.jsx(Mh,{}),n.jsx(Ph,{}),n.jsx(Ih,{}),n.jsx(Nt,{})]}),Lh=et.lazy(()=>vt(()=>import("./store-manager-DSxfl9Lr.js"),__vite__mapDeps([0,1,2,3,4,5]))),Bh=()=>{var t,s,a,r,o,i,c,l,d,m,h,p;const e=[{key:"settings",link:(t=F.routes[v.Settings])==null?void 0:t.path,label:((s=F.routes[v.Settings])==null?void 0:s.navbarName)||"settings",icon:(a=F.routes[v.Settings])==null?void 0:a.icon},{key:((i=(o=(r=F.routes[v.Settings])==null?void 0:r.children)==null?void 0:o.Store)==null?void 0:i.path)||"store",label:((d=(l=(c=F.routes[v.Settings])==null?void 0:c.children)==null?void 0:l.Store)==null?void 0:d.navbarName)||V.EMPTY_STRING,icon:(p=(h=(m=F.routes[v.Settings])==null?void 0:m.children)==null?void 0:h.Store)==null?void 0:p.icon}];return n.jsxs(w,{direction:"column",sx:{height:"100%",overflow:"hidden"},children:[n.jsx(Ue,{items:e}),n.jsx(Pe,{className:"flex-grow scroll",children:n.jsx(u.Suspense,{fallback:n.jsx("div",{children:"Loading..."}),children:n.jsx(Lh,{})})})]})},{CirclesIcon:qh}=ln(),Ce=[Te.moderator,Te.admin,Te.admin],Oh={AccountOperations:{path:_[v.AccountOperations],anonymous:!1,authenticated:!0,hideInMenu:!1,component:n.jsx(bm,{})},ConfirmEmail:{path:_[v.ConfirmEmail],anonymous:!0,authenticated:!1,hideInMenu:!1,component:n.jsx(Cu,{})},Dashboard:{path:_[v.Dashboard],anonymous:!1,authenticated:!0,navbarName:"Dashboard",hideInMenu:!1,component:n.jsx(Cm,{}),redirect:_[v.Login],icon:n.jsx(Zo,{}),index:0},DonutPreview:{path:_[v.DonutPreview],anonymous:!1,authenticated:!0,hideInMenu:!0,component:n.jsx(hm,{})},DonutEdit:{path:_[v.DonutEdit],anonymous:!1,authenticated:!0,hideInMenu:!0,component:n.jsx(ju,{}),roles:Ce},Donuts:{path:_[v.Donuts],anonymous:!1,authenticated:!0,navbarName:"Store",hideInMenu:!1,component:n.jsx(Im,{}),icon:n.jsx(Jo,{}),index:2},Home:{path:_[v.Home],anonymous:!0,authenticated:!0,navbarName:"Home",hideInMenu:!0,component:n.jsx(Nm,{})},Login:{path:_[v.Login],anonymous:!0,authenticated:!1,hideInMenu:!0,component:n.jsx(Lm,{})},Logout:{path:_[v.Logout],anonymous:!1,authenticated:!0,navbarName:"Exit",hideInMenu:!1,component:n.jsx(Bm,{}),icon:n.jsx(Zs,{}),index:100,tenantNotRequired:!0},MyRequests:{path:_[v.MyRequests],anonymous:!1,authenticated:!0,navbarName:"My requests",hideInMenu:!1,icon:n.jsx(Ko,{}),component:n.jsx(am,{})},Employees:{path:_[v.Employees],anonymous:!1,authenticated:!0,navbarName:"Employees",hideInMenu:!1,component:n.jsx(Hm,{}),icon:n.jsx(Hs,{})},EmployeePreview:{path:_[v.EmployeePreview],anonymous:!1,authenticated:!0,hideInMenu:!0,component:n.jsx(gu,{})},Event:{path:_[v.Event],anonymous:!1,authenticated:!0,hideInMenu:!0,component:n.jsx(Nu,{})},Profile:{path:_[v.Profile],anonymous:!1,authenticated:!0,navbarName:"Profile",hideInMenu:!1,component:n.jsx(Gm,{}),redirect:_[v.Login],icon:n.jsx($s,{}),index:1},RequestRecover:{path:_[v.RequestRecover],anonymous:!0,authenticated:!1,hideInMenu:!0,component:n.jsx(Ss,{})},Recover:{path:_[v.Recover],anonymous:!0,authenticated:!1,hideInMenu:!0,component:n.jsx(Ss,{})},Invitations:{path:_[v.Invitations],anonymous:!1,authenticated:!0,navbarName:"Invitations",hideInMenu:!1,component:n.jsx(Iu,{}),icon:n.jsx(Qo,{}),roles:Ce},Registration:{path:_[v.Registration],anonymous:!0,authenticated:!1,hideInMenu:!0,component:n.jsx(eh,{})},Requests:{path:_[v.Requests],anonymous:!1,authenticated:!0,navbarName:"Requests",hideInMenu:!1,component:n.jsx(oh,{}),icon:n.jsx(zt,{}),roles:Ce,children:{IncomingRequests:{path:_[v.IncomingRequests],anonymous:!1,authenticated:!0,navbarName:"Incoming requests",hideInMenu:!1,component:n.jsx(cm,{}),icon:n.jsx(zt,{}),index:0,roles:Ce},ActiveRequests:{path:_[v.ActiveRequests],anonymous:!1,authenticated:!0,navbarName:"Active requests",hideInMenu:!1,component:n.jsx(Xu,{}),icon:n.jsx(Js,{}),index:1,roles:Ce},ClosedRequests:{path:"/closed_requests",anonymous:!1,authenticated:!0,navbarName:"Closed requests",hideInMenu:!1,component:n.jsx(om,{}),icon:n.jsx(Ks,{}),index:2,roles:Ce}}},Settings:{path:_[v.Settings],anonymous:!1,authenticated:!0,navbarName:"Settings",hideInMenu:!1,component:n.jsx(ih,{}),redirect:_[v.Login],icon:n.jsx(Vs,{}),roles:Ce,children:{Share:{path:_[v.Share],anonymous:!1,authenticated:!0,navbarName:"Transfer donuts or coins",hideInMenu:!1,component:n.jsx(ud,{}),redirect:_[v.Login],icon:n.jsx(Yo,{}),roles:Ce},Store:{path:_[v.Store],anonymous:!1,authenticated:!0,navbarName:"Store",hideInMenu:!1,component:n.jsx(Bh,{}),icon:n.jsx(Uo,{}),index:0,roles:Ce},Tenant:{path:_[v.Tenant],anonymous:!1,authenticated:!0,navbarName:"Team settings",hideInMenu:!1,component:n.jsx(jd,{}),icon:n.jsx(Vo,{}),index:0,roles:Ce},Plugins:{path:_[v.Plugins],anonymous:!1,authenticated:!0,navbarName:"Plugins",hideInMenu:!1,component:n.jsx(Md,{}),icon:n.jsx(Go,{}),index:0,roles:Ce},Schedulers:{path:_[v.Schedulers],anonymous:!1,authenticated:!0,navbarName:"Schedulers",hideInMenu:!1,component:n.jsx(eu,{}),icon:n.jsx(Wo,{}),index:0,roles:Ce},Circles:{path:_[v.Circles],anonymous:!1,authenticated:!0,navbarName:"Circles",hideInMenu:!1,component:n.jsx($u,{}),icon:n.jsx(qh,{}),index:0,roles:Ce}}},Statistics:{path:_[v.Statistics],anonymous:!1,authenticated:!0,navbarName:"Statistic",hideInMenu:!1,component:n.jsx(jh,{}),icon:n.jsx($o,{}),roles:[Te.moderator,Te.admin,Te.admin]},TenantList:{path:_[v.TenantList],anonymous:!1,authenticated:!0,navbarName:"My tenants",hideInMenu:!1,component:n.jsx(Rh,{}),icon:n.jsx(Ho,{}),tenantNotRequired:!0}},F={redirects:Ec,routes:Oh},zh=e=>Object.values(e.routes).filter(s=>s&&!s.hideInMenu&&s.navbarName).sort((s,a)=>Jt(s)-Jt(a)),Fh=e=>{const t=re("(prefers-color-scheme: light)",{noSsr:!0})?"light":"dark",s=localStorage.getItem("theme"),a=s&&s in e?s:t,[r,o]=u.useState(a),i=m=>{localStorage.setItem("theme",m),o(m)},c=()=>{i(r==="dark"?"light":"dark")},l=e[r];return[u.useMemo(()=>Xo({...l,cssVariables:!0}),[l]),{setTheme:i,toggleTheme:c}]},jr={typography:{caption2:{fontWeight:400,fontSize:"0.85rem",lineHeight:1.66,letterSpacing:"0.03333em"}},palette:{background:{default:Rt.A100,palette:"#FFF"},primary:{main:"#5a985f",light:"#97cf9e",veryLight:"#ebffed",dark:"#426644"},secondary:{main:"#d4741a",dark:"#c44e0d",light:"#e6ad57",veryLight:"#FFCF86"},error:{veryLight:bn.A100,light:bn.A200,main:bn.A700},neutral:{main:Rt.A400,dark:Rt[800],light:Rt.A100},info:{main:fn.A200,dark:fn.A400,light:fn.A100}}},Hh=jr,$h={dark:Hh,light:jr},Wh=u.createContext({setTheme:()=>{},toggleTheme:()=>{}}),Gh=({children:e})=>{const[t,s]=Fh($h);return n.jsx(ei,{injectFirst:!0,children:n.jsx(Wh.Provider,{value:s,children:n.jsx(ti,{theme:t,children:e})})})},Vh=()=>navigator.language,Uh=({children:e})=>{const[t,s]=u.useState(Cn),[a,r]=u.useState(void 0);return u.useEffect(()=>{(async()=>{const i=Vh();let c;switch(i){case"ru":c=await vt(()=>import("./vendor-DfgYjpZC.js").then(l=>l.df),__vite__mapDeps([1,2])),r(ri.components.MuiLocalizationProvider.defaultProps.localeText);break;case"es":c=await vt(()=>import("./vendor-DfgYjpZC.js").then(l=>l.de),__vite__mapDeps([1,2])),r(ai.components.MuiLocalizationProvider.defaultProps.localeText);break;case"de":c=await vt(()=>import("./vendor-DfgYjpZC.js").then(l=>l.dc),__vite__mapDeps([1,2])),r(si.components.MuiLocalizationProvider.defaultProps.localeText);break;case"en-GB":c=await vt(()=>import("./vendor-DfgYjpZC.js").then(l=>l.dd),__vite__mapDeps([1,2])),r(ni.components.MuiLocalizationProvider.defaultProps.localeText);break;default:c=Cn;break}s(c.default)})()},[]),n.jsx(Ka.Provider,{value:t,children:n.jsx(nr.Provider,{value:a,children:n.jsx(Ls.DateFnsProvider,{adapterLocale:t,children:e})})})},Yh={"International Date Line West":"Международная линия перемены дат Запад","Midway Island":"Мидуэй",Samoa:"Самоа","American Samoa":"Американское Самоа",Hawaii:"Гаваи",Alaska:"Аляска","Pacific Time (US & Canada)":"Тихоокеанское время (США и Канада)","Pacific Time":"Тихоокеанское время (США и Канада)",Tijuana:"Тихуана","Mountain Time (US & Canada)":"Горное время (США и Канада)","Mountain Time":"Горное время (США и Канада)",Arizona:"Аризона",Chihuahua:"Чихуахуа",Mazatlan:"Мазатлан","Central Time (US & Canada)":"Центральное время (США и Канада)","Central Time":"Центральное время (США и Канада)",Saskatchewan:"Саскачеван",Guadalajara:"Гвадалахара","Mexico City":"Мехико",Monterrey:"Монтеррей",Montevideo:"Монтевидео","Central America":"Центральная Америка","Eastern Time (US & Canada)":"Центральная Америка","Eastern Time":"Центральная Америка","Indiana (East)":"Индиана (восток)",Bogota:"Богота",Lima:"Лима",Quito:"Кито","Atlantic Time (Canada)":"Атлантическое время (Канада)",Caracas:"Каракас","La Paz":"Ла-Пас",Santiago:"Сантьяго",Newfoundland:"Ньюфаундленд",Brasilia:"Бразилиа","Buenos Aires":"Буэнос-Айрес",Georgetown:"Джорджтаун",Greenland:"Гренландия","Mid-Atlantic":"Средне-атлантическое",Azores:"Азорские острова","Cape Verde Is.":"Кабо-Верде.",Dublin:"Дублин",Edinburgh:"Эдинбург",Lisbon:"Лиссабон",London:"Лондон",Casablanca:"Касабланка",Monrovia:"Монровия",UTC:"UTC",Belgrade:"Белград",Bratislava:"Братислава",Budapest:"Будапешт",Ljubljana:"Любляна",Prague:"Прага",Sarajevo:"Сараево",Skopje:"Скопье",Warsaw:"Варшава",Zagreb:"Загреб",Brussels:"Брюссель",Copenhagen:"Копенгаген",Madrid:"Мадрид",Paris:"Париж",Amsterdam:"Амстердам",Berlin:"Берлин",Bern:"Берн",Rome:"Рим",Stockholm:"Стокгольм",Vienna:"Вена","West Central Africa":"Западной и Центральной Африки",Bucharest:"Бухарест",Cairo:"Каир",Helsinki:"Хельсинки",Kyiv:"Киев",Riga:"Рига",Sofia:"София",Tallinn:"Таллин",Vilnius:"Вильнюс",Athens:"Афины",Istanbul:"Стамбул",Minsk:"Минск",Jerusalem:"Иерусалим",Harare:"Хараре",Pretoria:"Претория",Moscow:"Москва","St. Petersburg":"Санкт-Петербург",Volgograd:"Волгоград",Kuwait:"Кувейт",Riyadh:"Рияд",Nairobi:"Найроби",Baghdad:"Багдад",Tehran:"Тегеран","Abu Dhabi":"Абу-Даби",Muscat:"Мускат",Baku:"Баку",Tbilisi:"Тбилиси",Yerevan:"Ереван",Kabul:"Кабул",Ekaterinburg:"Екатеринбург",Islamabad:"Исламабад",Karachi:"Карачи",Tashkent:"Ташкент",Chennai:"Ченнаи",Kolkata:"Калькутта",Mumbai:"Мумбаи","New Delhi":"Нью-Дели",Kathmandu:"Катманду",Astana:"Астана",Dhaka:"Дакка","Sri Jayawardenepura":"Шри-Яварденапура",Almaty:"Алматы",Novosibirsk:"Новосибирск",Rangoon:"Рангун",Bangkok:"Бангкок",Hanoi:"Ханой",Jakarta:"Джакарта",Krasnoyarsk:"Красноярск",Beijing:"Пекин",Chongqing:"Чунцин","Hong Kong":"Гонконг",Urumqi:"Урумчи","Kuala Lumpur":"Куала-Лумпур",Singapore:"Сингапур",Taipei:"Тайбэй",Perth:"Перт",Irkutsk:"Иркутск","Ulaan Bataar":"Улан-Батор",Seoul:"Сеул",Osaka:"Осака",Sapporo:"Саппоро",Tokyo:"Токио",Yakutsk:"Якутск",Darwin:"Дарвин",Adelaide:"Аделаида",Canberra:"Канберра",Melbourne:"Мельбурн",Sydney:"Сидней",Brisbane:"Брисбен",Hobart:"Хобарт",Vladivostok:"Владивосток",Guam:"Гуам","Port Moresby":"Порт-Морсби",Magadan:"Магадан","Solomon Is.":"Соломоновы острова.","New Caledonia":"Новая Каледония",Fiji:"Фиджи","Fiji Islands":"Острова Фиджи",Kamchatka:"Камчатка","Marshall Is.":"Маршалловы о-ва",Auckland:"Окленд",Wellington:"Веллингтон","Nuku'alofa":"Нукуалофа","Tokelau Is.":"Токелау",Yukon:"Юкон","Newfoundland and Labrador":"Ньюфа́ундленд и Лабрадо́р",Dawson:"Доусон"},Qh={monday:"понедельник",tuesday:"вторник",wednesday:"среда",thursday:"четверг",friday:"пятница",saturday:"суббота",sunday:"воскресенье"},Kh={translations:{CONST_GREETINGS:"Простой и быстрый способ поблагодарить ваших коллег за отличную работу.",Account:"Аккаунт","About myself":"Обо мне",Amount:"Количество",amount:"количество",Add:"Добавить",admin:"админ","admin deposit":"Депозит (админ)",[G.author]:"автор",[G.accept]:"принять",[G.add_new_scheduler]:"добавить новый планировщик",[G.add_comment]:"добавьте комментарий",Activate:"Активировать",[G.activate]:"активировать",[G.active_request]:"Активные запросы",[G.approximate_action_time]:"приблизительное время начала действия",Active:"Активен",active:"активен",activated:"в работе","access denied":"доступ закрыт","Active requests":"Запросы в работе","Active donuts":"Активные пончики","Already used regards":"Уже использованные награды","Activate regard code":"Активация кода награды","Already activated":"Уже активировано","Accepted requests":"Активированные запросы","All users":"Все пользователи","are you sure to delete?":"вы точно хотите удалить?","are you sure?":"вы уверены?","available employees":"доступные сотрудники","Back to store":"Назад в магазин",Balance:"Баланс",[Se.birthday]:"дата рождения","birthday donuts":"пончики на день рождения",[Se.birthday_points]:"монеты на день рождения",[Se.birthday_message]:"сообщение на день рождения",[Se.blocked]:"заблокировано",back:"назад",Buy:"Купить","Burn old points":"Списывать неиспользованные монеты","Burn old donuts":"Списывать неиспользованные пончики",[Se.burn_unused_donuts]:"списывать неиспользованные пончики",Cancel:"Отмена",cancel:"отмена",Caption:"Название",caption:"название",Change:"Изменить","Can not be empty":"Не может быть пустым","Change password":"Сменить пароль",Confirm:"Подтвердить почтовый адрес","Confirmation dialog":"Подтверждение",confirmation:"подтверждение",[E.coins]:"монеты",[E.comment]:"комментарий",[E.confirmation_email_was_sent_to]:"Письмо для подтверждения было отправлено на ваш электронный адрес","Confirmation email was sent to":"Подтвердите адрес электронной почты ","Confirm your email first":"Для продолжения подтвердите адрес электронной почты ","Connect to space":"Присоединиться к пространству",[E.confirm]:"подтвердить",[E.comment_is_required]:"введите комментарий",[E.confirmed]:"подтверждено",[E.choose_type]:"выберите тип",[E.choose_day]:"выберите день",[E.choose_time]:"выберите время",[E.choose_timezone]:"выберите часовой пояс",code:"код",Comment:"Комментарий",Contact:"Контакт","Comment saved":"Комментарий сохранен","Click to select files":"Нажмите, чтобы выбрать фото","Closed requests":"Завершенные запросы",Close:"Закрыть",close:"закрыть",closed:"закрытые","closed requests":"закрытые запросы",Circles:"Круги",created:"создан(а)",create:"создать",[E.choose_employees]:"выберите сотрудников","Date of birth":"Дата рождения",department:"подразделение","Day of month":"День месяца",[ue.demo]:"демо",[ue.day]:"день",DEMO:"Демо",Dashboard:"Лента",Delete:"Удалить",[ue.donuts]:"пончики",[ue.decline]:"отклонить",[ue.deactivate]:"деактивировать","delivery days":"через сколько дней будет",Departments:"Отделы",Department:"Отдел",Description:"Описание",description:"описание",Details:"Подробнее","department chief":"руководитель подразделения","Distrib account":"Могу отдать","disable account":"отключить аккаунт","Donut name":"Название плюшки","Donut added":"Пончик добавлен","Share donuts":"Перевести пончики",Discard:"Отменить изменения",Donut:"Пончик",Donuts:"Пончики","Donut description":"Описание пончика",donut_zero:"пончиков",donut_one:"пончик",donut_few:"пончика",donut_many:"пончиков",donut_other:"пончиков","Domain not found":"Не найден почтовый домен",Domain:"Домен",domain:"домен","Drag and drop an image here or click to select a file Drag and drop an image here or click to select a file":"Перетащите сюда файл или кликните, для выбора","Drag and drop an image here or click to select a file":"Перетащите сюда файл или кликните, для выбора",Edit:"Редактировать","Employment date":"Дата приема","Edit donut":"Редактировать пончик","Error while updating":"Ошибка во время обновления",[q.email_address_must_be_valid]:"Почтовый адрес должен быть в верном формате",Employees:"Сотрудники",employees:"сотрудники",[q.email_notification]:"оповещения по почте",[q.email_confirmation]:"подтверждение почты",[q.empty_events_placeholder]:"здесь будут отображаться все события",[q.edit]:"редактировать",[q.every_week]:"каждую неделю",[q.every_month]:"каждый месяц",Email:"Email",[q.email_address]:"почтовый адрес",error:"ошибка",Events:"События","Expiration date":"Дата окончания",Exit:"Выход","expiration date":"срок действия",[dt.first_name]:"имя",forbidden:"запрещено",for:"для",from:"от","Go to shop":"В магазин","Go to":"Перейти",[on.go_to]:"перейти",Goods:"Товары",History:"История",[Bn.history]:"история",Home:"Главная","How many points do you want to send":"Сколько монет вы хотите отправить","How many donuts do you want to send":"Сколько пончиков вы хотите отправить","Hide snow":"Убрать снег",Invitations:"Приглашения","Incoming requests":"Входящие запросы",incoming:"входящие","in date":"дата приема",[qe.invitations]:"приглашения",[qe.i_can_share]:"я могу поделиться",[qe.i_can_spend]:"я могу потратить","invitation added":"Приглашение отправлено",Join:"Присоединиться",[qn.join]:"присоединиться",[ut.last_name]:"фамилия","Log in":"Войти","Log Out":"Выйти",Max:"Макс",Min:"Мин",[$e.max_amount_is]:"максимальное значение - ",[$e.min_amount_is]:"минимальное значение - ","Max donuts":"Макисмальное количество пончиков",message:"сообщение","My Requests":"Мои запросы","My requests":"Мои запросы","My spaces":"Мои команды","My teams":"Мои команды","My tenants":"Мои команды",[$e.my_teams]:"мои команды",More:"Ещё",more:"ещё",[Z.name_is_required]:"необходимо задать имя","new password":"новый пароль","New points for all users":"Новые монеты для всех пользователей",Name:"Имя","name has been taken":"Имя уже занято",name:"название","New item":"Новый элемент","new donut":"Новый пончик","new circle":"новый круг",newest:"самые новые",Next:"Вперед",next:"далее","Not active donuts":"Неактивные пончики","No options":"Нет вариантов","not active":"не активен",[Z.no_name]:"без имени",[Z.not_found]:"не найдено",[Z.new_invitation]:"новое приглашение",[Z.new_scheduler]:"новый планировщик",[Z.new_invitation_was_created]:"Новое приглашение было создано",[Z.new_invitation_email_was_sent]:"Письмо с приглашением было отправлено","on stock":"в наличии","Only you can see it":"Только вы это видите",[$.password]:"пароль",[$.password_changed]:"пароль изменен",[$.password_repeat]:"пароль еще раз",[$.password_is_required]:"пароль необходим",[$.passwords_do_not_math]:"пароль не совпадает",[$.password_confirm_is_required]:"подтверждение пароля необходимо",[$.period_start]:"начало периода",[$.period_end]:"конец периода",Page:"Страница",People:"Сотрудники","Please confirm your email":"Пожалуйста, подтвердите почтовый адрес",points:"монеты",point_zero:"монет",point_one:"монета",point_few:"монет",point_many:"монет",point_other:"монет",position:"должность",Position:"Должность",Plugins:"Плагины",preview:"просмотр",Price:"Цена",price:"цена",[$.purchase]:"покупка","price asc":"сначала самые дешевые","price desc":"сначала самые дорогие",Profile:"Профиль",profile:"профиль",profiles:"профили",pts:"бон.",PTS:"БОН.",place:"место",Previous:"Назад",previous:"назад",Purchase:"Покупка","regard added":"Покупка успешно совершена","request added":"Запрос создан","Registration Confirmation":"Подтверждение регистрации","Recover password":"Восстановить пароль","Requests in progress":"Запросы в работе",Refund:"Возврат",[de.remove_all]:"удалить всех",[de.refund]:"возврат",Required:"Обязательное поле",requests:"запросы",Requests:"Запросы",Register:"Зарегистрировать",Remove:"Удалить",records:"записей",records_zero:"записей",records_one:"запись",records_few:"записи",records_many:"записей",records_other:"записей",[de.restore_password]:"восстановить пароль",[de.recover_email_has_been_sent]:"письмо для восставновления пароля было отправлено","request has been refunded":"запрос отменен","request has been set as incoming":"запрос переведен во входящие","request has been set as close":"запрос переведен во закрытые","request has been set as active":"запрос переведен в работе","Refresh or activate":"Обновить или активировать",Rollback:"Вернуть",Roles:"Роли",rows:"строк","rows per page":"строк на стр.",[O.settings_updated]:"настройки обновлены",[O.scheduler_created]:"планировщик создан",[O.scheduler_updated]:"планировщик обновлен",[O.scheduler_deleted]:"планировщик удален",[O.scheduler_delete]:"удаление планировщика",save:"сохранить",saved:"сохранено","Save changes":"Сохранить изменения","Self account":"Могу потратить",Search:"Поиск","Search string":"Строка поиска...",search:"поиск",[O.set_password]:"установить пароль",Share:"Поделиться",share:"поделиться","Share dialog":"Окно подарков","Show only mine":"Показывать только мои","Show snow":"Включить снег","sort by alphabet":"сортировать по алфавиту","Store item":"Элемент магазина",Send:"Отправить","Send to all":"Отправить всем","Send again":"Отправить еще раз",[O.send_confirmation_email]:"Отправить письмо подтверждения","Select image":"Выбрать картинку","select all":"выбрать всех","selected employees":"выбранные сотрудники",Settings:"Настройки",Schedule:"Расписание",Schedulers:"Расписания",Sign_Out:"Выход",Sign_In:"Войти",[O.send]:"Отправить",[O.sign_in]:"войти",[O.sign_up]:"регистрация",[O.soon_will_be_back]:"Он улетел, но обещал вернуться",[O.show_only_mine]:"только мои",Sign_Up:"Регистрация",Statistic:"Статистика","start typing":"начните ввод",Store:"Магазин","Store admin":"Администратор магазина","store admin":"управляющий","Something went wrong.":"Что-то пошло не так.",Surname:"Фамилия","Submit values":"Отправить",Submit:"Подтвердить",Tenant:"Команда","Team settings":"Настройки команды",transferred:"перведено","transfer points":"перевести монеты","transfer donuts":"перевести пончики",to:"для",[se.transfer]:"перевести",[se.transfer_type]:"тип перевода",[se.to_store]:"в магазин","Transfer donuts or coins":"Перевести пончики или монеты",[se.time_is_required]:"необходимо указать время","to can transfer to others":"можно дарить коллегам","This field is required":"Это поле является обязательным",[se.teams_you_can_join]:"команды, к которым можно присоединиться",[se.tooltip_scheduler_time]:"фактическое действие будет запущено в течении 1 часа после указанного времени.","Teams I can join":"Команды, к которым могу присоединиться","Update donut":"Обновить пончик",Update:"Обновить",[$t.under_construct]:"В разработке",[$t.updated]:"обновлено","Update is available":"Обновление доступно","user can spend in store":"можно тратить в магазине","welcome points":"приветственные монеты","welcome donuts":"приветственные пончики","Without department":"Без подразделения","Wrong credentials":"Не удалось войти с этим именем и паролем","Withdrawal error. Not enough points":"Ошибка. Недостаточно монет","you have to be admin":"Вы должны иметь полномочия администратора","You have successfully bought a new donut":"Вы успешно купили плюшку","your comment":"ваш комментарий",yes:"да",...Yh,...Qh,...yh.translations}},Jh={translations:{Events:"Events",Balance:"Balance","Confirmation email was sent to":"Confirmation email was sent to",Confirm:"Confirm email",Dashboard:"Dashboard","invitation added":"Invitation added","Registration Confirmation":"Registration Confirmation","regard added":"New donuts has been bought","name has been taken":"NAME HAS BEEN TAKEN","Log in":"Log in",Sign_In:"Sign In",Sign_Out:"Sign Out",Sign_Up:"Sign Up","Recover password":"Recover password",CONST_GREETINGS:"Fast and simple way to   encourage your colleagues and thank them for their patience and help.",[se.tooltip_scheduler_time]:"the actual action will be fired within 1 hour after the specified time."}};Ft.use(_i).init({resources:{en:Jh,ru:Kh},fallbackLng:"en",debug:!1,ns:["translations"],defaultNS:"translations",keySeparator:!1,interpolation:{escapeValue:!1,formatSeparator:","}});const vr=L("div")(({theme:e})=>({display:"flex",alignItems:"center",justifyContent:"space-between",padding:e.spacing(0,1),...e.mixins.toolbar})),Zt=240,Cs=60,_s=e=>({width:Zt,transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen}),overflowX:"hidden"}),Ts=e=>({transition:e.transitions.create("width",{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),overflowX:"hidden",width:`calc(${e.spacing(7)} + 1px)`,[e.breakpoints.up("sm")]:{width:`calc(${e.spacing(8)} + 1px)`}}),Zh=L(oi,{shouldForwardProp:e=>e!=="open"})(({theme:e,open:t})=>({width:Zt,flexShrink:0,whiteSpace:"nowrap",boxSizing:"border-box",...t&&{..._s(e),"& .MuiDrawer-paper":_s(e)},...!t&&{...Ts(e),"& .MuiDrawer-paper":Ts(e)}})),wr=(e,t)=>Object.values(e).reduce((s,a)=>{const r=t==null?void 0:t.find(c=>c.authenticated&&c.from===a.path),o={...a,...r&&{authenticatedRedirect:r==null?void 0:r.to}},i=a.children?wr(a.children,t):[];return[...s,o,...i]},[]);function Sr(){return Xs()}const Xh=()=>{const{t:e}=y();return n.jsx(P,{sx:{alignItems:"center",width:"100%",height:"60vh",display:"flex",justifyContent:"center"},component:"div",children:n.jsxs(he,{direction:"column",children:[n.jsx(ii,{sx:{height:"150px",width:"150px"}}),n.jsx(k,{variant:"h5",children:e(G.access_denied)})]})})},ep=L(ci,{shouldForwardProp:e=>e!=="isLoading"&&e!=="isTop"})(({theme:e,isLoading:t,isTop:s})=>t?{background:"transparent",[M("MuiPaper-root")]:{overflow:"hidden",background:e.palette.background,borderRadius:"50%",opacity:.5}}:s?{[M("MuiDialog-scrollPaper")]:{alignItems:"start !important"}}:{}),tp=e=>{const{handleClose:t,modal:s,preventCloseOnBackDropClick:a,isLoading:r,isTop:o,...i}=e,c=pe(),l=re(c.breakpoints.down("sm")),d=(m,h)=>{(h!=="backdropClick"||!a)&&t(s)};return n.jsx(ep,{...i,onClose:d,fullScreen:l&&!r&&s.allowFullscreen,isLoading:r,isTop:o})},np=()=>{const e=u.useContext(_a),{t}=y(),s=u.useContext(On),[a,r]=u.useState({}),o=pe(),i=re(o.breakpoints.down("sm")),c=(l,d)=>{r(m=>({...m,[l]:d}))};return n.jsx(n.Fragment,{children:[...e].map(l=>{const d=l.title?be.isFunction(l.title)?l.title(l):l.title:"",m=a[l.modalKey];return n.jsxs(tp,{handleClose:()=>s(l.modalKey,l.name),modal:l,open:!!l.modalKey,preventCloseOnBackDropClick:l.preventCloseOnBackDropClick,isLoading:m,isTop:l.isTop,children:[n.jsx(fa,{loading:m}),n.jsxs(P,{className:"bnt-dialog-box",sx:m?{display:"none"}:{overflowX:"hidden"},children:[l.hasTopMenu&&!i?n.jsxs(n.Fragment,{children:[n.jsxs(w,{className:"p-3",direction:"row",justifyContent:"space-between",alignItems:"center",sx:{color:"success.dark"},children:[n.jsx(k,{variant:"h5",children:d}),n.jsx(Be,{onClick:()=>s(l.modalKey,l.name),children:n.jsx(it,{})})]}),n.jsx(un,{})]}):null,l.renderItem(l,{close:()=>s(l.modalKey,l.name),setModalLoading:h=>c(l.modalKey,h)}),i&&n.jsx(w,{justifyContent:"center",children:n.jsx(Ke,{onClick:()=>s(l.modalKey,l.name),children:t(E.close)})})]})]},l.modalKey)})})},sp=({children:e,config:t,path:s,addressPath:a,defaultModal:r,defaultModalData:o})=>{const i=li(),c=Sr(),[l,d]=u.useState(null);u.useEffect(()=>{d(null)},[s]);const m=u.useCallback((f,x,g)=>{const b=g||Si(`modal-${s}-`),{title:j,getPath:C}=t.items[f],R=Ci.isFunction(j)?j(x):j;if(C){let N=C(x);N=N[0]==="/"?N:`/${N}`,a!==N&&i(C(x),{state:{background:c,name:f,data:x,modal:!0}})}d(N=>{var W,J,X,U;return{...N,[b]:{name:f,data:x,modalKey:b,title:R||V.EMPTY_STRING,renderItem:((W=t.items[f])==null?void 0:W.renderItem)||(H=>n.jsx("div",{children:H})),hasTopMenu:((J=t.items[f])==null?void 0:J.hasTopMenu)||!1,isTop:((X=t.items[f])==null?void 0:X.isTop)||!1,preventCloseOnBackDropClick:((U=t.items[f])==null?void 0:U.preventCloseOnBackDropClick)||!1}}})},[s]),h=u.useCallback((f,x)=>{const{items:g}=t;if(x){const{getPath:b}=g[x];b&&i(-1)}d(b=>b?Object.keys(b).reduce((j,C)=>(C!==f&&(j[C]=b[C]),j),{}):null)},[t,i]);u.useEffect(()=>{r&&o&&m(r,o)},[]);const p=u.useMemo(()=>l?Object.values(l):[],[l]);return n.jsx(Ca.Provider,{value:m,children:n.jsx(On.Provider,{value:h,children:n.jsxs(_a.Provider,{value:p,children:[e,n.jsx(np,{})]})})})},ap=({children:e,addressPath:t,path:s,modalName:a,modalData:r})=>n.jsx(sp,{path:s,addressPath:t,config:Tn,defaultModalData:r,defaultModal:a,children:e}),ks=(e,t,s,a,r)=>t.isAuthenticated&&!t.tenant&&(!e.tenantNotRequired||e.path==="/")?n.jsx(wt,{to:_[v.TenantList]}):t.isAuthenticated&&e.authenticatedRedirect?n.jsx(wt,{to:e.authenticatedRedirect}):t.isAuthenticated&&!e.authenticated?n.jsx(wt,{to:"/"}):t.isAuthenticated||e.anonymous?n.jsx(ap,{children:e.component,path:e.path,addressPath:s,modalData:r,modalName:a}):n.jsx(wt,{to:e.redirect||_[v.Login]}),rp=({routes:e})=>{const t=Sr(),{checkAuth:s,isAuthLoading:a,auth:r,currentRoles:o}=Ve(),{background:i,name:c,data:l}=t.state||{};u.useEffect(()=>{s()},[]);const d=u.useMemo(()=>e.filter(p=>p.authenticated),[e,r]),m=u.useMemo(()=>e.filter(p=>!p.authenticated),[e,r]);if(a)return n.jsx("div",{children:"Checking auth..."});const h=p=>p.roles?!!be.intersection(p.roles,o).length:!0;return n.jsxs(di,{location:i||t,children:[n.jsx(yn,{path:"*",element:n.jsx(wt,{to:r.isAuthenticated?r.tenant?"/":_[v.TenantList]:_[v.Login]})}),d&&d.filter(p=>p.tenantNotRequired||r.tenant).map(p=>{const f=r.isAuthenticated&&!a&&!h(p)?n.jsx(Xh,{}):ks(p,r,t.pathname,c,l);return n.jsx(yn,{path:p.path,element:f},p.path)}),m&&m.map(p=>n.jsx(yn,{path:p.path,element:ks(p,r,t.pathname)},p.path))]})},op=e=>u.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"10 0 50 49",...e},u.createElement("g",{id:"layer101",fill:"#474f55",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"M 242,556 C 139,522 77,433 76,320 75,54 429,-23 539,220 c 70,153 -35,332 -203,346 -28,2 -70,-2 -94,-10 z M 348,364 c 41,-29 19,-94 -33,-94 -21,0 -55,32 -55,51 0,13 42,59 54,59 6,0 22,-7 34,-16 z",id:"path2"})),u.createElement("g",{id:"layer102",fill:"#8b7849",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"m 219,507 c -29,-16 -54,-40 -74,-72 -26,-42 -30,-58 -30,-121 0,-64 3,-77 30,-115 113,-160 349,-99 381,98 13,82 -46,187 -123,220 -51,21 -133,17 -184,-10 z M 374,388 c 40,-35 43,-78 11,-116 -22,-26 -34,-32 -66,-32 -80,0 -115,77 -63,139 32,39 80,42 118,9 z",id:"path5"})),u.createElement("g",{id:"layer103",fill:"#45b980",stroke:"none",style:{fill:"#226e13",fillOpacity:1},transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"M 219,507 C 136,463 90,346 120,255 157,143 290,81 398,125 c 168,71 168,319 0,390 -55,22 -127,19 -179,-8 z M 373,390 c 50,-39 42,-117 -15,-146 -60,-31 -128,13 -128,83 0,71 85,109 143,63 z",id:"path8",style:{fill:"#226e13",fillOpacity:1}})),u.createElement("g",{id:"layer104",fill:"#b2b24f",stroke:"none",style:{fill:"#e5b54f",fillOpacity:1},transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"m 418,489 c 37,-37 72,-98 72,-127 0,-24 -41,-62 -67,-62 -13,0 -24,-8 -28,-20 -4,-11 -20,-27 -37,-36 -40,-21 -97,-6 -127,33 -21,26 -29,73 -12,73 5,0 16,11 25,25 12,18 -2,11 -46,-25 -34,-27 -68,-50 -75,-50 -18,0 -16,-17 6,-65 49,-105 183,-157 269,-105 42,26 89,100 97,153 3,23 11,52 17,64 20,40 -33,128 -96,160 l -31,15 z",id:"path11",style:{fill:"#e5b54f",fillOpacity:1}}),u.createElement("path",{d:"m 382,459 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path13",style:{fill:"#e5b54f",fillOpacity:1}}),u.createElement("path",{d:"m 210,430 c 0,-5 11,-10 25,-10 14,0 25,5 25,10 0,6 -11,10 -25,10 -14,0 -25,-4 -25,-10 z",id:"path15",style:{fill:"#e5b54f",fillOpacity:1}}),u.createElement("path",{d:"m 436,391 c -7,-11 22,-23 36,-15 6,4 5,10 -3,15 -18,11 -26,11 -33,0 z",id:"path17",style:{fill:"#e5b54f",fillOpacity:1}})),u.createElement("g",{id:"layer105",fill:"#f8bf37",stroke:"none",style:{fill:"#f88b12",fillOpacity:1},transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"m 448,463 c 16,-21 35,-55 42,-75 13,-44 36,-53 25,-10 -8,35 -48,93 -76,110 -17,11 -15,6 9,-25 z",id:"path20",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 382,459 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path22",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 210,430 c 0,-5 11,-10 25,-10 14,0 25,5 25,10 0,6 -11,10 -25,10 -14,0 -25,-4 -25,-10 z",id:"path24",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 436,391 c -7,-11 22,-23 36,-15 6,4 5,10 -3,15 -18,11 -26,11 -33,0 z",id:"path26",style:{fill:"#f88b12",fillOpacity:1}}),u.createElement("path",{d:"m 174,327 c -18,-15 -39,-27 -47,-27 -13,0 -13,-7 -4,-42 20,-79 112,-148 200,-148 77,0 167,100 167,185 v 36 l -26,-20 c -15,-12 -32,-21 -40,-21 -7,0 -27,-14 -44,-31 -27,-28 -36,-31 -72,-26 -59,8 -92,36 -98,82 l -5,38 z",id:"path28",style:{fill:"#f88b12",fillOpacity:1}})),u.createElement("g",{id:"layer106",fill:"#a3ddc1",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"m 382,459 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path31"}),u.createElement("path",{d:"m 210,430 c 0,-5 11,-10 25,-10 14,0 25,5 25,10 0,6 -11,10 -25,10 -14,0 -25,-4 -25,-10 z",id:"path33"}),u.createElement("path",{d:"m 436,391 c -7,-11 22,-23 36,-15 6,4 5,10 -3,15 -18,11 -26,11 -33,0 z",id:"path35"}),u.createElement("path",{d:"m 455,256 c -11,-8 -14,-15 -8,-19 6,-4 16,0 23,8 17,21 8,28 -15,11 z",id:"path37"}),u.createElement("path",{d:"m 160,250 c 0,-5 9,-10 20,-10 11,0 20,5 20,10 0,6 -9,10 -20,10 -11,0 -20,-4 -20,-10 z",id:"path39"}),u.createElement("path",{d:"m 332,179 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path41"})),u.createElement("g",{id:"layer107",fill:"#fde7b1",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"m 220,430 c 0,-5 7,-10 15,-10 8,0 15,5 15,10 0,6 -7,10 -15,10 -8,0 -15,-4 -15,-10 z",id:"path44"}),u.createElement("path",{d:"m 455,256 c -11,-8 -14,-15 -8,-19 6,-4 16,0 23,8 17,21 8,28 -15,11 z",id:"path46"}),u.createElement("path",{d:"m 160,250 c 0,-5 9,-10 20,-10 11,0 20,5 20,10 0,6 -9,10 -20,10 -11,0 -20,-4 -20,-10 z",id:"path48"}),u.createElement("path",{d:"m 332,179 c 2,-7 10,-15 17,-17 8,-3 12,1 9,9 -2,7 -10,15 -17,17 -8,3 -12,-1 -9,-9 z",id:"path50"})),u.createElement("g",{id:"layer108",fill:"#f6f9f1",stroke:"none",transform:"matrix(0.09196477,0,0,0.09089203,3.0154344,-2.8456907)"},u.createElement("path",{d:"m 220,430 c 0,-5 7,-10 15,-10 8,0 15,5 15,10 0,6 -7,10 -15,10 -8,0 -15,-4 -15,-10 z",id:"path53"}),u.createElement("path",{d:"m 165,250 c 3,-5 13,-10 21,-10 8,0 14,5 14,10 0,6 -9,10 -21,10 -11,0 -17,-4 -14,-10 z",id:"path55"}))),ip=()=>{const{menuRoutes:e}=u.useContext(Qe),{currentRoles:t,auth:s}=Ve();return{menuRoutes:u.useMemo(()=>e.filter(r=>r.tenantNotRequired||s.tenant).filter(r=>{var o;return!((o=r.roles)!=null&&o.length)||be.intersection(r.roles,t).length}),[e,t])}},cp=({route:e,showFullName:t,showTooltip:s,onBeforeClick:a=()=>({redirect:!0})})=>{const r=Ae(),{translate:o}=y(),i=()=>{const{redirect:c}=a();c&&r(me(e.path))};return n.jsx(We,{placement:"right",title:o(e.navbarName),disableHoverListener:!s,children:n.jsxs(ta,{sx:{minHeight:24,justifyContent:t?"initial":"center",px:2.5,pt:.5,pb:.5},onClick:i,children:[n.jsx(na,{sx:{minWidth:0,mr:t?3:"auto",justifyContent:"center"},children:e.icon}),n.jsx(ui,{primary:o(e.navbarName),sx:{opacity:t?1:0}})]})})},Cr=({showFullName:e,showTooltip:t})=>{const{menuRoutes:s}=ip();return n.jsx(n.Fragment,{children:s.map(a=>n.jsx(sa,{disablePadding:!0,sx:{display:"block",pt:0,pb:0},children:n.jsx(cp,{route:a,showFullName:e,showTooltip:t})},a.navbarName))})},lp=e=>{const{showFullName:t}=e,{toggleDrawer:s}=u.useContext(Qe),a=pe();return n.jsxs(mi,{children:[n.jsx(sa,{disablePadding:!0,sx:{display:"block",pt:0,pb:0},children:n.jsx(ta,{onClick:s,sx:{minHeight:24,justifyContent:t?"flex-end":"center",px:2.5,pt:0,pb:0},children:n.jsx(na,{sx:{minWidth:0,paddingTop:0,paddingBottom:0},children:t?n.jsx(fe,{sx:{mr:0,pr:0,pt:.5,pb:.5},children:a.direction==="rtl"?n.jsx(us,{}):n.jsx(us,{})}):n.jsx(fe,{sx:{pt:.5,pb:.5},children:n.jsx(hi,{})})})})}),n.jsx(Cr,{...e})]})},dp=()=>{const{isDrawerOpen:e}=u.useContext(Qe),t=re(a=>a.breakpoints.up("sm")),{toggleDrawer:s}=u.useContext(Qe);return n.jsx("div",{children:t&&n.jsxs(Zh,{variant:"permanent",open:e,children:[n.jsx(vr,{sx:{padding:0},children:n.jsx(Ge,{onClick:s,sx:{width:"100%",height:"100%",padding:0},children:e?n.jsx(mn,{style:{width:"128px",height:"50px"}}):n.jsx(op,{style:{width:"50px",height:"50px"}})})}),n.jsx(Os,{}),n.jsx(lp,{showFullName:e,showTooltip:!e})]})})},up=L(pi,{shouldForwardProp:e=>e!=="open"&&e!=="fullwidth"})(({theme:e,open:t,fullwidth:s})=>({backgroundColor:e.palette.background.default,marginLeft:"20px",width:"calc(100% - 20px)",...!s&&{marginLeft:Cs,width:`calc(100% - ${Cs}px)`},color:e.palette.getContrastText(e.palette.background.default),boxShadow:"none",transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen}),...t&&!s&&{marginLeft:Zt,width:`calc(100% - ${Zt}px)`,transition:e.transitions.create(["width","margin"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.enteringScreen})}})),mp=L(gi)(()=>({paddingLeft:"15px"})),hp=({profile:e})=>{var h,p;const{account:t,isLoading:s}=Tt((h=e==null?void 0:e.distrib_account)==null?void 0:h.id),a=pe(),r=re(a.breakpoints.down("sm")),{account:o,isLoading:i}=Tt((p=e==null?void 0:e.self_account)==null?void 0:p.id),{BonutsCurrency:c}=At({height:"16px",width:"16px"}),{toSelfBalanceHistory:l,toDistribBalanceHistory:d}=Ze(e),{t:m}=y();return n.jsxs(w,{direction:"column",minWidth:r?20:100,maxWidth:r?50:200,children:[n.jsx(P,{color:"grey.400",sx:{lineHeight:"16px",borderBottom:"1px solid"},className:"pr-1 pointer",onClick:l,children:n.jsxs(w,{sx:{lineHeight:"16px"},direction:"row",gap:1,alignItems:"center",justifyContent:"flex-end",children:[n.jsx(k,{variant:"caption",color:"grey.700",sx:{lineHeight:"22px",textWrap:"nowrap"},children:!i&&e?n.jsx(n.Fragment,{children:r?o==null?void 0:o.balance:`${o==null?void 0:o.balance} ${m("point",{count:o==null?void 0:o.balance})}`}):null}),n.jsx(c,{})]})}),n.jsxs(w,{className:"pr-1 pointer",sx:{lineHeight:"16px"},direction:"row",gap:1,alignItems:"center",justifyContent:"flex-end",onClick:d,children:[n.jsx(k,{variant:"caption",color:"grey.700",sx:{lineHeight:"22px",textWrap:"nowrap"},children:!s&&e?n.jsx(n.Fragment,{children:r?t==null?void 0:t.balance:`${t==null?void 0:t.balance} ${m("donut",{count:t==null?void 0:t.balance})}`}):null}),n.jsx(tn,{color:"primary",sx:{width:"16px",height:"16px"}})]})]})},pp=({profile:e})=>{var l,d;const{isDrawerOpen:t}=u.useContext(Qe),s=re(m=>m.breakpoints.up("sm")),[a,r]=u.useState(null),o=!!a,i=m=>{r(m.currentTarget)},c=()=>{r(null)};return n.jsx(up,{position:"fixed",open:t&&s,fullwidth:!s,children:n.jsx(mp,{disableGutters:!0,children:n.jsxs(he,{direction:"row",justifyContent:"space-between",alignItems:"center",spacing:1,sx:{width:"100%",mr:"10px"},children:[n.jsxs(w,{direction:"column",gap:0,sx:{flex:1,overflow:"hidden"},children:[n.jsx(k,{variant:"button",display:"block",sx:{textWrap:"nowrap",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",minWidth:20},children:e==null?void 0:e.user_name}),n.jsx(k,{variant:"caption",display:"block",gutterBottom:!0,sx:{textWrap:"nowrap",whiteSpace:"nowrap",textOverflow:"ellipsis",overflow:"hidden",minWidth:20},children:e==null?void 0:e.position})]}),n.jsxs(w,{direction:"row",alignItems:"center",gap:2,children:[n.jsx(hp,{profile:e||void 0}),n.jsx(fe,{edge:"start",color:"inherit","aria-label":"Avatar",onClick:i,children:n.jsx(Ye,{src:((d=(l=e==null?void 0:e.user_avatar)==null?void 0:l.thumb)==null?void 0:d.url)||void 0,alt:`${e==null?void 0:e.user_name}`})}),n.jsx(xi,{anchorEl:a,id:"account-menu",open:o,onClose:c,onClick:c,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:n.jsx(Cr,{showFullName:!0})})]})]})})})},gp=()=>{const{auth:e}=Ve(),{routes:t,redirects:s}=u.useContext(Qe),{profile:a,isLoading:r}=Ie();K(ne.Profile,r);const o=u.useMemo(()=>wr(t,s),[t,s]);return n.jsxs(P,{sx:{display:"flex",height:"100vh"},children:[n.jsx(fi,{}),e.isAuthenticated&&n.jsx(pp,{profile:a}),e.isAuthenticated&&n.jsx(dp,{}),n.jsx(P,{component:"main",sx:{flexGrow:1,maxWidth:"100%",height:"100%",overflow:"hidden"},children:n.jsxs(w,{direction:"column",sx:{height:"100%",p:0,m:0,overflow:"hidden"},children:[e.isAuthenticated&&n.jsx(vr,{}),n.jsx(P,{sx:{flexGrow:1,height:"100%",overflowY:"auto",p:1},children:n.jsx(rp,{routes:o})})]})})]})},xp=()=>{const[e,t]=u.useState(!1),s=u.useCallback(()=>{t(o=>!o)},[]),a=u.useMemo(()=>zh(F),[]),r=u.useMemo(()=>({isDrawerOpen:e,toggleDrawer:s,menuRoutes:a,routes:F.routes,redirects:F.redirects.redirects}),[e,s,a]);return n.jsx(Gh,{children:n.jsx(bi,{i18n:Ft,children:n.jsx(yi,{children:n.jsx(Uh,{children:n.jsx(Qe.Provider,{value:r,children:n.jsx(ji.HistoryRouter,{history:Pc,children:n.jsx(Ic,{children:n.jsx(gp,{})})})})})})})})},fp=vi.createRoot(document.getElementById("root"));fp.render(n.jsx(et.StrictMode,{children:n.jsx(wi,{store:an,children:n.jsx(xp,{})})}));export{Fe as A,w as B,Qt as C,Kt as H,ne as M,y as a,$ as b,ur as c,Zn as d,mt as e,Pe as f,ht as g,hn as h,T as i,K as j,_m as k,Z as t,pr as u};
